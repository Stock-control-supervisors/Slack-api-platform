(()=>{var st=Object.defineProperty;var d=(o,t)=>st(o,"name",{value:t,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["rollup-secondary_a_required","TS.enterprise","TS.utility"],{788874:()=>{(function(){var o=10,t=10,n=100,s=100,l=33,e=100;TS.registerComponent("SearchableEnterpriseTeamList",{_constructor:function(i){this.id=i.id,this.triggered_by_user_action=i.triggered_by_user_action,this.$_container=i.$container,this.$_long_list_view,this.$_search_bar,this.$_search_input,this.$_clear_icon,this._team_searcher={},this._have_all_teams=!1,this._model_ob_id=i.model_ob_id,this._omit_my_team=!!i.omit_my_team,this._current_query="",this._approx_item_height=30,this._long_list_view_height=0,this._long_list_view_items_height=0,this._long_list_view_initial_height=null,this._fetch_page_p=null,this._resize_sig_handler=null,this.team_clicked_sig=new signals.Signal},destroy:function(){this.$_container.off(),this.$_long_list_view&&this.$_long_list_view.off(),this.$_search_input&&this.$_search_input.off(),this.$_clear_icon&&this.$_clear_icon.off(),this.$_long_list_view&&this.$_long_list_view.length&&$.data(this.$_long_list_view.get(0),"TS-longListView")&&this.$_long_list_view.longListView("destroy"),this.$_search_bar&&this.$_search_bar.remove()},showInitial:function(){var i=this;this.$_long_list_view=this.$_container.find(".p-searchable_enterprise_team_list__scroller"),this._showLoadingState(),this._fetchPage().then(function(){i._hideLoadingState()}).then(function(){return i._setupLongListView(),i._maybeSetupSearchBar(),null})},maybeRerenderLongListView:function(){this.$_long_list_view&&_.get(this._team_searcher,"items")&&this.$_long_list_view.longListView("setItems",this._team_searcher.items,!0,!0)},_fetchPage:function(){if(this._fetch_page_p)return this._fetch_page_p;var i=this;return this._setupSearcher(),this._fetch_page_p=TS.teams.promiseToSearchTeams(this._team_searcher).then(function(){i._fetch_page_p=null,i._have_all_teams=i._team_searcher.num_remaining<=0}),this._fetch_page_p},_setupSearcher:function(){this._team_searcher.max_api_results=this._current_query?n:t;var i=TS.interop.utility.looksLikeMemberId(this._model_ob_id)?TS.interop.members.getMemberById(this._model_ob_id):TS.redux.channels.getEntityById(this._model_ob_id);this._team_searcher.included_ids=TS.interop.utility.looksLikeMemberId(_.get(i,"id"))?_.get(i,"enterprise_user.teams",[]):TS.interop.rules.channels.getInternalTeamIds(TS.redux.getState(),i),_.get(TS.model.user,"is_restricted")&&(this._team_searcher.included_ids=_.intersection(_.get(TS.model.user,"enterprise_user.teams"),this._team_searcher.included_ids)),this._omit_my_team&&(this._team_searcher.omitted_ids=[TS.model.team.id]),this._current_query&&(this._team_searcher.query=this._current_query)},_fetchProcessAndDisplayPage:function(){var i=this;return this._fetchPage().then(function(){return i._maybeHideNoResultsState(),_.get(i._team_searcher,"items.length")?i.$_long_list_view.longListView("setItems",i._team_searcher.items,!0,!0):i._showNoResultsState(),null}).then(function(){return TS.utility.rAF(function(){i._long_list_view_height=i.$_long_list_view.height(),i._long_list_view_items_height=i.$_long_list_view.find(".list_items").height(),i._recursivelyFillLongListViewToHeight()}),null})},_maybeSetupSearchBar:function(){var i=this;if(!this.$_search_bar){var u=TS.interop.utility.looksLikeMemberId(this._model_ob_id)?TS.interop.members.getMemberById(this._model_ob_id):TS.redux.channels.getEntityById(this._model_ob_id),f;TS.interop.utility.looksLikeMemberId(_.get(u,"id"))?f=_.get(u,"enterprise_user.teams.length"):_.get(u,"is_global_shared")?f=1/0:f=TS.interop.rules.channels.getInternalTeamIds(TS.redux.getState(),u).length,f>=o&&(i.$_long_list_view.before(TS.templates.teams_search_bar()),i.$_search_bar=i.$_container.find(".p-searchable_enterprise_team_list__search_bar"),i.$_search_input=i.$_search_bar.find(".p-searchable_enterprise_team_list__input"),i._setupSearchInput())}},_setupSearchInput:function(){var i=this;this.$_search_bar.find(".p-searchable_enterprise_team_list__search.loading").replaceWith(TS.templates.teams_search_bar_input()),this.$_search_input=this.$_search_bar.find(".p-searchable_enterprise_team_list__input"),this.$_clear_icon=this.$_container.find(".icon_close"),this.$_search_input.bind("keyup.searchable_enterprise_team_list",this._handleSearchKeyUp.bind(this)),this.$_clear_icon.bind("click",function(){i._reset(),Promise.resolve().then(function(){return i.$_search_input.focus(),null})}),this.triggered_by_user_action&&this.$_search_input.focus()},_setupLongListView:function(){var i=this,u=TS.interop.utility.looksLikeMemberId(this._model_ob_id);this.$_long_list_view.longListView({items:this._team_searcher.items||[],approx_item_height:this._approx_item_height,approx_divider_height:this._approx_divider_height,calcItemHeight:function(f){return f.outerHeight()},makeElement:function(){return $(TS.templates.teams_list_item())},renderItem:function(f,S){var p=TS.model.team.id!==S.id,h=u&&p;f.html(TS.templates.teams_team_row({team:S,linked:h?i._buildTeamLink(S):!1,target:h?i._buildTeamLinkTarget(S):""})),TS.utility.makeSureAllLinksHaveTargets(f)}}),this.$_long_list_view.on("click","[data-long-list-item]",function(f){i.team_clicked_sig.dispatch(f,TS.teams.getTeamById($(f.target).closest(".p-enterprise_team_item").find("[data-team-id]").data("teamId")))}),this._resize_sig_handler=_.throttle(function(){i._long_list_view_height=i.$_long_list_view.height(),i._long_list_view_items_height=i.$_long_list_view.find(".list_items").height(),i._long_list_view_initial_height||(i._long_list_view_initial_height=i._long_list_view_height)},l),this.$_long_list_view.on("scroll",_.debounce(function(f){if(!i._current_query){var S=i._long_list_view_items_height-($(f.target).scrollTop()+i._long_list_view_height);S<s&&i._fetchProcessAndDisplayPage()}},e)),TS.utility.rAF(function(){i._recursivelyFillLongListViewToHeight()})},_recursivelyFillLongListViewToHeight:function(){var i=this;this._current_query||this._long_list_view_items_height<=this._long_list_view_height&&!this._have_all_teams&&this._fetchProcessAndDisplayPage().then(function(){i._long_list_view_items_height=i.$_long_list_view.find(".list_items").height()})},_reset:function(){this._team_searcher={},this._current_query="",this.$_search_input.val(""),this.$_clear_icon.addClass("hidden"),this._have_all_teams=!1,this._maybeHideNoResultsState(),this.$_long_list_view.longListView("setItems",[],!0,!0),this.$_long_list_view.scrollTop(0),this.$_long_list_view.height(this._long_list_view_initial_height),this._fetchProcessAndDisplayPage()},_showLoadingState:function(){this.$_long_list_view.before(TS.templates.infinite_spinner({color:"white",size:"medium"}))},_hideLoadingState:function(){this.$_container.find(".infinite_spinner").remove()},_showNoResultsState:function(){var i=this.$_container.find(".no_results");i.length>0&&i.remove();var u=this,f={query:this._current_query},S=TS.templates.teams_searchable_no_results(f);this.$_long_list_view.hide().before(S),this.$_container.on("click",".clear_enterprise_team_filter",function(){u._reset()})},_maybeHideNoResultsState:function(){var i=this.$_container.find(".no_results");if(i.length!=0){var u=this.$_container.find(".other_matches");u&&u.remove(),i.remove(),this.$_long_list_view.show()}},_handleSearchKeyUp:function(i){var u=$(i.target).val();u.trim()!==this._current_query&&(this._fetch_page_p&&(this._fetch_page_p.cancel(),this._fetch_page_p=null),this._team_searcher={},this._have_all_teams=!1,this._current_query=u.trim(),this._fetchProcessAndDisplayPage(),this.$_long_list_view.scrollTop(0),this.$_clear_icon.toggleClass("hidden",!this._current_query))},_buildTeamLink:function(i){return`${TS.utility.enterprise.buildTeamUrl(i.domain)}home`},_buildTeamLinkTarget:function(i){return TS.utility.enterprise.buildTeamUrl(i.domain)},test:function(){var i={};return Object.defineProperty(i,"MINIMUM_TEAMS_FOR_SEARCH",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(i,"FETCH_PAGE_SIZE",{get:function(){return t},set:function(u){t=u}}),Object.defineProperty(i,"FETCH_PAGE_SIZE_SEARCH",{get:function(){return n},set:function(u){n=u}}),i}})})()},200912:()=>{(function(){TS.registerModule("api",{})})()},965872:()=>{(function(){TS.registerModule("automount",{onStart:function(){var o=TS.redux.getStoreInstance();setTimeout(()=>{TS.interop.automount.mountAllWithStore(o)},0)}})})()},118414:()=>{(function(){TS.registerModule("bots",{legacyEnsureBotsInDataArePresent:function(o){var t=TS.interop.utility.extractAllBotIds(o);return TS.interop.bots.ensureBotsArePresent(t)}})})()},472315:()=>{(function(){TS.registerModule("channels.read_only",{list_updated_sig:new signals.Signal,refetching_channel_info_ids:{},stashAndFetchChannelPostingUpdates:function(o,t,n){if(!TS.channels.read_only.refetching_channel_info_ids[o]){TS.channels.read_only.refetching_channel_info_ids[o]=!0;var s={id:o},l=!0;switch(t){case 6:s.is_read_only=!0,s.is_thread_only=!1,s.is_non_threadable=!1;break;case 7:s.is_read_only=!1,s.is_thread_only=!0,s.is_non_threadable=!1;break;case 8:s.is_read_only=!1,s.is_thread_only=!1,s.is_non_threadable=!0;break;default:l=!1;break}l&&(TS.interop.channels.upsertChannel(s),TS.channels.read_only.list_updated_sig.dispatch()),TS.shared.promiseToRefetchModelOb(o,n).then(function(){delete TS.channels.read_only.refetching_channel_info_ids[o],TS.channels.read_only.list_updated_sig.dispatch()})}}})})()},797048:()=>{(function(){TS.registerModule("channels",{switched_sig:new signals.Signal,joined_sig:new signals.Signal,left_sig:new signals.Signal,message_changed_sig:new signals.Signal,deleted_sig:new signals.Signal,onStart:function(){TS.channels.deleted_sig.add(o=>{TS.channels.temp_list_of_removed_channels[o]=!0}),TS.channels.joined_sig.add(o=>{delete TS.channels.temp_list_of_removed_channels[o.id]})},temp_list_of_removed_channels:{},legacyOnJoin:function(o,t,n){if(!o){t.error==="name_taken"||t.error==="is_archived"||(t.error==="restricted_action"?TS.generic_dialog.alert(TS.interop.i18n.t("<p>You don\u2019t have permission to create new channels.</p><p>Talk to your Workspace Owner.</p>","channels")()):(TS.error("failed to join channel"),TS.generic_dialog.alert(TS.interop.i18n.t("Oops, something went wrong.","client")())));return}var s,l;if(t.channel&&(l=TS.interop.channels.upsertChannel(t.channel),s=t.channel.id),!s){TS.error("no channel_id?!!");return}if(TS.model.requested_channel_joins[s]&&delete TS.model.requested_channel_joins[s],!l){TS.error("no channel?!!");return}n.request_in_background||!TS.interop.channels.getNeedsCreatedMessageState(l.name)&&!l.never_needs_joined_msg&&(l.needs_joined_message=!0)},legacyAlertSetTopicError:function(o){var t=_.get(o,"data.error"),n=TS.interop.i18n.t("Oooops!","channels")(),s=TS.interop.rules.channels.getChannelTopicError(t);TS.generic_dialog.alert(s,n)}})})()},966888:()=>{(function(){TS.registerModule("click",{onStart:function(){n(),t()},addHandler:function(e,i,u){_.isFunction(e)&&(u=i,i=e,e=null),o.push({selector:e,fn:i,prevent_on_drag:u||!1})},test:function(){return{addAll:t,setupBinding:n,handlers:function(){return o},resetHandlers:function(){o=[]},unbind:function(){$("body").off("click.ts_dot_click"),$("body").off("mousedown.ts_dot_click_mousedown")}}}});var o=[],t=d(function(){TS.click.addHandler(".inline_attachment.clickable, .inline_attachment.clickable + .reply_broadcast_rule",function(e,i){var u=["a",".media_caret",".msg_inline_video_buttons_div"].join(",");if(!$(e.target).closest(u).length){var f;i.is(".reply_broadcast")||i.closest(".reply_broadcast_rule").length?f=i.closest(".message_body").find('[data-action="open_conversation"]'):f=i.find(".attachment_from_url_link"),f[0]&&f[0].click()}},!0)},"_addAll"),n=d(function(){var e={};$("body").on("mousedown.ts_dot_click_mousedown",function(i){e.x=i.clientX,e.y=i.clientY}),$("body").on("click.ts_dot_click",function(i){if(!i.isDefaultPrevented()){var u=$(i.target);if(!(u.parents("[data-reactroot]").length||u.parents(".ReactModalPortal").length)){for(var f=s(i),S,p,h=0;h<o.length;h+=1)if(S=o[h],p=null,!(S.prevent_on_drag&&(i.clientX!=e.x||i.clientY!=e.y))){if(S.selector){if(p=u.closest(S.selector),!p.length)continue;S.fn(i,p,f),i.isDefaultPrevented()&&TS.has_pri[l]&&TS.log(l,`click on ${S.selector}`)}else S.fn(i,f);if(i.isDefaultPrevented())return}}}})},"_setupBinding"),s=d(function(e){var i=$(e.target);if(i.closest("#member_stars_list").length)return"starred_items";if(i.closest("#member_mentions").length)return"mentions";if(i.closest("#file_list").length)return"file_list";if(i.closest("#file_preview_scroller").length)return"file_preview";if(i.closest("#member_preview_scroller").length)return"member_preview";if(i.closest("#convo_scroller").length)return"conversation";if(i.closest("#groups_tab").length)return"groups";if(i.closest("#threads_msgs_scroller_div").length)return"threads";if(i.closest("#channel_page_scroller").length){var u=TS.shared.legacyGetActiveModelOb(),f="channel_page";return u.is_group&&!u.is_mpim?f="group_page":(u.is_im||u.is_mpim)&&(f="im_page"),f}return null},"_getPreviewOrigin"),l=2003})()},198398:()=>{(function(){TS.registerModule("compression",{compress:function(i,u,f,S){var p=Date.now();if(f){var h=LZString.compress(u),c=Date.now()-p;return TS.has_pri[e]&&TS.log(e,`${i} took ${c}ms to _compress immediately str.length: ${u.length}`),S({k:i,str:h})}s(i,u,function(v,b){var w=Date.now()-p;TS.has_pri[e]&&TS.log(e,`${i} took ${w}ms for the compression worker to callback (${b}ms spent within the worker) result.length: ${v.length}`),S({k:i,str:v})})},terminate:function(){o&&o.terminate(),o=null}});var o=null,t=0,n={},s=d(function(i,u,f){o||l(),t+=1;var S=`job_key${t}`;n[S]=function(p,h){f(p,h),delete n[S]},o.postMessage({request:"compress",input:u,job_key:S,k:i})},"_doCompressionJob"),l=d(function(){if(o){TS.error("_makeWorker but there is a _worker");return}var i=_.get(TS,"boot_data.vvv_paths.lz_string","/js/libs/lz-string-1.4.4.js"),u=TS.environment.is_dev;(TS.qs_args.local_assets||u)&&i.indexOf("http")!==0&&(i=`${location.protocol}//${location.host}${i}`),o=TS.utility.makeWebWorker(`function() {			self.importScripts('${i}');			self.onmessage = function(e) {				var start = Date.now();				var result;				if (e.data.request === 'compress') {					result = LZString.compress(e.data.input)				}				var elapsed = Date.now() - start;				postMessage({					request: e.data.request,					result: result,					job_key: e.data.job_key,					k: e.data.k,					elapsed: elapsed				});			}		}`,function(f){var S=n[f.data.job_key];if(!S){TS.error(`e.data.job_key:${f.data.job_key} had no record in _callbacks??`);return}S(f.data.result,f.data.elapsed)})},"_makeWorker"),e=488})()},527845:()=>{(function(){TS.registerModule("enterprise",{})})()},241875:()=>{(function(){TS.registerModule("enterprise.workspaces",{onStart:function(){},showRequestDialog:function(){let{displayModernToast:o=_.noop}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var t="#generic_dialog",n=".dialog_go",s="enterprise.teams.creationrequests.create",l="#input_ws_team_name",e="#textarea_ws_team_message",i,u;function f(){var S=$(t),p=S.find(n);return i&&u?(p.removeAttr("disabled"),!0):(p.attr("disabled",!0),!1)}d(f,"checkForm"),TS.generic_dialog.start({title:TS.interop.i18n.t("Request creation of a new workspace","enterprise_workspaces")(),body:TS.templates.ws_request_dialog(),show_cancel_button:!0,show_go_button:!0,go_button_text:TS.interop.i18n.t("Send Request","enterprise_workspaces")(),onGo:function(){var S=$(t),p=$(l),h=_.escape(p.val()),c=$(e),v=c.val(),b=S.find(n);b.addClass("ladda-button"),b.attr("data-style","expand-right");var w=Ladda.create(b[0]);w.start();var x={name:_.unescape(h),reason:v};return TS.boot_data.app==="client"&&(x.enterprise_token=TS.model.enterprise_api_token),TS.interop.api.callExpedited(s,x).then(function(){o({type:"success",teamName:h}),TS.generic_dialog.end(),TS.generic_dialog.cancel()}).catch(function(U){if(!U||!U.data){TS.error(`WTF: error, but no response or data on ${s}?`,U);return}var ee=U.data;o({type:"error",errorType:ee.error,teamName:h}),TS.error(`${s} failed with error: ${ee.error||"undefined"}`),w.stop()}),!1}}),$(l).on("keyup change",function(){i=TS.ui.validation.validate($(l)),f()}),$(e).on("keyup change",function(){u=TS.ui.validation.validate($(e)),f()}),$(l).focus(),$(t).find(n).attr("disabled",!0)}})})()},933773:()=>{(function(){TS.registerModule("files",{team_file_deleted_sig:new signals.Signal,team_file_deleted_success_sig:new signals.Signal,team_file_changed_sig:new signals.Signal,team_file_comment_added_sig:new signals.Signal,team_file_comment_deleted_sig:new signals.Signal,onStart:function(){TS.prefs.team_disable_file_editing_changed_sig.add(TS.files.upsertAndSignal)},isFileAuthorExternal:function(n){if(!_.isObject(n))return!1;var s=TS.interop.members.getMemberById(n.user);return _.isObject(s)?TS.interop.rules.members.isExternal(s):!1},getFileById:function(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return TS.redux.files.getFileById(n,s)},getThumbSrcForFile:function(n,s){try{n=t(n)}catch{return!1}const l={suppressAnimations:!TS.prefs.getPref("a11y_animations"),...s};return TS.interop.files.getThumbSrcForFile(n,l)},fileIsImage:function(n){try{n=t(n)}catch{return!1}return TS.interop.files.fileIsImage(n)},fileIsPDF:function(n){try{n=t(n)}catch{return!1}return n.filetype==="pdf"||n.converted_pdf},getFileCommentById:function(n,s){for(var l,e=0;e<n.comments.length;e+=1)if(l=n.comments[e],l.id==s)return l;return null},addCommentToFile:function(n,s){var l=TS.files.getFileCommentById(s,n.id);return l||(n._rxn_key=TS.rxns.getRxnKey("file_comment",n.id),TS.rxns.upsertRxnsFromDataAndUpdateUI(n._rxn_key,n.reactions),delete n.reactions,s.comments.push(n),TS.files.sortCommentsOnFile(s),TS.files.team_file_comment_added_sig.dispatch(s,n),n)},sortCommentsOnFile:function(n){function s(l,e){return l.timestamp>e.timestamp?1:l.timestamp<e.timestamp?-1:0}d(s,"compare"),n.comments.sort(s)},upsertFile:function(n,s){s=s||"no reason";var l="NOOP",e=[];if(Object.keys(n).length<2)return TS.error("upserting a bad file object! it has less than 2 properties",n,`with reason: ${s}`),{status:l,file:n,what_changed:e};n&&_.isString(n)&&TS.interop.utility.looksLikeFileId(n)?(TS.interop.files.markObjectsAsFresh([n]),n=TS.files.getFileById(n)):TS.interop.files.markObjectsAsFresh([n.id]);var i=TS.files.getFileById(n.id),u,f,S;if(n=TS.interop.files.processFileForUpserting(n),i){if(n._rxn_key=TS.rxns.getRxnKey("file",n.id),f=TS.rxns.getExistingRxnsByKey(n._rxn_key),f&&!n.reactions?TS.error(`file:${n.id} (${s}) has reactions in local model, but we are upserting an object that does NOT have reactions, which seems suspicious`):TS.rxns.upsertRxnsFromDataAndUpdateUI(n._rxn_key,n.reactions),delete n.reactions,n.comments)for(S=0;S<n.comments.length;S+=1)u=n.comments[S],u._rxn_key=TS.rxns.getRxnKey("file_comment",u.id),f=TS.rxns.getExistingRxnsByKey(u._rxn_key),f&&!u.reactions?TS.warn(`comment:${n.id} (${s}) has reactions in local model, but we are upserting an object that does NOT have reactions, which seems suspicious`):TS.rxns.upsertRxnsFromDataAndUpdateUI(u._rxn_key,u.reactions),delete u.reactions;n.initial_comment&&(n.initial_comment._rxn_key=TS.rxns.getRxnKey("file_comment",n.initial_comment.id),f=TS.rxns.getExistingRxnsByKey(n.initial_comment._rxn_key),f&&!n.initial_comment.reactions?TS.warn(`initial_comment:${n.id} (${s}) has reactions in local model, but we are upserting an object that does NOT have reactions, which seems suspicious`):TS.rxns.upsertRxnsFromDataAndUpdateUI(n.initial_comment._rxn_key,n.initial_comment.reactions),delete n.initial_comment.reactions);for(var p in n)if(p==="channels"||p==="ims"||p==="groups"||p==="pinned_to"||p==="to"||p==="from"||p==="cc"||p==="attachments"){var h=!1,c=_.isArray(n[p])?n[p]:[],v=_.isArray(i[p])?i[p]:[];p==="to"||p==="from"||p==="cc"||p==="attachments"?v.length!=c.length&&(h=!0):v.join("")!=c.join("")&&(h=!0),h&&(l="CHANGED",e.push(p))}else p==="preview"?i[p]!==n[p]&&(l="CHANGED",e=e.concat([p,"content","content_html","content_highlight_html"])):p==="comments"?n[p]&&!TS.utility.areSimpleObjectsEqual(n[p],i[p],`file:${n.id} ${n.name}`)&&(l="CHANGED",e.push(p)):p==="content"?n[p]&&i[p]!=n[p]&&(l="CHANGED",e.push(p)):p==="editor"||p==="state"?n[p]!=i[p]&&(e.push(p),l="CHANGED"):p==="initial_comment"||p==="reactions"||(p==="channel_map"||p==="group_map"||p==="im_map"||p==="teams"||p==="teams_shared_with"||p==="users")&&!TS.utility.isScalar(n[p])||(p==="video"?n[p]&&!TS.utility.areSimpleObjectsEqual(n[p],i[p],`file:${n.id} ${n.name}`)&&(l="CHANGED",e.push(p)):p==="shares"?TS.utility.areSimpleObjectsEqual(i[p],n[p])||(l="CHANGED"):p==="pinned_info"?TS.utility.areSimpleObjectsEqual(i[p],n[p])||(l="CHANGED",e.push(p)):i[p]!=n[p]&&(n[p]&&!TS.utility.isScalar(n[p])?TS.warn(`${p} is not scalar! it needs to be handled by upsertFile specifically to test if it has changed! ${typeof n[p]}`):(typeof n[p]!="boolean"||!n[p]!=!i[p])&&(e.push(`${p} [${i[p]}] -> [${n[p]}]`),l="CHANGED")));i=n}else if(n&&_.isObject(n)){if(l="ADDED",n._rxn_key=TS.rxns.getRxnKey("file",n.id),TS.rxns.upsertRxnsFromDataAndUpdateUI(n._rxn_key,n.reactions),delete n.reactions,n.comments){for(S=0;S<n.comments.length;S+=1)u=n.comments[S],u._rxn_key=TS.rxns.getRxnKey("file_comment",u.id),TS.rxns.upsertRxnsFromDataAndUpdateUI(u._rxn_key,u.reactions),delete u.reactions;n.initial_comment&&(n.initial_comment._rxn_key=TS.rxns.getRxnKey("file_comment",n.initial_comment.id),TS.rxns.upsertRxnsFromDataAndUpdateUI(n.initial_comment._rxn_key,n.initial_comment.reactions),delete n.initial_comment.reactions)}i=n}return l==="CHANGED"&&_.includes(e,"comments")&&TS.utility.msgs.updateCommentReferences(i),l!=="NOOP"&&(_.isEmpty(i.comments)&&delete i.comments,TS.redux.dispatch(TS.interop.redux.models.files.addFile(i))),{status:l,file:i,what_changed:e}},upsertAndSignal:function(n,s){var l=TS.files.upsertFile(n,s);return l.status==="CHANGED"&&TS.files.team_file_changed_sig.dispatch(l.file),l},cancelCurrentUpload:function(){o&&o.abort()}});var o=null,t=d(function(n){var s=_.isString(n)?TS.files.getFileById(n):n;if(!_.isObject(s))throw new Error("Expected file or file ID.");return s},"_ensureFileObject")})()},296016:()=>{(function(){TS.registerModule("groups",{switched_sig:new signals.Signal,message_changed_sig:new signals.Signal})})()},318433:()=>{(function(){TS.registerModule("help",{max_title_chars:100})})()},501153:()=>{(function(){TS.registerModule("ims",{switched_sig:new signals.Signal,message_changed_sig:new signals.Signal,onStart:function(){TS.prefs.display_real_names_override_changed_sig.add(n),TS.prefs.team_display_real_names_changed_sig.add(n),TS.members.changed_profile_sig.add(t)},getDisplayNameOfUserForIm:function(l){return o(l)}});var o=d(function(l){if(l._display_name)return l._display_name;const e=TS.interop.members.getMemberById(l.user);if(!e)return l.name;const i=TS.interop.rules.members.getPrefCompliantMemberName(e);return i===l.user||i===e.id?l.name:(l._display_name=i,l._display_name)},"_getDisplayNameCached"),t=d(function(l){var e=_.find(TS.model.ims,{user:l.id});e&&s(e)},"_memberRealNameChanged"),n=d(function(){TS.model.ims.forEach(s)},"_realNamePrefChanged"),s=d(function(l){l._display_name=void 0},"_clearDisplayNameCache")})()},482561:()=>{(function(){TS.registerModule("members",{presence_changed_sig:new signals.Signal,user_color_changed_sig:new signals.Signal,changed_current_status_sig:new signals.Signal,changed_name_sig:new signals.Signal,changed_real_name_sig:new signals.Signal,changed_deleted_sig:new signals.Signal,changed_profile_sig:new signals.Signal,changed_tz_sig:new signals.Signal,changed_account_type_sig:new signals.Signal,changed_admin_perms_sig:new signals.Signal,changed_owner_perms_sig:new signals.Signal,changed_self_sig:new signals.Signal,lazily_added_sig:new signals.Signal,batch_upserted_sig:new signals.Signal,member_was_upserted_sig:new signals.Signal,changed_is_unknown_sig:new signals.Signal,legacy_is_in_bulk_upsert_mode:!1,onStart:function(){TS.channels.joined_sig.add(()=>{TS.members.invalidateMembersUserCanSeeArrayCaches()}),TS.channels.left_sig.add(()=>{TS.members.invalidateMembersUserCanSeeArrayCaches()})},legacyUpsertAndSignal:function(a){var g=TS.members.legacyUpsertMember(a);return T(g,a)},legacyUpsertMember:function(a){var g=TS.redux.members.hasMemberWithId(a.id)&&TS.interop.members.getRawMemberById(a.id),A="NOOP",j=[];if(a=TS.interop.members.processMemberForUpserting(a),g){TS.has_pri[R]&&TS.log(R,`updating existing member "${a.id}"`);var Q=x(g,a);if(A=Q.status,j=Q.what_changed,_.includes(j,"deleted")){var X=TS.redux.channels.getImByMemberId(a.id);X&&(X.is_archived=a.deleted)}}else a.id?(A="ADDED",_.includes(f,a.id)&&j.push("is_unknown"),U(a),TS.has_pri[R]&&TS.log(R,`adding member "${a.id}" color:${a.color} member_color:${a.member_color}`)):TS.error("bad error, no member.id");if(a.is_self&&a.deleted){TS.reload(null,"member.is_self && member.deleted");return}TS.members.legacy_is_in_bulk_upsert_mode||(TS.members.invalidateMembersUserCanSeeArrayCaches(),TS.members.invalidateActiveMembersArrayCaches()),TS.members.member_was_upserted_sig.dispatch(),TS.members.legacy_is_in_bulk_upsert_mode||(A!=="NOOP"&&(TS.interop.members.dangerouslyAddMember(a),TS.redux.dispatch(TS.interop.redux.features.presence.updatePresence({memberId:a.id,presence:a.presence||"away"}))),TS.interop.members.markObjectsAsFresh([a.id]),TS.interop.members.setCanMembersInteract([a]));var ne={status:A,member:a,what_changed:j};return TS.members.legacy_is_in_bulk_upsert_mode&&o.push(ne),ne},getActiveMembersWithSelfAndNotSlackbot:function(){return t.length||(t=S(t,{include_self:!0,include_slackbot:!1,include_bots:!0})),t},getMembersWithOptions:function(a){var g=TS.members.getMembersForUser(),A=_.filter(g,function(j){return j.is_stranger?!1:a.only_admins?j.is_admin&&!j.deleted:!(a.only_local_team&&!TS.interop.rules.members.isMemberOnTeam(j,TS.model.team.id)||!a.include_deleted&&j.deleted||!a.include_slackbot&&TS.interop.rules.members.isSlackbot(j)||!a.include_self&&j.is_self||!a.include_bots&&j.is_bot)});return A},getMembersForUser:function(){return u.length||(u=_.filter(TS.redux.members.getAllMembers(),function(a){return a.is_stranger!==!0&&!!a.name})),u},legacyGetPrefCompliantMemberNameLowerCase:function(a,g){if(!a)return"";var A=function(){var j=TS.interop.rules.members.getMemberRealNameLowerCase(a);return!TS.interop.members.shouldDisplayRealNames()&&TS.interop.rules.members.getMemberProfileFieldDisplayNameLowerCase(a)&&(j=TS.interop.rules.members.getMemberProfileFieldDisplayNameLowerCase(a)),j}();return g?_.escape(A):A},invalidateMembersUserCanSeeArrayCaches:function(){if(TS.model.user){var a=u.length;a&&(u.length=0,TS.members.invalidateActiveMembersArrayCaches())}},invalidateActiveMembersArrayCaches:function(){t.length=0,n.length=0,s.length=0,l.length=0,e.length=0,i.length=0},legacyEnsureMembersInDataArePresent:function(a,g){var A=TS.interop.utility.extractAllMemberIds(a);if(_.get(TS,"model.team.id")==="T02J3DPUE"&&!_.isEmpty(A)){var j=_.some(A,function(X){return X[0]==="U"});if(j){var Q={message:`Fetching U users on W team from source: ${g}`,stack:TS.console.getStackTrace()};$.post(TS.boot_data.beacon_error_url,{description:"fetch_u_on_w_team",error_json:JSON.stringify(Q),team:_.get(TS,"model.team.id","none"),user:TS.boot_data.user_id,version:TS.boot_data.version_ts})}}return TS.interop.members.ensureMembersArePresent(A)},fetchAndUpsertMembersWithQuery:function(a){return TS.interop.members.fetchAndUpsertMembersWithQuery({query:a}).then(g=>{let{members:A,next_marker:j}=g;return{objects:A,next_marker:j}})},legacyStartBatchUpsert:function(){return TS.members.legacy_is_in_bulk_upsert_mode?!1:(TS.members.legacy_is_in_bulk_upsert_mode=!0,!0)},legacyFinishBatchUpsert:function(){if(!TS.members.legacy_is_in_bulk_upsert_mode)return!1;TS.members.legacy_is_in_bulk_upsert_mode=!1,TS.members.invalidateMembersUserCanSeeArrayCaches(),TS.members.invalidateActiveMembersArrayCaches();var a=_.partition(o,function(j){return _.includes(j.what_changed,"is_unknown")}),g=a[0];TS.interop.members.dangerouslyBulkAddMembers(o.map(j=>j.member));var A=o.reduce((j,Q)=>{var X=Q.member;return X.presence&&(j[X.id]=j[X.presence]),j},{});return TS.redux.dispatch(TS.interop.redux.features.presence.bulkUpdatePresence(A)),g.length>0&&TS.members.changed_is_unknown_sig.dispatch({batch:_.map(g,"member")}),TS.members.batch_upserted_sig.dispatch(o),TS.interop.members.markObjectsAsFresh(_.map(o,"member.id")),TS.interop.members.setCanMembersInteract(o.map(j=>j.member)),o=[],!0},legacyAllocateTeamListMembers:function(a){var g,A=[],j=[],Q=[],X=[],ne=[],se=[];a.sort(function(Y,J){var B=Y._real_name_lc||Y._name_lc,F=J._real_name_lc||J._name_lc;return B>F?1:F>B?-1:0});for(var D=0;D<a.length;D+=1)g=a[D],g.deleted?g.is_bot?Q.push(g):j.push(g):g.is_ultra_restricted?se.push(g):g.is_restricted?ne.push(g):g.is_bot||TS.interop.rules.members.isSlackbot(g)?X.push(g):A.push(g);return{members:A,disabled_members:j,deleted_bots:Q,bots:X,restricted_members:ne,ultra_restricted_members:se}},promiseToSearchMembers:function(a){return Promise.resolve(a).then(function(g){return g?(g.query=g.query&&g.query.trim()||"",g.include_org=!!TS.boot_data.page_needs_enterprise&&!!g.include_org,g.org_team_ids=g.include_org&&Array.isArray(g.org_team_ids)?g.org_team_ids:[],g=h(g,TS.interop.searcher.isNewMemberSearch(g)),g._is_new||g.num_remaining>0?c(g):Promise.resolve(g)):Promise.reject(new Error("No search parameters provided"))})},legacySetMemberUnknown:function(a){f.push(a)},test:function(){var a={};return Object.defineProperty(a,"_accessible_user_ids_last_fetched_ts",{get:function(){return ee},set:function(g){ee=g}}),Object.defineProperty(a,"_processNewMemberForUpserting",{get:function(){return U},set:function(g){U=g}}),Object.defineProperty(a,"_processExistingMemberForUpserting",{get:function(){return x},set:function(g){x=g}}),Object.defineProperty(a,"_fillMembersWithOptions",{get:function(){return S},set:function(g){S=g}}),Object.defineProperty(a,"_members_for_user",{get:function(){return u},set:function(g){u=g}}),a}});var o=[],t=[],n=[],s=[],l=[],e=[],i=[],u=[],f=[],S=d(function(a,g){if(!_.isArray(a))throw new TypeError("members passed to _fillMembersWithOptions is not an array!");a.length=0;var A=TS.members.getMembersWithOptions(g);return _.each(A,function(j){a.push(j)}),a},"_fillMembersWithOptions"),p=d(function(a){var g=a?a.is_unknown:!1;return a&&a.is_unknown&&(a.is_unknown=!1),_.pull(f,a.id),g},"_maybeSetMemberKnown"),h=d(function(a,g){return a=a||{},a.hasOwnProperty("_searcher_p")&&g&&a._searcher_p.cancel(),(!a.hasOwnProperty("_cursor_mark")||g)&&(a._cursor_mark=""),a.hasOwnProperty("full_profile_filter")||(a.full_profile_filter=!0),a.hasOwnProperty("include_bots")||(a.include_bots=!0),a.hasOwnProperty("include_deleted")||(a.include_deleted=!1),a.hasOwnProperty("include_self")||(a.include_self=!1),a.hasOwnProperty("include_slackbot")||(a.include_slackbot=!0),a.hasOwnProperty("include_profile_only_users")||(a.include_profile_only_users=!1),a.hasOwnProperty("only_local_team")||(a.only_local_team=!1),a.hasOwnProperty("only_admins")||(a.only_admins=!1),(!a.hasOwnProperty("items")||g)&&(a.items=[]),a.hasOwnProperty("not_member_of")||(a.not_member_of=[]),a.hasOwnProperty("member_of")||(a.member_of=[]),(!a.hasOwnProperty("num_found")||g)&&(a.num_found=0),(!a.hasOwnProperty("num_remaining")||g)&&(a.num_remaining=0),(!a.hasOwnProperty("num_new")||g)&&(a.num_new=0),a.hasOwnProperty("max_api_results")||(a.max_api_results=100),g&&(a._last_query=a.query,a._last_include_org=a.include_org,a._last_org_team_ids=a.org_team_ids),a._is_new=!!g,a},"_readyMemberSearcher"),c=d(function(a){var g=d(function(){return b(a)},"promiseToSearch");return a._is_new?a._searcher_p=g():a._searcher_p=a._searcher_p.then(g),a._searcher_p},"_promiseToSearchMembers"),v=d(function(a){var g=[TS.utility.search.makeClause("is","user")];if(a._last_query){var A=a._last_query.split(/\s*,\s*|\s+/).map(function(D){return D.charAt("0")==="@"?D.substring(1):D}).filter(function(D){return!!D}).map(function(D){return D.length===1||!a.full_profile_filter?TS.utility.search.makeConjunction("OR",[TS.utility.search.makeClause("real_name",D),TS.utility.search.makeClause("display_name",D)]):TS.utility.search.makeClause("fuzzy_with_email",D)});g=g.concat(A)}if(a.not_member_of&&a.not_member_of.length){var j=a.not_member_of.map(function(D){return TS.utility.search.makeClause("not_member_of",D)});g.push(j.length>1?TS.utility.search.makeConjunction("OR",j):j[0])}if(a.member_of&&a.member_of.length){var Q=a.member_of.map(function(D){return TS.utility.search.makeClause("member_of",D)});g.push(Q.length>1?TS.utility.search.makeConjunction("OR",Q):Q[0])}if(a._last_include_org&&a._last_org_team_ids.length){var X=a._last_org_team_ids.map(function(D){return TS.utility.search.makeClause("belongs_to_team_id",D)});g.push(X.length>1?TS.utility.search.makeConjunction("OR",X):X[0])}var ne=g.length>1?TS.utility.search.makeConjunction("AND",g):g[0],se={query:ne,count:a.max_api_results,include_bots:a.include_bots,include_deleted:a.include_deleted,ignore_guest_accounts:a.ignore_guest_accounts,only_local_team:a.only_local_team,only_admins:a.only_admins,include_profile_only_users:a.include_profile_only_users,raw_query:a.query,solr:a.solr};return a._last_include_org&&(se.all_of_org=a._last_include_org),a._cursor_mark&&(se.cursor_mark=a._cursor_mark),a.determine_membership_for_channel&&(se.determine_membership_for_channel=a.determine_membership_for_channel),se},"_buildPromiseToSearchMembersArguments"),b=d(function(a){var g=v(a);return a.num_new=0,TS.utility.search.promiseToSearch(g).then(function(A){if(!A.data.items.length)return Promise.resolve(a);a.num_remaining||(a.num_remaining=A.data.num_found,a.num_found=A.data.num_found),a.num_remaining-=A.data.items.length,a._cursor_mark=A.data.next_cursor_mark;var j=A.data.items.map(function(Q){var X=TS.interop.members.getMemberById(Q.id);return X||(a._last_include_org&&Q.team_id!==TS.model.team.id&&(Q.is_primary_owner=!1,Q.is_owner=!1,Q.is_admin=!1),X=TS.members.legacyUpsertMember(Q).member),X}).filter(function(Q){return Q.is_self&&!a.include_self||TS.interop.rules.members.isSlackbot(Q)&&!a.include_slackbot?(a.num_found-=1,!1):a.limit_by_model_relevancy?TS.utility.members.isMemberRelevantToModel(Q,a.limit_by_model_relevancy):!0});return a.num_new=j.length,a.items.push.apply(a.items,j),Promise.resolve(a)})},"_promiseToSearchMembersWorker"),w=d(function(a){return _.isObject(a)?_.omitBy(a,function(g,A){return A.indexOf("image_")===0}):a},"_omitImagesFromProfile"),x=d(function(a,g){var A="NOOP",j=[];return Object.keys(g).forEach(function(Q){if(Q==="profile"){var X=w(a.profile),ne=w(g.profile);if(_.isObject(ne)){(X.status_text!==ne.status_text||X.status_emoji!==ne.status_emoji)&&(A="CHANGED",j.push("current_status"));var se=Object.keys(X).filter(function(F){return typeof ne[F]>"u"}).concat(["status_text","status_emoji"]);X=_.omit(X,se),ne=_.omit(ne,se),_.isEqual(X,ne)||(A="CHANGED",j.push(Q))}}else if(Q==="enterprise_user")if(a[Q])for(var D in g[Q])_.isEqual(a[Q][D],g[Q][D])||(A="CHANGED",j.push(Q));else A="CHANGED",j.push(Q);else if(Q==="id"){var Y=a.id!=g.id&&a.enterprise_user&&g.enterprise_user;if(Y){var J=a.enterprise_user.id===a.id,B=g.id!=g.enterprise_user.id;J&&B&&(A="CHANGED",j.push(Q))}}else Q==="teams"?(A="CHANGED",j.push(Q)):a[Q]!=g[Q]&&(Q==="is_admin"&&TS.has_pri[y]&&(TS.warn(y,`${Q}is changing from \`${a[Q]}\` to \`${g[Q]}\``),TS.console.trace(y)),g[Q]&&!TS.utility.isScalar(g[Q])?(a[Q]=g[Q],TS.warn(`${Q} is not scalar! it needs to be handled by upsertMember specifically to test if it has changed! ${typeof g[Q]}`)):(typeof g[Q]!="boolean"||!g[Q]!=!a[Q])&&(j.push(Q),A="CHANGED"))}),p(a)&&j.push("is_unknown"),{status:A,what_changed:j}},"_processExistingMemberForUpserting"),U=d(function(a){TS.members.user_color_changed_sig.dispatch(a)},"_processNewMemberForUpserting"),ee=0,R=4,y=1975,T=d(function(a,g){if(a.status==="ADDED")TS.members.lazily_added_sig.dispatch(a.member);else if(a.status==="CHANGED"){if(a.what_changed.indexOf("is_unknown")!==-1)return TS.members.changed_is_unknown_sig.dispatch(a.member),a;a.what_changed.indexOf("current_status")!==-1&&TS.members.changed_current_status_sig.dispatch(a.member),a.what_changed.indexOf("profile")!==-1&&TS.members.changed_profile_sig.dispatch(a.member),(a.what_changed.indexOf("is_restricted")!==-1||a.what_changed.indexOf("is_ultra_restricted")!==-1)&&TS.members.changed_account_type_sig.dispatch(a.member),a.what_changed.indexOf("real_name")!==-1&&TS.members.changed_real_name_sig.dispatch(a.member),(a.what_changed.indexOf("member_color")!==-1||a.what_changed.indexOf("color")!==-1)&&TS.members.user_color_changed_sig.dispatch(a.member),a.what_changed.indexOf("name")!==-1&&TS.members.changed_name_sig.dispatch(a.member),a.what_changed.indexOf("tz")!==-1&&TS.members.changed_tz_sig.dispatch(a.member),a.what_changed.indexOf("deleted")!==-1&&TS.members.changed_deleted_sig.dispatch(a.member),a.what_changed.indexOf("presence")!==-1&&TS.members.presence_changed_sig.dispatch(a.member),a.what_changed.indexOf("is_owner")!==-1&&TS.members.changed_owner_perms_sig.dispatch(a.member),a.what_changed.indexOf("is_admin")!==-1&&TS.members.changed_admin_perms_sig.dispatch(a.member),g.is_self&&TS.members.changed_self_sig.dispatch(a.member)}return a},"_signalUpsert")})()},933222:()=>{(function(){TS.registerModule("members.view",{team_filter_changed_sig:new signals.Signal,filter_timer:null,onStart:function(){var D=500;f=TS.utility.debounceWithPromise(T,D),S=TS.utility.debounceWithPromise(T,D),p=TS.utility.debounceWithPromise(T,D)},switchTabs:function(D){$(`#${D}_members_tab`).trigger("click")},filterTeam:function(D,Y,J,B){var F=v(J);return _.get(B,"full_profile_filter")||_.get(F,"full_profile_filter")?TS.team.ensureTeamProfileFields().then(function(){return c(F)?U(D,Y,J,F):(a(D,Y,J,B),Promise.resolve())}):(a(D,Y,J),Promise.resolve())},clearFilter:function(D,Y){var J=v(Y),B=$(D),F=B.find("input.member_filter"),M=B.find(".icon_close"),P=B.data("list-items-id"),C=$(P),O=C.find(".member_item");o="",TS.storage.storeFilterState(o),TS.members.view.filter_timer&&(window.clearTimeout(TS.members.view.filter_timer),TS.members.view.filter_timer=null),F.val(""),M.addClass("hidden"),c(J)?(x(Y),TS.members.view.filterTeam(o,D,Y,J)):($(".restricted_header, .bot_header, .ra_invite_prompt, .restricted_info").removeClass("hidden"),C.find(".no_results").addClass("hidden"),O.addClass("active"),t[Y]&&(t[Y].detachEvents(),delete t[Y]),C.find(".member_item.clone").remove(),C.find(".filter_header").remove(),TS.members.view.team_filter_changed_sig.dispatch("",TS.members.getMembersForUser().length))}});var o="",t={},n={},s={},l={},e={members:{},restricted:{},deleted:{}},i=100,u=116,f,S,p,h=d(function(){return _.get(TS,"web.admin.view")==="list"&&TS.boot_data.page_needs_enterprise?!1:TS.boot_data.page_needs_enterprise},"_includeOrg"),c=d(function(D){if(TS.boot_data.page_needs_enterprise&&D&&D.is_long_list_view||_.get(TS,"web.admin.view")==="list")return!0},"_useSolrSearch"),v=d(function(D){var Y=s[D];if(!Y){TS.error("Missing arguments for a bound filter");return}return _.isFunction(Y)&&(Y=Y()||{}),Y.include_org=h(),Y},"_getFilterArgumentsByScrollerId"),b=d(function(D){var Y=$(D).find(".ts_icon_search");if(!Y.next().is(`${D}_spinner`)){var J=TS.templates.loading_indicator({id:`${D.substring(1)}_spinner`});Y.after(J),Y.addClass("hidden")}},"_startSpinner"),w=d(function(D){$(D).find(".ts_icon_search").removeClass("hidden"),$(`${D}_spinner`).remove()},"_stopSpinner"),x=d(function(){e.filter_p&&e.filter_p.cancel(),e.filtered_items&&(e.filtered_items={}),e.filter_last_query=null,e.filter_last_include_org=null,e.members.filter_cursor_mark="",e.members.filter_num_remaining=0,e.members.filter_num_found=0,e.members.filter_scroll_mark=0,e.restricted.filter_cursor_mark="",e.restricted.filter_num_remaining=0,e.restricted.filter_num_found=0,e.restricted.filter_scroll_mark=0,e.deleted.filter_cursor_mark="",e.deleted.filter_num_remaining=0,e.deleted.filter_num_found=0,e.deleted.filter_scroll_mark=0,TS.web&&$(window).off("scroll.filter").scrollTop(0)},"_cleanUpPromiseToFilterTeam"),U=d(function(D,Y,J,B){var F=D.trim();o=F.toLocaleLowerCase(),TS.storage.storeFilterState(o);var M=e.filter_last_query!==o||e.filter_last_include_org!==B.include_org||e.filter_last_sort!==B.sort||e.filter_last_sort_dir!==B.sort_dir;M&&(x(J),e.filter_last_query=o,e.filter_last_include_org=B.include_org,B.sort&&(e.filter_last_sort=B.sort),B.sort_dir&&(e.filter_last_sort_dir=B.sort_dir)),b(Y);var P=d(function(){return Promise.resolve().then(function(){return ee(e,M,o,B)}).then(function(C){return w(Y),R(C,e,M,o,F,Y,J,B)}).finally(function(){TS.utility.rAF(function(){})})},"promiseToFilter");return M?e.filter_p=P():e.filter_p=e.filter_p.then(P),e.filter_p},"_promiseToFilterTeam"),ee=d(function(D,Y,J,B){var F=Y||TS.model.ui_state.tab_name==="active_members"&&D.members.filter_num_remaining,M=Y||TS.model.ui_state.tab_name==="restricted_members"&&D.restricted.filter_num_remaining,P=Y||TS.model.ui_state.tab_name==="disabled_members"&&D.members.filter_num_remaining;if(!F&&!M&&!P)return Promise.resolve(D.filtered_items);var C=_.assign({},B,{restricted:!1});D.members.filter_p=F?f(D.members,J,C):Promise.resolve([]);var O=_.assign({},B,{restricted:!0});D.restricted.filter_p=M?S(D.restricted,J,O):Promise.resolve([]);var z=_.assign({},B,{include_deleted:2,include_restricted_and_full_members:!0});return D.deleted.filter_p=P?p(D.deleted,J,z):Promise.resolve([]),Promise.join(D.members.filter_p,D.restricted.filter_p,D.deleted.filter_p,function(K,V,q){var W=(B.sort?X:TS.members.legacyAllocateTeamListMembers)(K.concat(V,q));return W.members=_.uniqBy(W.members,function(te){return te.id}),W.disabled_members=_.uniqBy(W.disabled_members,function(te){return te.id}),W.restricted_members=_.uniqBy(W.restricted_members,function(te){return te.id}),W.ultra_restricted_members=_.uniqBy(W.ultra_restricted_members,function(te){return te.id}),Y?D.filtered_items=W:(D.filtered_items.members.push.apply(D.filtered_items.members,W.members),D.filtered_items.disabled_members.push.apply(D.filtered_items.disabled_members,W.disabled_members),D.filtered_items.deleted_bots.push.apply(D.filtered_items.deleted_bots,W.deleted_bots),D.filtered_items.bots.push.apply(D.filtered_items.bots,W.bots),D.filtered_items.restricted_members.push.apply(D.filtered_items.restricted_members,W.restricted_members),D.filtered_items.ultra_restricted_members.push.apply(D.filtered_items.ultra_restricted_members,W.ultra_restricted_members)),se([...D.filtered_items.restricted_members,...D.filtered_items.ultra_restricted_members]).then(()=>Promise.resolve(D.filtered_items))})},"_promiseToSearchAndCombineResults"),R=d(function(D,Y,J,B,F,M,P,C){if(D){var O=!1;TS.model.ui_state.tab_name==="disabled_members"&&(e.deleted.filter_num_found||0)===0&&(O=!0),TS.model.ui_state.tab_name==="restricted_members"&&(e.restricted.filter_num_found||0)===0&&(O=!0);var z=TS.model.user_groups.filter(function(le){return!le.date_delete});TS.model.ui_state.tab_name==="user_groups"&&z.length===0&&(O=!0),O&&(TS.model.ui_state.tab_name="active_members",TS.storage.storeUIState(TS.model.ui_state),$("#active_members_tab").trigger("click"));var K=$("#active_members_list");K.length&&(K.longListView("setItems",l.active_members_list_items),J&&K.longListView("scrollToTop"));var V=$("#restricted_members_list");V.length&&(V.longListView("setItems",l.restricted_members_list_items),J&&V.longListView("scrollToTop"));var q=$("#deleted_members_list");q.length&&(q.longListView("setItems",l.deleted_members_list_items),J&&q.longListView("scrollToTop"));var W=D.members.concat(D.bots),te=D.restricted_members.concat(D.ultra_restricted_members),_e=D.disabled_members.concat(D.deleted_bots),ue=[{name:"active",label:TS.interop.i18n.t("full members","members_view")(),matches:W},{name:"restricted",label:TS.interop.i18n.t("multi-channel guests","members_view")(),matches:te},{name:"disabled",label:TS.interop.i18n.t("deactivated accounts","members_view")(),matches:_e}];if(ue.forEach(function(le){var me=$(`#${le.name}_no_results`);function N(){var m={query:F,tab:le,active_matches:W,show_active_matches:le.name!=="active"&&W.length>0,restricted_matches:te,show_restricted_matches:le.name!=="restricted"&&te.length>0,disabled_matches:_e,show_disabled_matches:le.name!=="disabled"&&_e.length>0},E=TS.templates.team_list_no_results(m);me.removeClass("hidden").html(E),me.find(".clear_members_filter").one("click",function(){TS.members.view.clearFilter(M,P)})}d(N,"noMatchesCase"),le.matches.length>0||!B?me.addClass("hidden").empty():N()}),J){P==="#team_list_scroller"&&TS.web&&$(window).off("scroll.filter").on("scroll.filter",_.throttle(function(){var le=0,me=0,N=0,m=null;TS.model.ui_state.tab_name==="active_members"&&(le=_.parseInt($("#active_members_list > .list_items").css("height")),me=_.reject(l.active_members_list_items,{is_divider:!0}).length,N=Y.members.filter_num_remaining,m=Y.members.filter_p),TS.model.ui_state.tab_name==="restricted_members"&&(le=_.parseInt($("#restricted_members_list > .list_items").css("height")),me=_.reject(l.restricted_members_list_items,{is_divider:!0}).length,N=Y.restricted.filter_num_remaining,m=Y.restricted.filter_p),TS.model.ui_state.tab_name==="disabled_members"&&(le=_.parseInt($("#disabled_members_list > .list_items").css("height")),me=_.reject(l.deleted_members_list_items,{is_divider:!0}).length,N=Y.deleted.filter_num_remaining,m=e.deleted.filter_p);var E=.9*Math.min(me,i);le=_.isNaN(le)?0:le,le-=E*u,le&&N&&$(this).scrollTop()>le&&m&&m.isResolved()&&U(B,M,P,C)},50,{leading:!0}));var oe=(Y.members.filter_num_found||0)+(Y.restricted.filter_num_found||0)+(Y.deleted.filter_num_found||0);TS.members.view.team_filter_changed_sig.dispatch(F,oe)}}},"_displayPromiseToSearchResults"),y=d(function(D,Y,J){var B=[];if(Y&&(B=Y.split(/\s*,\s*|\s+/).map(function(O){return O.charAt("0")==="@"?O.substring(1):O}).filter(function(O){return!!O}).map(function(O){if(O.length===1||!J.full_profile_filter){var z=TS.utility.search.makeClause("real_name",O),K=TS.utility.search.makeClause("display_name",O),V=TS.utility.search.makeConjunction("OR",[z,K]);return V}return TS.utility.search.makeClause("fuzzy_with_email",O)})),B.push(TS.utility.search.makeClause("is","user")),J.restricted){var F=TS.utility.search.makeClause("level","restricted"),M=TS.utility.search.makeClause("level","ultra_restricted");B.push(TS.utility.search.makeConjunction("OR",[F,M]))}var P=B.length>1?TS.utility.search.makeConjunction("AND",B):B[0],C={query:P,count:i,include_bots:J.include_bots,exclude_slackbot:J.exclude_slackbot,include_deleted:J.include_deleted};return J.sort&&(C.sort=J.sort),J.sort_dir&&(C.sort_dir=J.sort_dir),J.include_org&&(C.all_of_org=J.include_org),D.filter_cursor_mark&&(C.cursor_mark=D.filter_cursor_mark),J.endpoint&&(C.endpoint=J.endpoint),TS.web&&(C.solr=!0),C},"_buildPromiseToSearchArguments"),T=d(function(D,Y,J){var B=y(D,Y,J);return B.raw_query=Y,TS.utility.search.promiseToSearch(B).then(function(F){if(D.filter_num_remaining||(D.filter_num_remaining=F.data.num_found,D.filter_num_found=F.data.num_found),D.filter_num_remaining-=F.data.items.length,D.filter_cursor_mark=F.data.next_cursor_mark,!F.data.items.length)return Promise.resolve([]);var M=F.data.items.map(function(P){var C=TS.interop.members.getMemberById(P.id);return(!C||!_.isEqual(C,P))&&(C=TS.members.legacyUpsertMember(P).member),C});return!J.restricted&&!J.include_restricted_and_full_members&&(M=M.filter(function(P){return!P.is_restricted})),M.length?Promise.resolve(M):D.filter_num_remaining?T(D,Y,J):Promise.resolve([])})},"_promiseToSearch"),a=d(function(D,Y,J,B){var F=$(Y),M=D.trim();o=M.toLocaleLowerCase();var P=F.data("list-items-id"),C=$(P),O=C.find(".member_item:not(.clone)"),z=O.filter(".active"),K=C.find(".member_item.clone"),V=C.find(".filter_header"),q=!TS.web&&Y==="#team_filter",W={},te,_e,ue;TS.storage.storeFilterState(o);var oe=!1,le;!le&&!TS.web&&Y==="#team_filter"&&(le=$("#team_list_members")),le&&le.length&&le.addClass("hidden"),oe&&(te=O.parent(),_e=document.activeElement?$(document.activeElement):null,O.detach()),t[J]&&(t[J].detachEvents(),delete t[J]),K.remove(),V.remove(),z.removeClass("active"),C.find(".no_results").addClass("hidden"),oe&&(te.append(O),_e&&_e.focus());var me,N,m=[],E=[],I=[];N=TS.members.getMembersForUser(),$(".restricted_header, .bot_header, .ra_invite_prompt, .restricted_info").toggleClass("hidden",!!o),$.each(O,function(de,ce){var ge;ce=$(ce),ge=ce.data("member-id"),W[ge]=ce});var H=ne(N,o,B.full_profile_filter),ie=Object.keys(H);if(ie.length>0){if(Q(H,ie,W,I,E,m,q?J:""),J){var re=$(J);re.trigger("resize"),TS.ui.utility.updateClosestMonkeyScroller(re)}}else Y==="#file_member_filter"&&(C.find(".query").text(M),C.find(".no_results").removeClass("hidden"));Y==="#team_filter"&&(me=[{name:"active",label:TS.interop.i18n.t("full members","members_view")(),matches:m},{name:"restricted",label:TS.interop.i18n.t("multi-channel guests","members_view")(),matches:E},{name:"disabled",label:TS.interop.i18n.t("deactivated accounts","members_view")(),matches:I}],me.forEach(function(de){var ce=$(`#${de.name}_no_results`);function ge(){var ye={query:M,tab:de,active_matches:m,show_active_matches:de.name!=="active"&&m.length>0,restricted_matches:E,show_restricted_matches:de.name!=="restricted"&&E.length>0,disabled_matches:I,show_disabled_matches:TS.web&&de.name!=="disabled"&&I.length>0},Te=TS.templates.team_list_no_results(ye);ce.removeClass("hidden").html(Te),ce.find(".clear_members_filter").on("click",function(){TS.members.view.clearFilter(Y,J)})}if(d(ge,"noMatchesCase"),de.matches.length>0){ce.addClass("hidden").empty();return}ge()})),ue=m.concat(E,I),le&&le.length&&le.removeClass("hidden"),TS.ui.utility.updateClosestMonkeyScroller($(J)),TS.members.view.team_filter_changed_sig.dispatch(M,ue.length)},"_filterTeam"),g=d(function(D){return n[D]||D},"_getHeaderLabelForMatchKey"),A=d(function(D,Y){var J=document.createElement("div"),B=document.createElement("strong");return J.classList.add("filter_header"),B.appendChild(document.createTextNode(D)),Y.length&&B.appendChild(document.createTextNode(": ")),J.appendChild(B),Y.forEach(function(F,M){J.appendChild(F),M<Y.length-1&&J.appendChild(document.createTextNode(", "))}),J},"_getFilterHeader"),j=d(function(D,Y){var J=document.createElement("span"),B=document.createElement("strong"),F=D.split(Y);return B.appendChild(document.createTextNode(Y)),J.appendChild(document.createTextNode(F.shift())),J.appendChild(B),J.appendChild(document.createTextNode(F.join(Y))),J},"_getHighlightedValue"),Q=d(function(D,Y,J,B,F,M,P){var C=$(P),O=document.createDocumentFragment(),z=document.createDocumentFragment(),K=document.createDocumentFragment(),V,q,W;if(Y.sort(function(_e,ue){return TS.interop.i18n.sorter(n[_e],n[ue])}).forEach(function(_e){var ue=document.createDocumentFragment(),oe=document.createDocumentFragment(),le=document.createDocumentFragment(),me=[],N=[],m=[],E={},I={},H={};D[_e].forEach(function(ie){var re=ie.member,de,ce=!1;re&&re.id&&(de=J[re.id],de&&(_e==="name"&&!ce?de.addClass("active"):re.deleted?(V||(V=de.parent()),ie.value&&!E[ie.value]&&(E[ie.value]=me.push(j(ie.value,ie.match))),ue.appendChild(de.clone().addClass("active clone").get(0))):re.is_restricted?(q||(q=de.parent()),ie.value&&!I[ie.value]&&(I[ie.value]=N.push(j(ie.value,ie.match))),oe.appendChild(de.clone().addClass("active clone").get(0))):(W||(W=de.parent()),ie.value&&!H[ie.value]&&(H[ie.value]=m.push(j(ie.value,ie.match))),le.appendChild(de.clone().addClass("active clone").get(0)))),re.deleted?B.push(re):re.is_restricted?F.push(re):M.push(re))}),ue.childNodes&&ue.childNodes.length&&(O.appendChild(A(g(_e),me)),O.appendChild(ue)),oe.childNodes&&oe.childNodes.length&&(z.appendChild(A(g(_e),N)),z.appendChild(oe)),le.childNodes&&le.childNodes.length&&(K.appendChild(A(g(_e),m)),K.appendChild(le)),ue=null,oe=null,le=null,me=null,N=null,m=null,E=null,I=null,H=null}),V&&V.append(O),q&&q.append(z),W&&W.append(K),C.length){var te=C.find(".member_item.clone");t[P]=te.find(".lazy").lazyload({container:C,ignore_when_hidden_element:C,all_images_same_size:!0}),te.one("remove",function(){t[P]&&(t[P].detachEvents(),delete t[P])})}O=null,z=null,K=null,V=null,q=null,W=null},"_displayMatches"),X=d(function(D){return _.reduce(D,function(Y,J){return J.deleted?J.is_bot?Y.deleted_bots.push(J):Y.disabled_members.push(J):J.is_ultra_restricted?Y.ultra_restricted_members.push(J):J.is_restricted?Y.restricted_members.push(J):J.is_bot||TS.interop.rules.members.isSlackbot(J)?Y.bots.push(J):Y.members.push(J),Y},{members:[],disabled_members:[],deleted_bots:[],bots:[],restricted_members:[],ultra_restricted_members:[]})},"_legacyAllocateTeamListMembers"),ne=d(function(D,Y,J){var B=new RegExp(`^${TS.utility.regexpEscape(Y)}`,"i"),F=new RegExp(`(-|_|\\+|\\s|\\.|@)${TS.utility.regexpEscape(Y)}`,"i"),M={},P=J&&Y?TS.team.getVisibleTeamProfileFields():[];return n={title:"What I Do",name:"Name"},D.forEach(function(C){var O;O=C._real_name_lc&&(C._real_name_lc.match(B)||C._real_name_lc.match(F))||C.email&&(C.email.match(B)||C.email.match(F))||C.profile&&C.profile.email&&(C.profile.email.match(B)||C.profile.email.match(F))||C.profile&&C.profile.real_name_normalized&&(C.profile.real_name_normalized.match(B)||C.profile.real_name_normalized.match(F))||C.profile&&C.profile.real_name&&(C.profile.real_name.match(B)||C.profile.real_name.match(F))||C.profile&&C.profile.display_name_normalized&&(C.profile.display_name_normalized.match(B)||C.profile.display_name_normalized.match(F))||C.profile&&C.profile.preferred_name&&(C.profile.preferred_name.match(B)||C.profile.preferred_name.match(F)),O&&(M.name||(M.name=[]),M.name.push({member:C})),J&&Y&&(O=C.profile&&C.profile.title&&(C.profile.title.match(B)||C.profile.title.match(F)),O&&(M.title||(M.title=[]),M.title.push({member:C}))),P.length&&C.profile&&C.profile.fields&&P.forEach(function(z){var K=C.profile.fields[z.id];if(K){if(O=null,z.type==="user"){if(K.value){var V="";K.value.split(/\s*,\s*/).some(function(q){return V=TS.interop.rules.members.getPrefCompliantMemberNameById(q,!1),V.match(B)||V.match(F)}),O&&(M[z.id]||(M[z.id]=[]),M[z.id].push({member:C,value:V,match:O[0]}))}}else O=K.value&&(K.value.match(B)||K.value.match(F)),O?(M[z.id]||(M[z.id]=[]),M[z.id].push({member:C,value:K.value,match:O[0]})):(O=K.alt&&(K.alt.match(B)||K.alt.match(F)),O&&(M[z.id]||(M[z.id]=[]),M[z.id].push({member:C,value:K.alt,match:O[0]})));O&&!n[z.id]&&(n[z.id]=z.label)}})}),M},"_findMatchesInMemberList"),se=d(function(){return Promise.resolve()},"_maybeFetchGuestChannels")})()},39144:()=>{(function(){TS.registerModule("membership",{onStart:function(){var t=1/0;TS.members.changed_deleted_sig.add(o,this,t)}});var o=d(function(){TS.interop.memberCounts.markAllMemberCountsAsStale()},"_invalidateAllMemberCounts")})()},101139:()=>{(function(){TS.registerModule("menu.member",{member:null,onStart:function(){},startWithEnterpriseMemberHeader:function(t){var n=15;if(!TS.menu.isRedundantClick(t)&&!TS.model.menu_is_showing){TS.menu.buildIfNeeded(),TS.menu.clean();var s={enterprise_name:$("[data-enterprise-name]").val(),signout_url:TS.boot_data.signout_url};TS.menu.$menu_header.addClass("hidden").empty(),TS.menu.$menu_items.html(TS.templates.menu_enterprise_member_header(s)),TS.menu.$menu_items.on("click.menu","li",o),TS.kb_nav.setSubmitItemHandler(o),TS.menu.start(t,null,{menu_class:"member_menu"});var l=$("[data-header-menu-toggle]"),e=-TS.menu.$menu.outerWidth()+l.outerWidth(),i=l.outerHeight()+n;TS.menu.positionAt(l,e,i),t.preventDefault()}},end:function(){TS.menu.member.member=null,TS.menu.end(),TS.menu.clean()}});var o=d(function(t){var n=$(this).attr("id");n!=="sign_out"&&n!=="view_account"&&(t.preventDefault(),TS.warn(`not sure what to do with clicked element id:${n}`))},"_onEnterpriseMemberHeaderClick")})()},854501:()=>{(function(){TS.registerModule("menu",{$menu:null,$submenu:null,$submenu_origin:null,$submenu_parent:null,$menu_header:null,$menu_items:null,$menu_list_container:null,$menu_list:null,$menu_footer:null,menu_lazy_load:null,user_group:null,$target_element:null,$secondary_target_element:null,large_dom_trigger:500,menu_items_hidden:!0,has_submenu:!1,menu_closed_sig:new signals.Signal,onStart:function(){},buildIfNeeded:_.once(function(){TS.menu.$menu=$(TS.templates.menu());var s=TS.menu.$menu;if(TS.boot_data.app!=="mobile"&&TS.qs_args.new_scroll!="0"){if(s.appendTo($("body")),!TS.environment.supports_custom_scrollbar){var l=TS.qs_args.debug_scroll=="1";s.find("#menu_items_scroller").monkeyScroll({debug:l})}s.detach()}TS.menu.$menu_header=s.find("#menu_header"),TS.menu.$menu_body=s.find(".menu_body"),TS.menu.$menu_list_container=s.find("#menu_list_container"),TS.menu.$menu_list=s.find("#menu_list"),TS.menu.$menu_items=s.find("#menu_items"),TS.menu.$menu_footer=s.find("#menu_footer")}),startWithList:function(s,l,e){if(!(!l||!l.length)&&!TS.menu.isRedundantClick(s))if(e=e||{},TS.menu.buildIfNeeded(),TS.menu.clean(),TS.menu.$menu_header.addClass("hidden").empty(),TS.menu.$menu_items.html(l.html()),TS.menu.$menu.addClass(e.menu_class),(e.close_on_click||e.onClick)&&TS.menu.$menu_items.on("click.menu","li",function(u){typeof e.onClick=="function"&&e.onClick(u),e.close_on_click&&TS.menu.end()}),TS.menu.start(s,void 0,e),e.attach_to_target_at_full_width)TS.menu.$menu.css({width:"100%",top:"calc(100% + 3px)",left:"0"});else{var i=n(e.align_right);TS.menu.positionAt(TS.menu.$target_element,i.left,i.top)}},did_start_slack_menu_signal_listeners:!1,stopListeningForRebuildWorthiness:function(){TS.menu.did_start_slack_menu_signal_listeners=!1},startWithEditTeamProfileListActions:function(s,l,e){if(!TS.menu.isRedundantClick(s)&&!TS.model.menu_is_showing){TS.menu.buildIfNeeded();var i=$(s.target),u=TS.team.getTeamProfileFieldById(i.data("id")),f={id:u.id,hidden:!!(u&&u.is_hidden),is_scim:e.is_scim};TS.menu.clean(),TS.menu.$menu_header.addClass("hidden").empty(),TS.menu.$menu_items.html(TS.templates.admin_menu_edit_team_profile_list_action_items(f)),TS.menu.$menu_items.on("click.menu","li",l),TS.menu.start(s),TS.menu.positionAt(i.find('[data-action="edit_team_profile_list_menu"]'),-(TS.menu.$menu.width()+6),0),TS.menu.keepInBounds()}},positionAt:function(s,l,e){l=l||0,e=e||0;var i=s.offset(),u=i.left+l,f=i.top+e;TS.menu.$menu.css({top:f,left:u})},isRedundantClick:function(s){return!!(s&&TS.menu.last_e&&(s.target==TS.menu.last_e.target||s.currentTarget==TS.menu.last_e.currentTarget))},isLarge:function(){return TS.menu&&TS.menu.$menu&&TS.menu.$menu.find("li").length>TS.menu.large_dom_trigger},start:function(s,l,e){if(e=e||{},TS.menu.last_e=s,!t){var i=$(s.target).offset(),u=i.left+$(s.target).width()+10,f=i.top;l&&(u=s.pageX+10,f=s.pageY+10)}_.isFunction(e.needs_to_remain_open)&&(TS.menu.needs_to_remain_open=e.needs_to_remain_open),$(".tooltip").hide(),TS.tips.hideAll(),$(s.currentTarget).addClass("active"),TS.menu.$target_element=$(s.currentTarget),TS.model.menu_is_showing=!0;var S=TS.menu.$menu;e.onClose&&S.one("closed",e.onClose),e.menu_class&&S.addClass(e.menu_class);var p=TS.menu.isLarge();t||S.css({top:f,left:u});var h=S.find("#menu_items_scroller");h.scrollTop(0),e.attach_to_target_at_full_width?TS.menu.$target_element.after(S):S.appendTo($("body")),e.keep_menu_open_if_target_clicked_again&&TS.menu.$menu.addClass("keep_menu_open_if_target_clicked_again"),!p&&!t?(S.css("opacity",0),S.stop().transition({opacity:1},200)):S.css("opacity",1),S.find(".menu_close").on("click",TS.menu.end),e.ignore_bounds||TS.menu.keepInBounds(),TS.ui.utility.updateClosestMonkeyScroller(h,!0),TS.menu.menu_lazy_load&&TS.menu.menu_lazy_load.detachEvents&&TS.menu.menu_lazy_load.detachEvents(),TS.menu.menu_lazy_load=TS.menu.$menu_items.find(".lazy").lazyload({container:$("#menu_items_scroller"),all_images_same_size:!0,throttle:250}),e.ignore_bounds||$(window).bind("resize",TS.menu.keepInBounds),$(window.document).bind("keydown",TS.menu.onKeyDown),$("html").bind("mousedown touchstart",TS.menu.onMouseDown);var c=S.find(".menu_list"),v=c.length?c:S.find("#menu_items");TS.menu.has_submenu?TS.kb_nav.start(v,"li:not(.divider)",S,{onLeftKeyDownIfSubmenuExists:TS.menu.onLeftKeyDownIfSubmenuExists,onRightKeyDownIfSubmenuExists:TS.menu.onRightKeyDownIfSubmenuExists}):TS.kb_nav.start(v,"li:not(.divider)");var b=c.length?c.first().find("a, button").first():null;TS.ui&&TS.ui.a11y&&TS.ui.a11y.focusAndAddTabindex(b),t=!1,o=e.on_esc},clean:function(){TS.menu.$menu_footer.empty(),TS.menu.$menu_header.removeClass("hidden"),TS.menu.$menu.removeClass("no_min_width no_max_width profile_preview flex_menu search_filter_menu popover_menu no_icons team_menu member_menu file_menu all_unreads_sort_order_menu searchable_member_list_filter_menu selectable member_file_filter_menu app_card keep_menu_open_if_target_clicked_again member_file_filter_menu").css("max-height",""),TS.menu.$menu.removeAttr("data-qa"),TS.menu.$menu.find("#menu_items_scroller").css("max-height",""),TS.menu.$menu.find(".arrow, .arrow_shadow").remove(),TS.menu.$menu_items.off("mouseenter.section_header"),TS.menu.$menu.removeClass("narrow_menu"),TS.menu.$menu_body.off("mouseenter.section_header"),TS.menu.needs_to_remain_open=void 0,TS.menu.$menu.removeClass("date_picker"),TS.boot_data.page_needs_enterprise&&(TS.menu.$menu_list_container.html('<div id="menu_list" role="menu"></div>').removeClass("populated"),TS.menu.$menu_list=TS.menu.$menu.find("#menu_list"),TS.menu.$menu.off("keydown","#file_member_filter .member_filter")),TS.menu.$menu.removeAttr("data-model-ob-id"),TS.menu.$menu.removeAttr("data-thread-ts"),TS.menu.$menu.find(".member_item")&&(TS.menu.$menu.find(".member_item").remove(),TS.menu.$menu.find(".list_items").css("height",0)),o=null},end:function(){if(!(_.isFunction(TS.menu.needs_to_remain_open)&&TS.menu.needs_to_remain_open())){TS.menu.$submenu&&TS.menu.$submenu_parent&&TS.menu.$submenu_parent.submenu("destroy"),TS.menu.$menu.width(""),TS.model.menu_is_showing=!1,TS.menu.menu_items_hidden=!0,TS.menu.has_submenu=!1,TS.menu.$submenu_parent=null,TS.menu.submenu_template_args={},TS.menu.did_start_slack_menu_signal_listeners&&TS.menu.stopListeningForRebuildWorthiness();var s=TS.menu.$menu,l=d(function(){TS.model.menu_is_showing||(setTimeout(function(){TS.model.menu_is_showing||(TS.menu.last_e=null)},50),s.detach(),TS.menu.$menu_header.empty(),TS.menu.$menu_footer.empty(),TS.menu.$menu_items.empty(),TS.menu.$menu_items.removeClass("hidden"),TS.menu.$menu_body.empty(),TS.menu.clean())},"menu_end");!TS.menu.isLarge()&&!t?s.stop().transition({opacity:0},200,l):l(),s.trigger("closed"),TS.menu.$target_element&&(TS.menu.$target_element.removeClass("active"),TS.menu.$target_element=null),TS.menu.$secondary_target_element&&(TS.menu.$secondary_target_element.removeClass("active"),TS.menu.$secondary_target_element=null),TS.menu.user_group=null,TS.menu.$menu_header.unbind("click.menu"),TS.menu.$menu_items.off("click.menu"),TS.menu.$menu_body.off("click.menu"),$(window).unbind("resize",TS.menu.keepInBounds),$(window.document).unbind("keydown",TS.menu.onKeyDown),$("html").unbind("mousedown touchstart",TS.menu.onMouseDown),TS.members.view.team_filter_changed_sig.remove(TS.kb_nav.clearHighlightedItem),$(".file_list_item.active").removeClass("active"),TS.tips.unhideAll(),TS.menu.search_filter_is_showing=!1,$("#search_filter_menu_label").removeClass("active"),$("#mentions_filter_menu_label").removeClass("active"),$("#flex_menu_toggle").removeClass("menu_open"),$("#channel_actions_toggle").removeClass("active"),s.removeClass("narrow_menu"),TS.menu.menu_lazy_load&&TS.menu.menu_lazy_load.detachEvents&&(TS.menu.menu_lazy_load.detachEvents(),TS.menu.menu_lazy_load=null),TS.kb_nav.end(),TS.menu.menu_closed_sig.dispatch()}},onKeyDown:function(s){var l=TS.utility.keymap,e=s.which,i=s.metaKey||s.ctrlKey||s.altKey;e==l.esc?(s.stopPropagation(),s.preventDefault(),TS.menu.end(),o&&o()):!i&&!TS.utility.isArrowKey(e)&&e!=l.tab&&e!=l.enter&&e!=l.shift&&TS.kb_nav.clearHighlightedItem()},onLeftKeyDownIfSubmenuExists:function(){var s=!1;if(TS.menu.$submenu&&TS.menu.$submenu.hasClass("kb_active")){TS.menu.$submenu.removeClass("kb_active"),TS.kb_nav.end(),TS.kb_nav.highlightItemWithKey(TS.menu.$submenu_origin);var l=TS.menu.$menu.find(".menu_list"),e=l.length?l:TS.menu.$menu.find("#menu_items");TS.kb_nav.start(e,"li:not(.divider)",TS.menu.$menu,{onLeftKeyDownIfSubmenuExists:TS.menu.onLeftKeyDownIfSubmenuExists,onRightKeyDownIfSubmenuExists:TS.menu.onRightKeyDownIfSubmenuExists}),["member_current_status_item","switch_teams"].indexOf(TS.menu.$submenu_origin.attr("id"))===-1&&TS.menu.$submenu_origin.submenu("destroy"),s=!0}return s},onRightKeyDownIfSubmenuExists:function(){var s=!1;return TS.menu.$submenu&&(TS.menu.$submenu.hasClass("kb_active")?(TS.menu.$submenu.removeClass("kb_active"),TS.menu.end()):(TS.menu.$submenu.addClass("kb_active"),TS.kb_nav.end(),TS.kb_nav.highlightItemWithKey(TS.menu.$submenu.find("li:not(.divider)").first()),TS.kb_nav.start(TS.menu.$submenu.find("ul"),"li:not(.divider)",TS.menu.$submenu,{onLeftKeyDownIfSubmenuExists:TS.menu.onLeftKeyDownIfSubmenuExists,onRightKeyDownIfSubmenuExists:TS.menu.onRightKeyDownIfSubmenuExists})),s=!0),s},onMouseDown:function(s){var l=$(s.target);TS.menu.$menu&&TS.menu.$menu.hasClass("keep_menu_open_if_target_clicked_again")&&l.is(TS.menu.$target_element)||(l.closest("#menu, .submenu, .trap_menu_clicks").length===0||l.hasClass("popover_mask"))&&TS.menu.end()},keepInBounds:function(){window.requestAnimationFrame?TS.utility.rAF(TS.menu.keepInBoundsThrottled):TS.menu.keepInBoundsThrottled()},keepInBoundsThrottled:function(){var s=TS.menu.$menu,l=10,e=s.dimensions_rect(),i={top:0+l,right:$(window).width()-l,bottom:$(window).height()-(l+14),left:0+l};TS.utility.doesRectContainRect(i,e)||(e.left<i.left?s.css("left",i.left):e.right>i.right&&s.css("left",Math.max(i.left,i.right-e.width)),e.top<i.top?s.css("top",i.top):e.bottom>i.bottom&&s.css("top",Math.max(i.top,i.bottom-e.height+$(window).scrollTop())))}});var t=!1,n=d(function(s){var l=3,e=TS.menu.$target_element.outerHeight()+l,i=0;return s&&(i=TS.menu.$target_element.outerWidth()-TS.menu.$menu.outerWidth()),{left:i,top:e}},"_getOffsets");$.widget("TS.submenu",{_create:function(){this.element.data("has-submenu",!0);var s=TS.interop.i18n.t("submenu","menu_source")(),l=`<div class="menu submenu${this.options.help?" submenu_help":""}" data-origin-id="${this.element.attr("id")}" data-model-ob-id="${this.element.data("modelObId")}"><ul aria-hidden="true" aria-label="${s}">${this.options.items_html}</ul></div>`,e=-13,i=11,u=TS.menu.$menu.offset().left+TS.menu.$menu.width()+e,f=this.element.offset().top-i;if(this.$submenu=$(l),this.$submenu.appendTo("body"),TS.menu.$submenu=this.$submenu,TS.menu.$submenu_origin=this.element,u+this.$submenu.width()>window.innerWidth){var S=TS.menu.$menu.offset().left-e,p=window.innerWidth-u;S>p&&(u=TS.menu.$menu.offset().left-this.$submenu.width()-e)}if(f+this.$submenu.height()>window.innerHeight){var h=f,c=Math.abs(window.innerHeight-(f+this.$submenu.height()));h>c?f=window.innerHeight-this.$submenu.height()-i:f=i}this.$submenu.css({position:"absolute",left:`${u}px`,top:`${f}px`});var v=this.options.onclick;v&&this.$submenu.on("click",function(b){v.call(this,b)})},_destroy:function(){TS.menu.$submenu=null,TS.menu.$submenu_origin=null,this.options.ondestroy&&this.options.ondestroy(),this.$submenu.remove()}})})();var o},164088:()=>{(function(){TS.registerModule("mpims",{switched_sig:new signals.Signal,message_changed_sig:new signals.Signal,onStart:function(){TS.prefs.display_real_names_override_changed_sig.add(t),TS.prefs.team_display_real_names_changed_sig.add(t),TS.members.changed_profile_sig.add(o)},legacyGetMembersInDisplayOrder:function(e){if(e){var i=TS.model&&TS.model.user?TS.model.user.id:TS.boot_data.user_id;return _.chain(e.members).without(i).map(u=>TS.redux.members.getPotentiallyUnknownMemberById(u)).compact().value()}},legacyGetDisplayName:function(e,i,u,f,S){var p=_.isInteger(f);return e._display_name&&!i&&!u&&!p&&!S?e._display_name:e._display_name_truncated&&!i&&!u&&!S&&p?e._display_name_truncated:S?l(e):s(e,i)},getMemberCount:function(e){return e&&e.members?Math.min(Math.max((e.members.length||1)-1,2),9):null},checkMpimMatch:function(e,i,u){if(e){for(var f=!0,S=!0,p=TS.mpims.legacyGetMembersInDisplayOrder(e),h=0;h<i.length;h+=1){for(var c=!1,v=0;v<p.length;v+=1)(TS.utility.members.checkMemberMatch(p[v],i[h],f)||u&&TS.utility.members.checkMemberMatch(p[v],u[h],f))&&(c=!0);c||(S=!1)}return S}}});var o=d(function(e){TS.model.mpims.forEach(function(i){i.members.indexOf(e.id)!==-1&&n(i)})},"_memberRealNameChanged"),t=d(function(){TS.model.mpims.forEach(n)},"_realNamePrefChanged"),n=d(function(e){e._display_name=void 0},"_clearDisplayNameCache"),s=d(function(e){var i=TS.mpims.legacyGetMembersInDisplayOrder(e);if(_.find(i,"is_unknown"))return"";var f=_(i).map(function(p){var h=TS.interop.rules.members.getPrefCompliantMemberName(p);return h}).compact().value(),S=f.join(", ");return e._display_name=S,S},"_getDisplayTitle"),l=d(function(e){var i=TS.mpims.legacyGetMembersInDisplayOrder(e),u=i.map(function(S){return TS.interop.rules.members.getPrefCompliantMemberName(S)}),f=TS.interop.i18n.listify(u,{strong:!0}).join("");return f},"_getDmBadgeDisplayName")})()},907300:()=>{(function(){TS.registerModule("pins",{pins_fetched_sig:new signals.Signal,pinned_status_changed_sig:new signals.Signal,pinned_message_deleted_sig:new signals.Signal,onStart:function(){TS.files.team_file_comment_deleted_sig.add(l),TS.files.team_file_deleted_sig.add(e),TS.channels.left_sig.add(i)},onFetchPins:function(u,f){var S=u.data.items;TS.pins.upsertPinnedItems(S),f.pinned_items=S,f.pinned_items_count=S.length,f.has_pins=!!f.pinned_items_count,(!f.is_channel||f.is_member)&&(o[f.id]=!0),TS.pins.pins_fetched_sig.dispatch(f,S)},havePinsBeenFetched:function(u){return!!o[u.id]},upsertPinnedItems:function(u){_.isEmpty(u)||u.forEach(function(f){if(f.type==="message"&&f.message&&TS.interop.messages.shouldRenderFileThread(f.message)){const p=f.message;p.files&&p.files.forEach(function(h){TS.files.upsertFile(h,"upsertPinnedItems")})}if(f.type==="file"||f.type==="file_comment"){const p=f.file&&f.file.id;TS.files.upsertFile(f.file,"upsertPinnedItems"),n(p,f)}if(f.type==="file_comment"){var S=TS.files.getFileCommentById(f.file,f.comment.id);S||(S=TS.files.addCommentToFile(f.comment,f.file)),f.comment=S}})},legacyRemoveMsg:function(u,f){f.pinned_items&&(s(!1,{message:{ts:u}},"message",f),TS.pins.pinned_message_deleted_sig.dispatch(f))},updateCount:function(u,f){if(u){var S=u.pinned_items_count;u.pinned_items_count=TS.pins.havePinsBeenFetched(u)?_.get(u,"pinned_items.length"):f,S!==u.pinned_items_count&&(u.has_pins=!!u.pinned_items_count,TS.pins.pinned_status_changed_sig.dispatch(u))}},test:function(){return{fileDeleted:e,fileCommentDeleted:l,have_pins_been_fetched:o}}});var o={},t={},n=d(function(u,f){!f||!u||!TS.files.getFileById(u)||Object.defineProperty(f,"file",{enumerable:!0,configurable:!0,get:function(){return TS.files.getFileById(u)},set:function(){return!1}})},"_addFileToItem"),s=d(function(u,f,S,p,h){var c=!1;p.pinned_items||(p.pinned_items=[]);var v=-1;if(p.pinned_items.some(function(w,x){var U=!1;return S==="message"&&w.type==="message"?w.message.ts===f.message.ts&&(U=!0):S==="file"&&w.type==="file"?w.file.id===f.file.id&&(U=!0):S==="file_comment"&&w.type==="file_comment"&&w.comment.id===f.comment.id&&(U=!0),U&&(v=x),U}),TS.pins.havePinsBeenFetched(p))!u&&v!==-1?(p.pinned_items.splice(v,1),p.pinned_items_count=p.pinned_items.length,c=!0):u&&v===-1&&(p.pinned_items.unshift(f),p.pinned_items_count=p.pinned_items.length,c=!0);else{p.pinned_items_count=p.pinned_items_count||0;var b=_.parseInt(h,10);_.isNaN(b)?u?p.pinned_items_count+=1:u||(p.pinned_items_count=Math.max(p.pinned_items_count-1,0)):p.pinned_items_count=b,c=!0}return p.has_pins=!!p.pinned_items_count,c},"_updateModelPinnedItems"),l=d(function(u,f,S){!S||!S.pinned_to||S.pinned_to.forEach(function(p){var h=TS.redux.channels.getEntityById(p);if(h){var c=s(!1,{comment:S},"file_comment",h);c&&TS.pins.pinned_status_changed_sig.dispatch(h)}})},"_fileCommentDeleted"),e=d(function(u){u&&(u.pinned_to&&u.pinned_to.forEach(function(f){var S=TS.redux.channels.getEntityById(f);if(S){var p=s(!1,{file:u},"file",S);p&&TS.pins.pinned_status_changed_sig.dispatch(S)}}),u.comments&&u.comments.forEach(function(f){l(u,f.id,f)}))},"_fileDeleted"),i=d(function(u){var f=u||TS.shared.legacyGetActiveModelOb();f&&f.id&&(delete o[f.id],delete t[f.id])},"_handleLeftChannelOrGroup")})()},82830:()=>{(function(){TS.registerModule("prefs",{all_notifications_prefs_changed_sig:new signals.Signal,highlight_words_changed_sig:new signals.Signal,seen_welcome_2_changed_sig:new signals.Signal,emoji_mode_changed_sig:new signals.Signal,obey_inline_img_limit_changed_sig:new signals.Signal,messages_theme_changed_sig:new signals.Signal,expand_inline_imgs_changed_sig:new signals.Signal,expand_internal_inline_imgs_changed_sig:new signals.Signal,expand_non_media_attachments_changed_sig:new signals.Signal,webapp_spellcheck_changed_sig:new signals.Signal,color_names_in_list_changed_sig:new signals.Signal,search_exclude_channels_changed_sig:new signals.Signal,box_enabled_changed_sig:new signals.Signal,dropbox_enabled_changed_sig:new signals.Signal,read_changed_sig:new signals.Signal,push_changed_sig:new signals.Signal,time24_changed_sig:new signals.Signal,sidebar_behavior_changed_sig:new signals.Signal,dtop_notif_changed_sig:new signals.Signal,muted_channels_changed_sig:new signals.Signal,mac_ssb_bullet_changed_sig:new signals.Signal,team_hide_referers_changed_sig:new signals.Signal,sidebar_theme_changed_sig:new signals.Signal,no_invites_widget_in_sidebar_changed_sig:new signals.Signal,k_key_omnibox_auto_hide_count_changed_sig:new signals.Signal,display_real_names_override_changed_sig:new signals.Signal,team_display_real_names_changed_sig:new signals.Signal,team_perms_pref_changed_sig:new signals.Signal,privacy_policy_seen_changed_sig:new signals.Signal,two_factor_update_seen_changed_sig:new signals.Signal,compliance_export_start_changed_sig:new signals.Signal,team_disallow_public_file_urls_changed_sig:new signals.Signal,mentions_exclude_at_channels_changed_sig:new signals.Signal,mentions_exclude_at_user_groups_changed_sig:new signals.Signal,team_auth_mode_changed_sig:new signals.Signal,team_sso_auth_restrictions_changed_sig:new signals.Signal,preferred_skin_tone_changed_sig:new signals.Signal,separate_private_channels_changed_sig:new signals.Signal,separate_shared_channels_changed_sig:new signals.Signal,whats_new_read_changed_sig:new signals.Signal,team_dnd_enabled_changed_sig:new signals.Signal,team_dnd_start_hour_changed_sig:new signals.Signal,team_dnd_end_hour_changed_sig:new signals.Signal,team_invites_only_admins_changed_sig:new signals.Signal,tz_changed_sig:new signals.Signal,keyboard_changed_sig:new signals.Signal,msg_input_send_btn_changed_sig:new signals.Signal,msg_input_send_btn_auto_set_changed_sig:new signals.Signal,team_allow_calls_changed_sig:new signals.Signal,team_calling_app_name_changed_sig:new signals.Signal,team_calling_app_id_changed_sig:new signals.Signal,frecency_jumper_changed_sig:new signals.Signal,jumbomoji_changed_sig:new signals.Signal,hide_hex_swatch_changed_sig:new signals.Signal,channel_sort_changed_sig:new signals.Signal,show_memory_instrument_changed_sig:new signals.Signal,enable_unread_view_changed_sig:new signals.Signal,enable_react_emoji_picker_changed_sig:new signals.Signal,team_disable_file_editing_changed_sig:new signals.Signal,team_disable_file_deleting_changed_sig:new signals.Signal,team_display_email_addresses_changed_sig:new signals.Signal,email_alerts_changed_sig:new signals.Signal,team_uses_customized_custom_status_presets_changed_sig:new signals.Signal,team_loud_channel_mentions_limit_changed_sig:new signals.Signal,locale_changed_sig:new signals.Signal,enable_shared_channels_changed_sig:new signals.Signal,prefs_loaded:!1,setPrefs:function(t){var n=TS.prefs.getPref("muted_channels");TS.redux.prefs.setUserPrefs(t),TS.prefs.prefs_loaded=!0,TS.prefs.mergeFrecencyJumper(TS.ui.frecency.isEnterprise()?TS.prefs.getPref("frecency_ent_jumper"):TS.prefs.getPref("frecency_jumper")),TS.prefs.setLoudChannels(TS.prefs.getPref("loud_channels")),TS.prefs.setSuppressedChannels(TS.prefs.getPref("at_channel_suppressed_channels")),TS.prefs.setPushSuppressedChannels(TS.prefs.getPref("push_at_channel_suppressed_channels")),TS.prefs.setNeverChannels(TS.prefs.getPref("never_channels")),TS.prefs.setMutedChannels(TS.prefs.getPref("muted_channels"),n),TS.prefs.setLoudChannelsSet(TS.prefs.getPref("loud_channels_set")),TS.prefs.setPushLoudChannels(TS.prefs.getPref("push_loud_channels")),TS.prefs.setPushMentionChannels(TS.prefs.getPref("push_mention_channels")),TS.prefs.setPushLoudChannelsSet(TS.prefs.getPref("push_loud_channels_set")),TS.prefs.setSearchExcludeChannels(TS.prefs.getPref("search_exclude_channels")),TS.prefs.setChannelSort(TS.prefs.getPref("channel_sort")),TS.prefs.setSidebarThemeCustomValues(TS.utility.parseJSONOrElse(TS.prefs.getPref("sidebar_theme_custom_values"),void 0)),TS.prefs.setTheme(),TS.prefs.setPrefLocal("emoji_autocomplete_big",!1)},setChannelSort:function(t){TS.model.channel_sort=t},setHighlightWords:function(t){TS.prefs.setPrefLocal("highlight_words",t)},setSuppressedChannels:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("at_channel_suppressed_channels",t),TS.model.at_channel_suppressed_channels=[],t&&typeof t=="string"&&(TS.model.at_channel_suppressed_channels=TS.model.at_channel_suppressed_channels.concat(t.split(",")))},setPushSuppressedChannels:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("push_at_channel_suppressed_channels",t),TS.model.push_at_channel_suppressed_channels=[],t&&typeof t=="string"&&(TS.model.push_at_channel_suppressed_channels=TS.model.push_at_channel_suppressed_channels.concat(t.split(",")))},setLoudChannels:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("loud_channels",t),TS.model.loud_channels=[],t&&typeof t=="string"&&(TS.model.loud_channels=TS.model.loud_channels.concat(t.split(",")))},setNeverChannels:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("never_channels",t),TS.model.never_channels=[],t&&typeof t=="string"&&(TS.model.never_channels=TS.model.never_channels.concat(t.split(",")))},setMutedChannels:function(t,n){var s;if(n||(n=TS.prefs.getPref("muted_channels")),n!==t||!o)s=TS.prefs.getPref("muted_channels")&&typeof TS.prefs.getPref("muted_channels")=="string"?TS.prefs.getPref("muted_channels").split(","):[],TS.prefs.setPrefLocal("muted_channels",t);else return;o=!0;var l,e,i=[],u=[];t&&typeof t=="string"&&(i=i.concat(t.split(",")),u=_.difference(s,i));const f=!1;for(l=0;l<i.length;l+=1)e=TS.redux.channels.getEntityById(i[l],f),e&&e.unread_cnt&&(e._show_in_list_even_though_no_unreads=!0);return TS.model.channels.forEach(function(S){TS.notifs.isCorGMuted(S.id)||(S._show_in_list_even_though_no_unreads=!1)}),TS.model.groups.forEach(function(S){TS.notifs.isCorGMuted(S.id)||(S._show_in_list_even_though_no_unreads=!1)}),TS.redux.channels.updateMutedChannels(i),u},setLoudChannelsSet:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("loud_channels_set",t),TS.model.loud_channels_set=[],t&&typeof t=="string"&&(TS.model.loud_channels_set=TS.model.loud_channels_set.concat(t.split(",")))},setPushLoudChannels:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("push_loud_channels",t),TS.model.push_loud_channels=[],t&&typeof t=="string"&&(TS.model.push_loud_channels=TS.model.push_loud_channels.concat(t.split(",")))},setPushMentionChannels:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("push_mention_channels",t),TS.model.push_mention_channels=[],t&&typeof t=="string"&&(TS.model.push_mention_channels=TS.model.push_mention_channels.concat(t.split(",")))},setPushLoudChannelsSet:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("push_loud_channels_set",t),TS.model.push_loud_channels_set=[],t&&typeof t=="string"&&(TS.model.push_loud_channels_set=TS.model.push_loud_channels_set.concat(t.split(",")))},setSearchExcludeChannels:function(t){let{skipSettingLocalPref:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n||TS.prefs.setPrefLocal("search_exclude_channels",t),TS.model.search_exclude_channels=[],t&&typeof t=="string"&&(TS.model.search_exclude_channels=TS.model.search_exclude_channels.concat(t.split(",")))},mergeFrecencyJumper:function(t){return(!t||typeof t!="object")&&(t=TS.utility.parseJSONOrElse(t||null)||{}),TS.model.frecency_jumper=t,!0},setTheme:function(){TS.prefs.getPref("messages_theme")==="default"&&TS.prefs.setPrefLocal("messages_theme","light_with_avatars"),TS.prefs.setPrefLocal("theme","light"),TS.prefs.setPrefLocal("avatars",!0),TS.prefs.getPref("messages_theme")==="dense"?(TS.prefs.setPrefLocal("theme","dense"),TS.prefs.setPrefLocal("avatars",!1)):TS.prefs.getPref("messages_theme")==="light"?(TS.prefs.setPrefLocal("theme","light"),TS.prefs.setPrefLocal("avatars",!1)):TS.prefs.getPref("messages_theme")==="light_with_avatars"&&(TS.prefs.setPrefLocal("theme","light"),TS.prefs.setPrefLocal("avatars",!0))},legacyOnTeamPrefChanged:function(t){t.name==="msg_edit_window_mins"?TS.prefs.setTeamPrefLocal("msg_edit_window_mins",t.value):t.name==="allow_message_deletion"?TS.prefs.setTeamPrefLocal("allow_message_deletion",!!t.value):t.name==="hide_referers"?(TS.prefs.setTeamPrefLocal("hide_referers",!!t.value),TS.prefs.team_hide_referers_changed_sig.dispatch()):t.name==="display_real_names"?(TS.prefs.setTeamPrefLocal("display_real_names",!!t.value),TS.prefs.team_display_real_names_changed_sig.dispatch()):t.name==="display_email_addresses"?(TS.prefs.setTeamPrefLocal("display_email_addresses",!!t.value),TS.prefs.team_display_email_addresses_changed_sig.dispatch()):t.name.indexOf("who_can_")===0?TS.prefs.getTeamPref(t.name)!=t.value&&(TS.prefs.setTeamPrefLocal(t.name,t.value),TS.prefs.team_perms_pref_changed_sig.dispatch(t.name)):t.name==="compliance_export_start"?TS.prefs.getTeamPref("compliance_export_start")!=t.value&&(TS.prefs.setTeamPrefLocal("compliance_export_start",t.value),TS.prefs.compliance_export_start_changed_sig.dispatch()):t.name==="disallow_public_file_urls"?(TS.prefs.setTeamPrefLocal("disallow_public_file_urls",!!t.value),TS.prefs.team_disallow_public_file_urls_changed_sig.dispatch()):t.name==="auth_mode"?(TS.prefs.setTeamPrefLocal("auth_mode",t.value),TS.prefs.team_auth_mode_changed_sig.dispatch()):t.name==="sso_auth_restrictions"?(TS.prefs.setTeamPrefLocal("sso_auth_restrictions",t.value),TS.prefs.team_sso_auth_restrictions_changed_sig.dispatch()):t.name==="dnd_enabled"?(TS.prefs.setTeamPrefLocal("dnd_enabled",t.value),TS.prefs.team_dnd_enabled_changed_sig.dispatch()):t.name==="dnd_start_hour"?(TS.prefs.setTeamPrefLocal("dnd_start_hour",t.value),TS.prefs.team_dnd_start_hour_changed_sig.dispatch()):t.name==="dnd_end_hour"?(TS.prefs.setTeamPrefLocal("dnd_end_hour",t.value),TS.prefs.team_dnd_end_hour_changed_sig.dispatch()):t.name==="invites_only_admins"?(TS.prefs.setTeamPrefLocal("invites_only_admins",t.value),TS.prefs.team_invites_only_admins_changed_sig.dispatch()):t.name==="allow_calls"?(TS.prefs.setTeamPrefLocal("allow_calls",t.value),TS.prefs.team_allow_calls_changed_sig.dispatch()):t.name==="calling_app_id"?(TS.prefs.setTeamPrefLocal("calling_app_id",t.value),TS.prefs.team_calling_app_id_changed_sig.dispatch()):t.name==="calling_app_name"?(TS.prefs.setTeamPrefLocal("calling_app_name",t.value),TS.prefs.team_calling_app_name_changed_sig.dispatch()):t.name==="disable_file_editing"?(TS.prefs.setTeamPrefLocal("disable_file_editing",t.value),TS.prefs.team_disable_file_editing_changed_sig.dispatch()):t.name==="disable_file_deleting"?(TS.prefs.setTeamPrefLocal("disable_file_deleting",t.value),TS.prefs.team_disable_file_deleting_changed_sig.dispatch()):t.name==="uses_customized_custom_status_presets"?(TS.prefs.setTeamPrefLocal(t.name,t.value),TS.prefs.team_uses_customized_custom_status_presets_changed_sig.dispatch()):t.name==="loud_channel_mentions_limit"?(TS.prefs.setTeamPrefLocal(t.name,t.value),TS.prefs.team_loud_channel_mentions_limit_changed_sig.dispatch()):t.name==="enable_shared_channels"?(TS.prefs.setTeamPrefLocal(t.name,t.value),TS.prefs.enable_shared_channels_changed_sig.dispatch()):t.name==="dropbox_legacy_picker"?(TS.prefs.setTeamPrefLocal(t.name,t.value),TS.prefs.dropbox_enabled_changed_sig.dispatch()):TS.prefs.setTeamPrefLocal(t.name,t.value)},getPref:function(t){return TS.redux.prefs.getUserPref(t)},setPrefLocal:function(t,n){TS.redux.prefs.setUserPref(t,n)},getTeamPref:function(t){return TS.redux.prefs.getTeamPref(t)},setTeamPrefLocal:function(t,n){TS.redux.prefs.setTeamPref(t,n)},legacyOnPrefChanged:function(t){switch(t.name){case"all_notifications_prefs":TS.prefs.setPrefLocal("all_notifications_prefs",t.value),TS.prefs.all_notifications_prefs_changed_sig.dispatch(t.value);break;case"locale":TS.prefs.setPrefLocal("locale",t.value),TS.prefs.locale_changed_sig.dispatch(t.value);break;case"flannel_server_pool":TS.prefs.setPrefLocal("flannel_server_pool",t.value);break;case"color_names_in_list":TS.prefs.setPrefLocal("color_names_in_list",!!t.value),TS.prefs.color_names_in_list_changed_sig.dispatch();break;case"display_real_names_override":TS.prefs.setPrefLocal("display_real_names_override",t.value),TS.prefs.display_real_names_override_changed_sig.dispatch();break;case"growls_enabled":TS.prefs.setPrefLocal("growls_enabled",!!t.value),TS.prefs.dtop_notif_changed_sig.dispatch();break;case"sidebar_theme":TS.prefs.getPref("sidebar_theme")!==t.value&&(TS.prefs.setPrefLocal("sidebar_theme",t.value),TS.prefs.sidebar_theme_changed_sig.dispatch());break;case"sidebar_theme_custom_values":TS.prefs.getPref("sidebar_theme_custom_values")!==t.value&&(TS.prefs.setSidebarThemeCustomValues(JSON.parse(t.value)),TS.prefs.sidebar_theme_changed_sig.dispatch());break;case"expand_inline_imgs":TS.prefs.setPrefLocal("expand_inline_imgs",!!t.value),TS.prefs.expand_inline_imgs_changed_sig.dispatch();break;case"webapp_spellcheck":TS.prefs.setPrefLocal("webapp_spellcheck",!!t.value),TS.prefs.webapp_spellcheck_changed_sig.dispatch();break;case"expand_internal_inline_imgs":TS.prefs.setPrefLocal("expand_internal_inline_imgs",!!t.value),TS.prefs.expand_internal_inline_imgs_changed_sig.dispatch();break;case"expand_non_media_attachments":TS.prefs.setPrefLocal("expand_non_media_attachments",!!t.value),TS.prefs.expand_non_media_attachments_changed_sig.dispatch();break;case"messages_theme":TS.prefs.setPrefLocal("messages_theme",t.value),TS.prefs.setTheme(),TS.prefs.messages_theme_changed_sig.dispatch();break;case"highlight_words":TS.prefs.setHighlightWords(t.value),TS.prefs.highlight_words_changed_sig.dispatch();break;case"at_channel_suppressed_channels":TS.prefs.setSuppressedChannels(t.value),TS.prefs.dtop_notif_changed_sig.dispatch();break;case"push_at_channel_suppressed_channels":TS.prefs.setPushSuppressedChannels(t.value),TS.prefs.push_changed_sig.dispatch();break;case"loud_channels":TS.prefs.setLoudChannels(t.value);break;case"never_channels":TS.prefs.setNeverChannels(t.value);break;case"muted_channels":TS.boot_data.feature_tinyspeck&&TS.interop.console.info("PREFS",`muted_channels updated: ${t.value}`),TS.prefs.setMutedChannels(t.value),TS.prefs.muted_channels_changed_sig.dispatch();break;case"loud_channels_set":TS.prefs.setLoudChannelsSet(t.value),TS.prefs.dtop_notif_changed_sig.dispatch();break;case"push_loud_channels":TS.prefs.setPushLoudChannels(t.value);break;case"push_mention_channels":TS.prefs.setPushMentionChannels(t.value);break;case"push_loud_channels_set":TS.prefs.setPushLoudChannelsSet(t.value),TS.prefs.push_changed_sig.dispatch();break;case"emoji_use":break;case"user_colors":break;case"graphic_emoticons":TS.prefs.setPrefLocal("graphic_emoticons",t.value),TS.prefs.emoji_mode_changed_sig.dispatch();break;case"ss_emojis":TS.prefs.setPrefLocal("ss_emojis",t.value),TS.prefs.emoji_mode_changed_sig.dispatch();break;case"obey_inline_img_limit":TS.prefs.setPrefLocal("obey_inline_img_limit",t.value),TS.prefs.obey_inline_img_limit_changed_sig.dispatch();break;case"search_only_my_channels":case"search_only_current_team":case"search_exclude_bots":break;case"search_exclude_channels":TS.prefs.setSearchExcludeChannels(t.value),TS.prefs.search_exclude_channels_changed_sig.dispatch();break;case"has_uploaded":TS.prefs.setPrefLocal("has_uploaded",!!t.value);break;case"has_invited":TS.prefs.setPrefLocal("has_invited",!!t.value);break;case"has_created_channel":TS.prefs.setPrefLocal("has_created_channel",!!t.value);break;case"no_joined_overlays":TS.prefs.setPrefLocal("no_joined_overlays",!!t.value);break;case"no_created_overlays":TS.prefs.setPrefLocal("no_created_overlays",!!t.value);break;case"seen_welcome_2":TS.prefs.setPrefLocal("seen_welcome_2",!!t.value),TS.prefs.seen_welcome_2_changed_sig.dispatch();break;case"box_enabled":TS.prefs.setPrefLocal("box_enabled",!!t.value),TS.prefs.box_enabled_changed_sig.dispatch();break;case"dropbox_enabled":TS.prefs.setPrefLocal("dropbox_enabled",!!t.value),TS.prefs.dropbox_enabled_changed_sig.dispatch();break;case"mark_msgs_read_immediately":TS.prefs.getPref("mark_msgs_read_immediately")!==!!t.value&&(TS.prefs.setPrefLocal("mark_msgs_read_immediately",!!t.value),TS.prefs.read_changed_sig.dispatch());break;case"start_scroll_at_oldest":TS.prefs.getPref("start_scroll_at_oldest")!==!!t.value&&(TS.prefs.setPrefLocal("start_scroll_at_oldest",!!t.value),TS.prefs.read_changed_sig.dispatch());break;case"mac_ssb_bullet":TS.prefs.getPref("mac_ssb_bullet")!==!!t.value&&(TS.prefs.setPrefLocal("mac_ssb_bullet",!!t.value),TS.prefs.mac_ssb_bullet_changed_sig.dispatch());break;case"all_channels_loud":TS.prefs.getPref("all_channels_loud")!==!!t.value&&(TS.prefs.setPrefLocal("all_channels_loud",!!t.value),TS.prefs.dtop_notif_changed_sig.dispatch());break;case"push_everything":TS.prefs.getPref("push_everything")!==!!t.value&&(TS.prefs.setPrefLocal("push_everything",!!t.value),TS.prefs.push_changed_sig.dispatch());break;case"push_mention_alert":TS.prefs.getPref("push_mention_alert")!==!!t.value&&(TS.prefs.setPrefLocal("push_mention_alert",!!t.value),TS.prefs.push_changed_sig.dispatch());break;case"push_dm_alert":TS.prefs.getPref("push_dm_alert")!==!!t.value&&(TS.prefs.setPrefLocal("push_dm_alert",!!t.value),TS.prefs.push_changed_sig.dispatch());break;case"time24":TS.prefs.getPref("time24")!==!!t.value&&(TS.prefs.setPrefLocal("time24",!!t.value),TS.prefs.time24_changed_sig.dispatch());break;case"sidebar_behavior":TS.prefs.getPref("sidebar_behavior")!=t.value&&(TS.prefs.setPrefLocal("sidebar_behavior",t.value),TS.prefs.sidebar_behavior_changed_sig.dispatch());break;case"two_factor_update_seen":TS.model.two_factor_update_seen!=t.value&&(TS.mode.prefs.two_factor_update_seen=t.value,TS.prefs.two_factor_update_seen_changed_sig.dispatch());break;case"privacy_policy_seen":TS.prefs.getPref("privacy_policy_seen")!=t.value&&(TS.prefs.setPrefLocal("privacy_policy_seen",t.value),TS.prefs.privacy_policy_seen_changed_sig.dispatch());break;case"last_seen_at_channel_warning":TS.prefs.getPref("last_seen_at_channel_warning")!=t.value&&TS.prefs.setPrefLocal("last_seen_at_channel_warning",t.value);break;case"mentions_exclude_at_channels":TS.prefs.getPref("mentions_exclude_at_channels")!=t.value&&(TS.prefs.setPrefLocal("mentions_exclude_at_channels",t.value),TS.prefs.mentions_exclude_at_channels_changed_sig.dispatch());break;case"mentions_exclude_at_user_groups":TS.prefs.getPref("mentions_exclude_at_user_groups")!=t.value&&(TS.prefs.setPrefLocal("mentions_exclude_at_user_groups",t.value),TS.prefs.mentions_exclude_at_user_groups_changed_sig.dispatch());break;case"no_invites_widget_in_sidebar":TS.prefs.getPref("no_invites_widget_in_sidebar")!=t.value&&(TS.prefs.setPrefLocal("no_invites_widget_in_sidebar",t.value),TS.prefs.no_invites_widget_in_sidebar_changed_sig.dispatch());break;case"k_key_omnibox_auto_hide_count":TS.prefs.getPref("k_key_omnibox_auto_hide_count")!=t.value&&(TS.prefs.setPrefLocal("k_key_omnibox_auto_hide_count",t.value),TS.prefs.k_key_omnibox_auto_hide_count_changed_sig.dispatch());break;case"show_sidebar_quickswitcher_button":TS.prefs.getPref("show_sidebar_quickswitcher_button")!=t.value&&TS.prefs.setPrefLocal("show_sidebar_quickswitcher_button",t.value);break;case"preferred_skin_tone":TS.prefs.getPref("preferred_skin_tone")!=t.value&&(TS.prefs.setPrefLocal("preferred_skin_tone",t.value),TS.prefs.preferred_skin_tone_changed_sig.dispatch());break;case"separate_private_channels":TS.prefs.getPref("separate_private_channels")!=t.value&&(TS.prefs.setPrefLocal("separate_private_channels",t.value),TS.prefs.separate_private_channels_changed_sig.dispatch());break;case"separate_shared_channels":TS.prefs.getPref("separate_shared_channels")!=t.value&&(TS.prefs.setPrefLocal("separate_shared_channels",t.value),TS.prefs.separate_shared_channels_changed_sig.dispatch());break;case"whats_new_read":TS.prefs.getPref("whats_new_read")!=t.value&&(TS.prefs.setPrefLocal("whats_new_read",t.value),TS.prefs.whats_new_read_changed_sig.dispatch());break;case"tz":TS.prefs.getPref("tz")!=t.value&&(TS.prefs.setPrefLocal("tz",t.value),TS.prefs.tz_changed_sig.dispatch());break;case"keyboard":TS.prefs.getPref("keyboard")!=t.value&&(TS.prefs.setPrefLocal("keyboard",t.value),TS.prefs.keyboard_changed_sig.dispatch());break;case"msg_input_send_btn":TS.prefs.getPref("msg_input_send_btn")!=t.value&&(TS.prefs.setPrefLocal("msg_input_send_btn",t.value),TS.prefs.msg_input_send_btn_changed_sig.dispatch());break;case"msg_input_send_btn_auto_set":TS.prefs.getPref("msg_input_send_btn_auto_set")!=t.value&&(TS.prefs.setPrefLocal("msg_input_send_btn_auto_set",t.value),TS.prefs.msg_input_send_btn_auto_set_changed_sig.dispatch());break;case"frecency_jumper":if(TS.ui.frecency.isEnterprise())break;TS.prefs.conditionallyClogFrecencyDueToSizeChange("PREF_USER_TEAM_FRECENCY_SHRINKAGE",JSON.stringify(TS.model.frecency_jumper),t.value),TS.prefs.mergeFrecencyJumper(t.value)&&TS.prefs.frecency_jumper_changed_sig.dispatch();break;case"frecency_ent_jumper":TS.prefs.conditionallyClogFrecencyDueToSizeChange("PREF_USER_ORG_FRECENCY_SHRINKAGE",JSON.stringify(TS.model.frecency_jumper),t.value),TS.log(666,"Received a pref_change event for frecency_ent_jumper."),TS.prefs.mergeFrecencyJumper(t.value)&&TS.prefs.frecency_jumper_changed_sig.dispatch();break;case"jumbomoji":TS.prefs.getPref("jumbomoji")!=t.value&&(TS.prefs.setPrefLocal("jumbomoji",t.value),TS.prefs.jumbomoji_changed_sig.dispatch());break;case"hide_hex_swatch":TS.prefs.getPref("hide_hex_swatch")!=t.value&&(TS.prefs.setPrefLocal("hide_hex_swatch",t.value),TS.prefs.hide_hex_swatch_changed_sig.dispatch());break;case"a11y_animations":TS.prefs.getPref("a11y_animations")!==t.value&&TS.prefs.setPrefLocal("a11y_animations",t.value);break;case"show_memory_instrument":TS.prefs.getPref("show_memory_instrument")!==t.value&&(TS.prefs.setPrefLocal("show_memory_instrument",t.value),TS.prefs.show_memory_instrument_changed_sig.dispatch());break;case"channel_sort":TS.prefs.getPref("channel_sort")!==t.value&&(TS.prefs.setPrefLocal("channel_sort",t.value),TS.prefs.setChannelSort(TS.prefs.getPref("channel_sort")),TS.prefs.channel_sort_changed_sig.dispatch());break;case"enable_unread_view":TS.prefs.getPref("enable_unread_view")!==t.value&&(TS.prefs.setPrefLocal("enable_unread_view",t.value),TS.prefs.enable_unread_view_changed_sig.dispatch());break;case"enable_react_emoji_picker":TS.prefs.getPref("enable_react_emoji_picker")!==t.value&&(TS.prefs.setPrefLocal("enable_react_emoji_picker",t.value),TS.prefs.enable_react_emoji_picker_changed_sig.dispatch());break;case"client_logs_pri":TS.prefs.setPrefLocal(t.name,t.value),TS.console.setAppropriatePri();break;case"email_alerts":TS.prefs.setPrefLocal(t.name,t.value),TS.prefs.email_alerts_changed_sig.dispatch();break;default:TS.prefs.setPrefLocal(t.name,t.value)}},hex_regex:/^#?([0-9a-f]{6})$/i,conditionallyClogFrecencyDueToSizeChange:function(t,n,s){s.length/n.length<.1&&TS.interop.clog.track(t,{updated_user_client_prefs:{existing_frecency:n,new_frecency:s}})},setSidebarThemeCustomValues:function(t){var n=!1;t&&typeof t=="object"&&t.length===void 0&&_.forOwn(t,function(s,l){if(n=!1,!s||!s.substr||(t[l]=s.substr(0,7),!s.match(TS.prefs.hex_regex)))return!1;n=!0}),n?TS.prefs.setPrefLocal("sidebar_theme_custom_values",JSON.stringify(t)):(TS.prefs.setPrefLocal("sidebar_theme","default"),TS.prefs.setPrefLocal("sidebar_theme_custom_values",JSON.stringify(TS.sidebar_themes.default_themes.default_theme)))},setMultiPrefsByAPI:function(t,n){var s="";if(_.forOwn(t,function(e,i){s+=`&${encodeURIComponent(i)}=${encodeURIComponent(e)}`}),!s){TS.error(" no prefs to set?");return}var l={prefs:s};return TS.prefs.setPrefByAPI(l,n)},setPrefByAPI:function(t,n){return TS.interop.api.callExpedited("users.prefs.set",t).then(function(s){const{data:e,args:i}=s;if(e&&e.prefs&&i){const u=i.name&&[i.name]||_.keys(TS.interop.url.queryStringParse(i.prefs));_.forEach(u,f=>TS.prefs.legacyOnPrefChanged({name:f,value:e.prefs[f]}))}if(n)return n(!0,e,i)}).catch(function(s){const{args:l}=s;var e;l.hasOwnProperty("name")?e=`pref name: ${l.name}`:l.prefs&&(e="(multiple prefs)"),TS.interop.utility.getLogger({getState:TS.redux.getState}).error(e,"TS.prefs.setPrefByAPI call got a not ok rsp",{subtype:"API response error"}),setTimeout(function(){l.prefs?TS.error("multi preferences setting failed."):TS.error(`"${l.name}" preference setting failed.`)},0)})},setTeamPrefByAPI:function(t,n,s){return TS.interop.api.callExpedited("team.prefs.set",{prefs:JSON.stringify(t)}).then(function(l){const{data:e}=l;if(TS.web){s=s||[];var i=Object.keys(t).concat(s);i.forEach(function(u){e.prefs.hasOwnProperty(u)&&(t.hasOwnProperty(u)||TS.prefs.getTeamPref(u)!==e.prefs[u])&&TS.prefs.legacyOnTeamPrefChanged({name:u,value:e.prefs[u]})})}return Promise.resolve(e.prefs)}).catch(function(l){const{data:e}=l;return n&&n(e),Promise.reject(e)})},removeTeamFromEnterpriseExcludeTeamPref:function(t){if(!TS.boot_data.page_needs_enterprise)return;const n=TS.prefs.getPref("enterprise_excluded_app_teams");if(!n)return;const s=n?n.split(","):[];_.pull(s,t),TS.prefs.setPrefByAPI({name:"enterprise_excluded_app_teams",value:s.join(",")})}});var o=!1})()},93962:()=>{(function(){TS.registerModule("redux.bots",{getBotByMsg:function(u){var f=o(u);return f?i(f):null},bulkUpsertBots:function(u){_.isArray(u)&&TS.redux.dispatch(TS.interop.redux.models.bots.bulkUpsertBots({bots:u}))}});var o=TS.redux.bindSelectorToStore("TS.interop.redux.models.bots.getBotByMsg"),t={},n={},s=d(function(){return TS.boot_data&&(TS.boot_data.version_ts==="dev"||TS.boot_data.version_ts==="local_js")},"_isDev"),l=d(function(u,f){return typeof f!="symbol"&&(_.isNumber(t[f])||(t[f]=0,n[f]=0),t[f]+=1),u[f]},"_getProperty"),e=d(function(u,f,S){return typeof f!="symbol"&&(_.isNumber(n[f])||(t[f]=0,n[f]=0),n[f]+=1),u[f]=S,!0},"_setProperty"),i=d(function(u){return!window.Proxy||!s()?u:new window.Proxy(u,{get:function(f,S){return l(f,S)},set:function(f,S,p){return e(f,S,p)}})},"_wrapBot")})()},832225:()=>{(function(){TS.registerModule("redux.channels.interop",{maybeWrapEntity:function(R){return!R||!R.id?R:ee(R.id)}});var o=TS.interop.channels.getChannelById,t={},n={},s={},l=d(function(){var R=window.Proxy&&U();return R},"_shouldWrapEntityInProxyObject"),e=d(function(R,y,T){if(!(!R||!y)){var a={id:R};a[y]=T,TS.interop.channels.updateOneKeyForChannel(a)}},"_updateOneKeyForChannel"),i=["_show_in_list_even_though_no_unreads","deleted","has_draft","is_archived","is_frozen","is_channel","is_ext_shared","is_group","is_im","is_member","is_mpim","is_open","is_org_shared","is_pending_ext_shared","is_starred","last_read","members","priority","unread_cnt","unread_highlight_cnt","internalTeamIds","pendingAndConnectedTeamIds"],u=["_display_name","_archive_msgs","_checking_at_channel_status","_delayed_fetch_timer","_did_defer_initial_msg_history","_display_name_lc","_display_name_truncated","_i18n_ns_history","_i18n_ns","_internal_name","_jumper_previous_name_match","_latest_via_users_counts","_mark_most_recent_read_timer","_marked_reason","_members","_mention_count_display_via_users_counts","_name_lc","_prev_last_read","_score","_users_counts_info","active_members","can_thread","create_channel","created","creator","date_created","enterprise_id","fetched_history_after_scrollback_time","has_fetched_history_after_scrollback","has_pins","history_changed","history_fetch_failed","history_fetch_retries","history_is_being_fetched","id","inherit","is_default","is_general","is_global_shared","is_limited","is_moved","is_non_threadable","is_org_default","is_org_mandatory","is_private","is_read_only","is_thread_only","last_made_active","last_msg_input","latest","length","member","msgs","name_normalized","name","needs_joined_message","never_needs_joined_msg","note","num_members","old_name","oldest_msg_ts","opened_this_session","org","parent_group","pinned_items","pinned_items_count","presence","previous_names","purpose","scroll_top","shares","domain","tooltip","topic","unlinked","unread_count_display","unread_count","unread_highlight_cnt_in_client","unread_highlights","unreads","user","was_archived_this_session","isUnknown","isNonExistent","fromAnotherTeam","internalTeamIds","team_id","pendingAndConnectedTeamIds","previously_connected_team_ids","pending_connected_team_ids","conversation_host_id"],f=["_get","_is_interop_channel_object","_set","_setWithReduxAction","attributes","children","disabled","is_broadcast_keyword","is_divider","is_emoji","is_usergroup","is_view","is_app_action","nodeType","old_name","props_to_define","selector","then","title","toObject","toJSON","window","@@toStringTag"],S=_.reduce(i,function(R,y){return R[y]=!0,R},{}),p=_.reduce(u,function(R,y){return R[y]=!0,R},{}),h=_.reduce(f,function(R,y){return R[y]=!0,R},{}),c={},v=d(function(R,y){if(!p[y]&&!S[y]&&!h[y]&&_.isString(y)){TS.console.logStackTrace(`Accessing an unknown key ${y} on a model object`),s[y]||(s[y]=!0),U()&&TS.console.error(`Dev only warning: Trying to get an unknown field "${y}" from a model object. If this is not a typo and you are relying on this property, please try and store this data outside of the model ob, or add to the model_ob_keys_as_map whitelist in TS.redux.channels.interop.source.js. Questions? Feel free to ask in #dhtml`);var T=o(R.id);return T&&T[y]}return R[y]},"_proxyGet"),b=d(function(R,y,T){if(_.isString(y)&&(t[y]=(t[y]||0)+1),!p[y]&&!S[y]&&_.isString(y)){if(TS.console.logStackTrace(`Setting an unknown key ${y} on a model object`),s[y]||(s[y]=!0),U())throw new Error(`Dev only warning: Trying to set an unknown field "${y}" on a model object. If this is not a typo and you are relying on this property, please try and store this data outside of the model ob, or add to the model_ob_keys_as_map whitelist in TS.redux.channels.interop.source.js. Questions? Feel free to ask in #dhtml`);var a=o(R.id);a&&(a[y]=T)}return R[y]=T,!0},"_proxySet"),w=d(function(R){this.id=R,Object.defineProperties(this,this.props_to_define)},"_Channel"),x={};_.without(u,"id").forEach(function(R){x[R]={enumerable:!0,get:function(){return this._get(R)},set:function(y){return this._set(R,y)}},i.forEach(function(y){x[y]={enumerable:!0,get:function(){return this._get(y)},set:function(T){return this._setWithReduxAction(y,T)}}})}),w.prototype.props_to_define=x,w.prototype._is_interop_channel_object=!0,w.prototype._get=function(R){var y=o(this.id);if(y)return y[R]},w.prototype._set=function(R,y){var T=o(this.id);return T&&(T[R]=y),!0},w.prototype._setWithReduxAction=function(R,y){var T=o(this.id);return T&&T[R]!==y&&(e(this.id,R,y),n[R]=(n[R]||0)+1),!0};var U=d(function(){return TS.boot_data&&(TS.boot_data.version_ts==="dev"||TS.boot_data.version_ts==="local_js")},"_isDev"),ee=d(function(R){if(!R)throw new Error("Must pass in a valid id to _createWrappedEntityById");var y,T=l();return c[R]?y=c[R]:(y=new w(R),T&&(y=new window.Proxy(y,{get:function(a,g){return v(a,g)},set:function(a,g,A){return b(a,g,A)}})),c[R]=y),y},"_createWrappedEntityById")})()},560788:()=>{(function(){TS.registerModule("redux.channels",{onStart:function(){o=!0,n=TS.interop.rules.channels.isIm||t,Object.defineProperty(TS.model,"channels",{get:function(){return S("channels")}}),Object.defineProperty(TS.model,"groups",{get:function(){return S("groups")}}),Object.defineProperty(TS.model,"mpims",{get:function(){return S("mpims")}}),Object.defineProperty(TS.model,"ims",{get:function(){return S("ims")}})},dangerouslyGetPublicChannels:function(){let{includeFromAnotherTeam:p=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return TS.interop.channels.getPublicChannels({includeFromAnotherTeam:p})},dangerouslyGetPrivateChannels:function(){let{includeFromAnotherTeam:p=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return TS.interop.channels.getPrivateChannels({includeFromAnotherTeam:p})},dangerouslyGetMpims:function(){return TS.interop.channels.getMpims()},bulkAddEntities:function(p){TS.interop.channels.bulkAddChannels({channels:p})},updateMutedChannels:function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var h=_.reduce(p,function(c,v){return c[v]=!0,c},{});TS.redux.dispatch(TS.interop.redux.actions.setMutedChannels(h))},getEntityById:function(p,h){return TS.interop.channels.getEntityById(p,h)},getPublicChannelByName:function(p){var h=l(p);if(TS.interop.rules.channels.isPublicChannel(h))return h},getPublicOrPrivateChannelByName:function(p){var h=l(p);if(TS.interop.rules.channels.isPublicChannel(h)||TS.interop.rules.channels.isPrivateChannel(h))return h},getImByMemberId:function(p){var h=e(p),c=TS.redux.channels.getEntityById(h);return n(c)?c:null},test:function(){var p={};return p}});let o=!1;function t(){TS.interop.utility.getLogger({getState:TS.redux.getState}).error(`missing-isIm: onStartDidRun=${o}, i(${_.has(window,"TS.interop")}), i.r(${_.has(window,"TS.interop.rules")}), i.r.c(${_.has(window,"TS.interop.rules.channels")}), i.r.c.i(${_.has(window,"TS.interop.rules.channels.isIm")})`);const p=Date.now()-(window.localStorage.isImBugLastEncountered||0);throw localStorage.isImBugLastEncountered=Date.now(),p>6e4&&TS.reload(null,"isIM bug detected"),new Error("TS.interop.rules.channels.isIm not present on page, not sure how to proceed")}d(t,"_isImErrorHandler");var n=t,s=TS.interop.channels.getAllChannels,l=TS.interop.channels.getChannelByName,e=TS.interop.channels.getImIdByMemberId,i,u={},f={channels:void 0,groups:void 0,mpims:void 0,ims:void 0},S=d(function(p){var h=s(),c;switch(p){case"channels":c=d(function(v){return v.is_channel&&!v.fromAnotherTeam},"filter");break;case"groups":c=d(function(v){return v.is_group&&!v.is_mpim&&!v.fromAnotherTeam},"filter");break;case"ims":c=n;break;case"mpims":c=d(function(v){return v.is_group&&v.is_mpim},"filter");break;default:}return h===i&&u[p]||(h!==i&&(i=h,u={}),u[p]=_.filter(h,c),u[p]=_.map(u[p],TS.redux.channels.interop.maybeWrapEntity),f[p]||(f[p]=_.defer(function(){delete u[p],delete f[p],i=null}))),u[p]},"_buildModelArrayKey")})()},148985:()=>{(function(){TS.registerModule("redux.files",{onStart:function(){Object.defineProperty(TS.model,"files",{get:function(){return TS.redux.files.getAllFiles()},set:function(){return TS.boot_data.feature_tinyspeck&&TS.warn("TS.redux.files: Set TS.model.files"),!1}})},getFileById:function(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var i=t(l,e);return!i||i.id!==l?null:i},getAllFiles:function(){var l=o();return l===n||(s=_.values(l),n=l),s}});var o=TS.redux.bindSelectorToStore("TS.interop.redux.models.files.getAllFiles"),t=TS.redux.bindSelectorToStore("TS.interop.redux.models.files.getFileById"),n,s})()},517573:()=>{(function(){TS.registerModule("redux.members",{onStart:function(){TS.boot_data.no_login||(t=TS.utility.enableFeatureForUser(1),s(),Object.defineProperty(TS.model,"members",{get:function(){return TS.redux.members.getAllMembers()},set:function(){return TS.boot_data.feature_tinyspeck&&TS.warn("TS.redux.members: Set TS.model.members"),!1}}),Object.defineProperty(TS.model,"user",{get:function(){return TS.interop.members.getCurrentMember()}}))},getPotentiallyUnknownMemberById:function(l){if(l&&l[0]==="@"&&(l=l.substring(1)),!TS.interop.utility.looksLikeMemberId(l)){if(t&&TS.console.logStackTraceToBackEnd("non-ID passed into getPotentiallyUnknownMemberById","member_name_as_id_lookup",1),TS.boot_data.feature_deprecate_get_member_by_name)return null;const i=TS.interop.members.getMemberByName(l);if(i)return i}const e=TS.interop.members.getPotentiallyUnknownMemberById(l);return e?e.isUnknown?(TS.members.legacySetMemberUnknown(l),_.omit({...e,is_unknown:!0},"isUnknown")):e.isNonExistent?_.omit({...e,is_non_existent:!0},"isNonExistent"):e:null},getMemberByEmail:function(l){var e=TS.interop.members.getMemberByEmail(l);return!e||!e.profile?null:e},getAllMembers:function(){var l=TS.interop.members.getAllMembers();return _.values(l)},hasMemberWithId:function(l){return TS.interop.members.hasMemberWithId(l)},test:function(){var l={_addSignalListeners:s};return Object.defineProperty(l,"_bulk_upsert_payload",{get:function(){return o},set:function(e){o=e}}),l}});var o=[],t,n=d(function(){o.length&&(TS.interop.members.markObjectsAsFresh(o.map(l=>l.id)),TS.interop.members.dangerouslyBulkAddMembers(o),o=[])},"_bulkUpsertMembers"),s=d(function(){TS.members.batch_upserted_sig.add(n)},"_addSignalListeners")})()},220706:()=>{(function(){TS.registerModule("redux.prefs",{setUserPrefs:function(o){TS.interop.prefs.setUserPrefs(o)},setTeamPrefs:function(o){TS.interop.prefs.setTeamPrefs(o)},setEnterprisePrefs:function(o){TS.interop.prefs.setEnterprisePrefs({prefs:o})},setUserPref:function(o,t){TS.redux.prefs.getUserPref(o)!==t&&TS.interop.prefs.setUserPref({pref:o,value:t})},setTeamPref:function(o,t){TS.redux.prefs.getTeamPref(o)!==t&&TS.interop.prefs.setTeamPref({pref:o,value:t})},getUserPref:function(o){return TS.interop.prefs.getUserPref(o)},getTeamPref:function(o){return TS.interop.prefs.getTeamPref(o)},test:function(){var o={};return o}})})()},561587:()=>{(function(){TS.registerModule("redux.presence",{onStart:function(){s()},getPresenceByMemberId:function(l){return o(l)},updatePresenceForMember:function(l){!l||!l.id||TS.redux.dispatch(TS.interop.redux.features.presence.updatePresence({memberId:l.id,presence:l.presence}))}});var o=TS.redux.bindSelectorToStore("TS.interop.redux.features.presence.getPresenceByMemberId"),t={},n=d(function(){t.length&&(TS.redux.dispatch(TS.interop.redux.features.presence.bulkUpdatePresence(t)),t={})},"_bulkUpsertPresences"),s=d(function(){TS.members.presence_changed_sig.add(TS.redux.presence.updatePresenceForMember),TS.members.batch_upserted_sig.add(n)},"_addSignalListeners")})()},299228:()=>{(function(){TS.registerModule("redux.reactions",{getReactionsForKey:function(o){return TS.interop.redux.models.reactions.getReactionsForKey(TS.redux.getState(),o)},upsertReactions:function(o,t,n){const s=TS.redux.reactions.getReactionsForKey(o),l=TS.redux.dispatch(TS.interop.redux.models.reactions.upsertReactions({key:o,reactions:t,fromUserAction:n}));let e="NOOP";return l&&(t&&_.isEmpty(s)?e="ADDED":_.isEqual(s,t)||(e="CHANGED")),{status:e,what_changed:[],rxns:t}}})})()},268302:()=>{(function(){TS.registerModule("redux.teams",{onStart:function(){Object.defineProperty(TS.model,"team",{get:function(){return TS.redux.teams.getCurrentTeam()},set:function(){return TS.error("TS.redux.teams: trying to set TS.model.team???"),!1}})},upsertTeam:function(o){if(!(!o||!o.id))return TS.interop.teams.upsertTeam({team:o})},getTeamById:function(o,t){return TS.interop.teams.getTeamById?TS.interop.teams.getTeamById(o,t):null},getAllTeams:function(){return TS.interop.teams.getAllTeams?TS.interop.teams.getAllTeams():null},getCurrentTeam:function(){return TS.interop.teams.getCurrentTeam?TS.interop.teams.getCurrentTeam():null},fetchAndUpsertEnterpriseOrgInfo:function(){return TS.interop.teams.fetchAndUpsertEnterpriseOrgInfo?TS.redux.dispatch(TS.interop.teams.fetchAndUpsertEnterpriseOrgInfo()):null}})})()},517424:()=>{(function(){TS.registerModule("redux.user_groups",{onStart:function(){Object.defineProperty(TS.model,"user_groups",{get:function(){return TS.redux.user_groups.getAllUserGroups()},set:function(){return TS.error("TS.redux.user_groups: trying to set TS.model.user_groups???"),!1}})},getAllUserGroups:function(){var n=TS.interop.userGroups.getAllUserGroups();return n===o||(t=_.values(n).sort(TS.interop.i18n.mappedSorter("_name_lc")),o=n),t}});var o,t})()},658135:()=>{(function(){TS.registerModule("rxns",{upsertRxnsFromDataAndUpdateUI:function(t,n){var s=o(t,n);return s},getRxnKey:function(t,n,s){return t==="message"&&!s&&TS.error("getRxnKey: no c_id provided for message rxn_key"),t!=="message"&&s&&TS.error("getRxnKey: c_id provided for but this is not a message rxn_key"),`${t}-${n}-${s||""}`},getExistingRxnsByKey:function(t){var n=TS.redux.reactions.getReactionsForKey(t);return n&&n.length?n:null},test:function(){return{upsertRxnsFromData:o}}});var o=d(function(t,n){return TS.redux.reactions.upsertReactions(t,n,!1)},"_upsertRxnsFromData")})()},900265:()=>{(function(){TS.registerModule("searcher",{search:function(T,a){a.tiered?TS.telemeter.mark("ts-searcher-search-tiered-mark"):TS.telemeter.mark("ts-searcher-search-mark"),a.limit?a.limit_option={limit:a.limit}:a.limit_option={limit:o},a.members&&a.members===!0&&(a.members=_.cloneDeep(l));var g=v(T,a);if(a.tiered){var A=i(T,a);return A.promise=g,Promise.resolve(A).finally(()=>{TS.telemeter.measureAndClear("ts-searcher-search-tiered-mark","ts-searcher-search-tiered")})}return g.then(j=>{try{const Q=["U0620EL8G","WFKHTCZ29","WKLQEGRRB"];if(_.get(TS,"model.user.id")&&j.members&&Q.indexOf(TS.model.user.id)>-1){const X=_.map(j.members,ne=>({user:ne.id,is_stranger:ne.is_stranger}));TS.interop.utility.getLogger({getState:TS.redux.getState}).error("guest_to_guest_visibility",{type:"flannel_search_results",member_list:X})}}catch(Q){TS.interop.utility.getLogger({getState:TS.redux.getState}).error("guest_to_guest_visibility",{type:"flannel_search_results",error:Q})}return j}).finally(()=>{TS.telemeter.measureAndClear("ts-searcher-search-mark","ts-searcher-search")})},test:function(){return{count:R}}});var o=24,t={prefer_exact_match:!0,frecency:!0,prefer_channels_user_belongs_to:!0},n={include_archived:!0,only_if_member:!1},s={include_archived:!0},l={include_self:!1,include_slackbot:!0,include_bots:!0,only_local_team:!1,only_admins:!1},e={include_deleted:!1,include_from_another_team:!1},i=d(function(T,a){y(a);var g={};if(a.members&&(g.members=u(a.members)),a.channels&&(g.channels=f(a.channels)),a.groups&&(g.groups=S(a.groups)),a.all_mpims&&(g.all_mpims=TS.redux.channels.dangerouslyGetMpims().filter(TS.interop.rules.channels.isVisibleMpim)),a.mpims&&(g.mpims=TS.redux.channels.dangerouslyGetMpims()),a.teams&&(g.teams=p(a.teams)),a.usergroups&&(g.usergroups=h(a.usergroups)),a.views&&(g.views=c(a.views)),a.filter&&(g=a.filter(g)),a.sort!==!1){var A=ee(a.sort,a.limit_option,t);return TS.sorter.search(T,g,A)}return g},"_searchLocal"),u=d(function(T){return T=ee(T,l),TS.members.getMembersWithOptions(T)},"_getLocalMembers"),f=d(function(T){T=ee(T,n);var a;return a=TS.redux.channels.dangerouslyGetPublicChannels({includeFromAnotherTeam:T.include_from_another_team}),T.include_archived||(a=_.reject(a,TS.interop.rules.channels.isArchived)),T.exclude_required&&(a=_.reject(a,TS.interop.rules.channels.isRequired)),T.only_if_member&&(a=_.filter(a,"is_member")),T.can_post&&(a=_.filter(a,TS.interop.rules.user.canPostInChannel)),a=_.reject(a,{is_moved:1,is_archived:!0}),a},"_getLocalPublicChannels"),S=d(function(T){T=ee(T,s);var a=TS.redux.channels.dangerouslyGetPrivateChannels({includeFromAnotherTeam:T.include_from_another_team});return T.include_archived||(a=_.reject(a,TS.interop.rules.channels.isArchived)),a=_.reject(a,{is_moved:1,is_archived:!0}),a},"_getLocalPrivateChannels"),p=d(function(){var T=_.map(TS.boot_data.other_accounts,g=>TS.teams.getTeamById(g.team_id)),a=[];return TS.boot_data.page_needs_enterprise&&(!TS.model.is_our_app||TS.interop.environment.isSSBAndAtLeastVersion("2.8"))&&(a=_.values(TS.teams.getEnterpriseTeams({only_member_of:!0,exclude_current_team:!0}))),_.uniqBy(a.concat(T),"id")},"_getLocalTeams"),h=d(function(T){let a=TS.interop.userGroups.getKnownUserGroups();return T.include_deleted||(a=a.filter(g=>TS.interop.userGroups.isUserGroupActive(g))),T.include_from_another_team||(a=a.filter(g=>!TS.interop.userGroups.isUserGroupFromAnotherTeam(g.id))),a},"_getLocalUserGroups"),c=d(function(){var T=[];return T.push(_.find(TS.model.NAMED_VIEWS,{id:"Vall_threads"})),T.push(_.find(TS.model.NAMED_VIEWS,{id:"Vapp_space"})),T},"_getLocalViews"),v=d(function(T,a){var g=[],A=[];if(a.members){const j=b(T,a);(a.members.runaway?A:g).push(j)}if(a.channels||a.groups){const j=w(T,a);(a.channels&&a.channels.runaway||a.groups&&a.groups.runaway?A:g).push(j)}if(a.usergroups){const j=x(T,a);(a.usergroups.runaway?A:g).push(j)}if(TS.boot_data.page_needs_enterprise&&a.teams){const j=U(T,a);(a.teams.runaway?A:g).push(j)}return Promise.all(g).then(function(){const j=i(T,a),Q=a.sort!==!1?!!j.length:_.some(_.values(j),"length");return A.length&&!Q?new Promise(function(ne){Promise.all(A).then(ne)}).then(function(){return i(T,a)}):j})},"_searchRemote"),b=d(function(T,a){const g=T.charAt(0);return g==="#"||(g==="@"&&(T=T.slice(1)),g&&!T)?Promise.resolve():(a=ee(a.members,a.limit_option,l),a.max_api_results=a.remote_limit||a.limit,a.query=T,TS.members.promiseToSearchMembers(a).timeout(TS.interop.connectivity.getMaximumSocketWait()).catch(_.noop))},"_promiseRemoteMembers"),w=d(function(T,a){const g=T.charAt(0);if(g==="@"||(g==="#"&&(T=T.slice(1)),g&&!T))return Promise.resolve();const A=a.channels&&a.channels.include_from_another_team||a.groups&&a.groups.include_from_another_team;a=ee(a.channels||a.groups,a.limit_option);const j=a.remote_limit||a.limit;return TS.interop.channels.fetchAndUpsertChannelsWithQuery({query:{query:T,count:j},includeFromAnotherTeam:A}).timeout(TS.interop.connectivity.getMaximumSocketWait()).catch(_.noop)},"_promiseRemoteChannels"),x=d(function(T,a){const g=T.charAt(0);if(g==="#"||(g==="@"&&(T=T.slice(1)),g&&!T))return Promise.resolve();a=ee(a.usergroups,a.limit_option,e);const A=a.remote_limit||a.limit;return TS.interop.userGroups.fetchAndUpsertUserGroupsWithQuery({query:T,count:A}).catch(_.noop)},"_promiseRemoteUserGroups"),U=d(function(T,a){a=ee(a.teams,a.limit_option);const g=a.remote_limit||a.limit;return TS.interop.teams.fetchAndUpsertTeamsWithQuery({query:T,count:g}).catch(_.noop)},"_promiseRemoteTeams"),ee=d(function(T,a){return T===!0&&(T={}),_.defaultsDeep.apply(null,arguments)},"_mergeDefaults"),R=d(function(T){return _.size(_.flatten(_.values(T)))},"_totalCount"),y=d(function(T){(T.members||T.mpims||T.all_mpims)&&TS.interop.members.pauseRefetch(),(T.channels||T.groups||T.mpims||T.all_mpims)&&TS.interop.channels.pauseRefetch(),T.teams&&TS.interop.teams.pauseRefetch()},"_pauseConditionalFetching")})()},146343:()=>{(function(){TS.registerModule("shared",{onStart:function(){},test:function(){var e={};return Object.defineProperty(e,"_queried_usernames",{get:function(){return t},set:function(i){t=i}}),e},legacySetOldestUnreadTsForId:function(e,i){e&&(o[e]=i)},legacyGetActiveModelOb:function(){var e;return TS.boot_data.channel_id?e=TS.interop.channels.getPublicChannelById(TS.boot_data.channel_id):TS.boot_data.im_id?e=TS.interop.channels.getImById(TS.boot_data.im_id):TS.boot_data.mpim_id?e=TS.interop.channels.getMpimById(TS.boot_data.mpim_id):TS.boot_data.group_id?e=TS.interop.channels.getGroupById(TS.boot_data.group_id):(TS.warn("error getActiveModelOb found no ob"),TS.warn(`TS.boot_data.channel_id: ${TS.boot_data.channel_id}`),TS.warn(`TS.boot_data.im_id: ${TS.boot_data.im_id}`),TS.warn(`TS.boot_data.group_id: ${TS.boot_data.group_id}`)),e},promiseToRefetchModelOb:function(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"TS.shared.promiseToRefetchModelOb";if(!e||typeof e!="string")return Promise.resolve();const u=[e];return TS.interop.channels.fetchAndUpsertChannelsFromFlannel({ids:u}).then(f=>{let{channels:S}=f;return _.isEmpty(S)?TS.interop.channels.fetchAndUpsertChannelsFromAPI({ids:u,reason:i}):{channels:S}}).then(f=>{let{channels:S}=f;return S&&S[0]})},ensureModelObsArePresent:function(e,i){return!e||!e.length?Promise.resolve():TS.interop.channels.fetchAndUpsertChannelsById({ids:e,reason:i}).then(u=>{let{missing:f}=u;return _.isEmpty(f)||f.forEach(S=>TS.interop.channels.upsertChannel({id:S,isNonExistent:!0})),Promise.resolve()})},legacyEnsureModelObsInDataArePresent:function(e,i){const u=TS.interop.utility.extractAllModelObIds(e);return i==="search.messages"&&TS.boot_data.page_needs_enterprise&&s(e,u),TS.shared.ensureModelObsArePresent(u,i)},legacyBatchUpsertObjects:function(e){TS.has_pri[l]&&TS.log(l,`Flannel: upserting batch of ${e.length} objects`);var i=[],u=[],f=[];_.forEach(e,function(v){TS.interop.utility.looksLikeMemberId(_.get(v,"id"))?TS.redux.members.hasMemberWithId(v.id)?i.push(v):u.push(v):n(v)&&f.push(v)});var S=!!u.length,p=[];function h(v){TS.has_pri[l]&&TS.log(l,`Flannel: upserting and signaling user ${v.id} from query results`);var b=TS.members.legacyUpsertAndSignal(v).member;p.push(b)}d(h,"upsertAndSignalMember");function c(v){TS.has_pri[l]&&TS.log(l,`Flannel: upserting user ${v.id} from query results`);var b=TS.members.legacyUpsertMember(v).member;p.push(b)}return d(c,"upsertMember"),i.forEach(h),S&&(TS.members.legacyStartBatchUpsert(),u.forEach(c),TS.members.legacyFinishBatchUpsert()),f.length&&(TS.redux.bots.bulkUpsertBots(f),f.forEach(v=>{TS.has_pri[l]&&TS.log(l,`Flannel: upserting bot ${v.id} from query results`);var b=TS.interop.bots.getBotById(v.id);p.push(b)})),p}});var o={},t={},n=d(function(e){var i=_.get(e,"id[0]");return i==="B"},"_isBot");function s(e,i){var u=TS.model.team.id;_.remove(i,function(f){var S=_.find(e.messages.matches,function(c){return c.channel.id==f},this),p=_.get(S,"channel"),h=TS.interop.rules.channels.isOrgShared(p)||TS.interop.rules.channels.isExternallySharedChannel(p);if(S&&_.get(S,"team")!=u&&_.startsWith(f,"C")&&!h)return f})}d(s,"_excludeNonLocalModelObs");var l=1989})()},94633:()=>{(function(){TS.registerModule("sorter",{onStart:function(){},search:function(y,T,a){return h(y,T,a)},test:function(){var y={sortFuzzy:w,frecencyBonusPoints:U,getFilteredMatchesForFrecency:c,scoreMember:f,_scoreUserGroup:S,getSubQueryMatchers:u,_scoreEmoji:i,_makeFuzzySearcher:s,_getMetaFieldForId:n,search:h,getNameForComparison:b};return Object.defineProperty(y,"_meta_fields",{get:function(){return o},set:function(T){o=T}}),y}});var s=d(function(y,T){T=T||{};var a=T.fuzzy_limit!=null?T.fuzzy_limit:10;y=TS.interop.i18n.deburr(y.toLocaleLowerCase());var g=y,A=y.charAt(0)==="@",j=y.charAt(0)==="#",Q=y.charAt(0)===":";(A||j||Q)&&(y=y.substring(1));var X={fuzzy_limit:a},ne={fuzzy_limit:a,search_forward_only:!0},se=TS.fuzzy.makeFuzzyMatcher(y,X),D=TS.fuzzy.makeFuzzyMatcher(g,X),Y=TS.fuzzy.makeFuzzyMatcher(y,ne),J=u(y,ne);return{query:y,full_query:g,only_channels:j,only_members:A,only_emoji:Q,matchesChannel:function(B){if(TS.interop.rules.channels.isUnknownOrNonExistent(B)||A||Q)return!1;if((T.allow_empty_query||j)&&!y)return t(B.id,"jumper_score",0),!0;var F=se.score(B.name_normalized||B.name);if(t(B.id,"jumper_score",F),F>a&&T.search_previous_channel_names&&B.previous_names&&B.previous_names.length){var M=_.map(B.previous_names,function(z){return{score:se.score(z),name:z}});t(B.id,"jumper_previous_name_scores",M);var P=_.some(M,function(z){return z.score<=a}),C=P&&F>a;if(C){var O=_.minBy(M,"score");B._jumper_previous_name_match=O&&O.name}else B._jumper_previous_name_match=null;return F<=a||P}return B._jumper_previous_name_match&&(B._jumper_previous_name_match=null),F<=a},matchesGroup:function(B){if(j||A||Q)return!1;if(T.allow_empty_query&&!y)return t(B.id,"jumper_score",0),!0;var F=se.score(B.name_normalized||B.name);return t(B.id,"jumper_score",F),F<=a},matchesMember:function(B){if(B.is_non_existent||B.isNonExistent||B.is_unknown||B.isUnknown||j||Q)return!1;if((T.allow_empty_query||A)&&!y)return t(B.id,"jumper_score",0),!0;var F=f(B,Y,y);return t(B.id,"jumper_score",F),F<=a},matchesMpim:function(B){if(j||A||Q)return!1;if(T.allow_empty_query&&!y)return t(B.id,"jumper_score",0),!0;var F=TS.mpims.legacyGetMembersInDisplayOrder(B);F=_.chain(F).reject(C=>!C||C.is_non_existent||C.isNonExistent||C.is_unknown||C.isUnknown).value();var M=J.map(function(C){var O=F.map(function(z){return f(z,C)});return _.min(O)}),P=_.sum(M);return t(B.id,"jumper_score",P),P<=a},matchesTeam:function(B){if(TS.interop.rules.teams.isUnknownOrNonExistent(B))return!1;var F=B.team_name||B.name||"",M=D.score(F.toLocaleLowerCase());return t(B.id,"jumper_score",M),M<=a},matchesUserGroup:function(B){if(j||Q)return!1;if((T.allow_empty_query||A)&&!y)return t(B.id,"jumper_score",0),!0;var F=S(B,se);return t(B.id,"jumper_score",F),F<=a},matchesEmoji:function(B){if(j||A)return!1;if(T.allow_empty_query&&!y)return t(B.id,"emoji_score",0),!0;var F=TS.interop.i18n.deburr(B.display_name||B.name),M,P;return M=i(F,y),B.display_name&&B.display_name!==B.name&&(P=i(B.name,y),P!==1/0&&P<M&&(M=P,F=B.name)),M!==1/0?(t(B.id,"emoji_score",M),!0):!1},matchesBroadcastKeyword:function(B){if(j||Q)return!1;if((T.allow_empty_query||A)&&!y)return t(B.id,"jumper_score",0),!0;var F=p(B,se);return t(B.id,"jumper_score",F),F<=a},matchesView:function(B){if(j||Q)return!1;var F=se.score(B.name.toLocaleLowerCase());return F===1/0&&B.alt_names&&(F=_.reduce(B.alt_names,function(M,P){return Math.min(M,se.score(P.toLocaleLowerCase()))},F)),t(B.id,"jumper_score",F),F<=a}}},"_makeFuzzySearcher"),l=/\s+/g,e=/[-]+/g,i=d(function(y,T){var a=2,g=6;if(T.length<3?(a=0,g=0):T.length===3?(a=1,g=1):(T.length===4&&(a=1),g=5),y==="ok_hand"&&T==="ok")return 0;var A=TS.interop.searcher.emojiSkiplist;if(A[T]&&A[T].indexOf(y)!==-1)return 1/0;var j=1/0,Q=y.indexOf(T);if(Q===-1&&(Q=y.indexOf(T[0])),Q!==-1){T=T.replace(l,"").replace(e,"_"),y=y.replace(e,"_");for(var X=T.split(""),ne=0,se=0,D=0,Y=!0,J=Q;J<y.length;J++){if(y[J]===X[0]){if(Y=!0,X.shift(),D>se&&(se=D),D=0,X.length===0)break}else Y&&(ne+=1),Y=!1,D+=1;if(ne>a||D>g)return j}if(X.length>0)return j;j=1-T.length/y.length,ne>0&&(j+=ne)}return j},"_scoreEmoji"),u=d(function(y,T){var a=y.split(/[,| ]/).filter(function(g){return!!g});return a.map(function(g){return g=g.charAt("0")==="@"?g.substring(1):g,TS.fuzzy.makeFuzzyMatcher(g,T)})},"_getSubQueryMatchers"),f=d(function(y,T,a){var g;if(TS.utility.queryIsMaybeSelf(a)&&y.is_self)return 0;var A=1/0,j=1/0,Q=1/0,X=1/0;return A=T.score(y._real_name_lc),y._real_name_lc!==y._real_name_normalized_lc&&(j=T.score(y._real_name_normalized_lc)),y._display_name_lc&&(Q=T.score(y._display_name_lc),y._display_name_lc!==y._display_name_normalized_lc&&(X=T.score(y._display_name_normalized_lc))),g=Math.min(A,j,Q,X),g},"_scoreMember"),S=d(function(y,T){var a=1/0,g=1/0;a=T.score(y.name),g=T.score(y.handle);var A=Math.min(a,g);return A},"_scoreUserGroup"),p=d(function(y,T){var a=1/0,g=1/0;if(a=T.score(y.name),y.ms_name!==y.name&&(g=T.score(y.ms_name)),!y.alias)return Math.min(a,g);var A=1/0;A=T.score(y.alias);var j=Math.min(a,g,A);return j},"_scoreBroadcastKeyword"),h=d(function(y,T,a){var g=s(y,a||{}),A=[],j=[],Q=[],X=[],ne=[],se=[],D=[],Y=[],J=[],B=[],F=[],M=[],P=[];if(T.members=T.members||[],T.channels=T.channels||[],T.groups=T.groups||[],T.mpims=T.mpims||[],T.teams=T.teams||[],T.usergroups=T.usergroups||[],T.emoji=T.emoji||[],T.broadcast_keywords=T.broadcast_keywords||[],T.views=T.views||[],T.enterprise_channels=T.enterprise_channels||[],T.enterprise_groups=T.enterprise_groups||[],T.app_actions=T.app_actions||[],TS.telemeter.mark("ts-sorter-matching-mark"),!g.only_channels&&!g.only_emoji&&!g.only_app_actions&&(j=T.members.filter(function(W){return W.is_non_existent||W.isNonExistent||W.is_unknown||W.isUnknown?!1:(_.isString(TS.interop.rules.members.getMemberProfileFieldDisplayName(W))||TS.interop.utility.getLogger({getState:TS.redux.getState}).error(`${W.id}: memberProfileFieldDisplayName is not a string.`),_.isString(TS.interop.rules.members.getMemberRealName(W))||TS.interop.utility.getLogger({getState:TS.redux.getState}).error(`${W.id}: memberRealName is not a string`),a.prefer_exact_match&&g.query&&(TS.interop.rules.members.getMemberProfileFieldDisplayName(W)&&_.isString(TS.interop.rules.members.getMemberProfileFieldDisplayName(W))&&TS.interop.rules.members.getMemberProfileFieldDisplayName(W).toLocaleLowerCase()===g.query||TS.interop.rules.members.getMemberRealName(W)&&_.isString(TS.interop.rules.members.getMemberRealName(W))&&TS.interop.rules.members.getMemberRealName(W).toLocaleLowerCase()===g.query)?(t(W.id,"jumper_exact_match",!0),A.push(W),!1):(t(W.id,"jumper_exact_match",!1),g.matchesMember(W)))}),B=T.usergroups.filter(function(W){return a.prefer_exact_match&&W.handle===g.query||W.name_lc===g.query?(A.push(W),!1):g.matchesUserGroup(W)}),F=T.broadcast_keywords.filter(function(W){return a.prefer_exact_match&&W.name===g.query?(A.push(W),!1):g.matchesBroadcastKeyword(W)})),!g.only_members&&!g.only_emoji&&!g.only_app_actions){const W=d(function(te){if(!TS.interop.rules.channels.isUnknownOrNonExistent(te)){if(a.prefer_exact_match&&te.name===g.query){t(te.id,"jumper_exact_match",!0),A.push(te);return}t(te.id,"jumper_exact_match",!1);var _e=g.matchesChannel(te);_e&&(te.is_member?Q.push(te):TS.interop.rules.channels.isArchived(te)?ne.push(te):X.push(te))}},"processChannel");T.channels.forEach(W),T.enterprise_channels.forEach(W)}if(!g.only_channels&&!g.only_members&&!g.only_emoji&&!g.only_app_actions){const W=d(function(te){if(a.prefer_exact_match&&te.name===g.query){t(te.id,"jumper_exact_match",!0),A.push(te);return}t(te.id,"jumper_exact_match",!1);var _e=g.matchesGroup(te);_e&&(TS.interop.rules.channels.isArchived(te)?D.push(te):se.push(te))},"processGroup");T.groups.forEach(W),T.enterprise_groups.forEach(W),Y=T.mpims.filter(function(te){return g.matchesMpim(te)})}J=T.teams.filter(function(W){if(TS.interop.rules.teams.isUnknownOrNonExistent(W)||!_.isObject(W))return!1;var te=W.team_name||W.name||"";if(a.prefer_exact_match&&te.toLocaleLowerCase()===g.full_query)return t(W.id,"jumper_exact_match",!0),A.push(W),!1;t(W.id,"jumper_exact_match",!1);var _e=g.matchesTeam(W);return _e}),!g.only_channels&&!g.only_emoji&&!g.only_members&&(P=T.app_actions.filter(function(W){if(!_.isObject(W))return!1;var te=W.name;return a.prefer_exact_match&&te.toLocaleLowerCase()===g.full_query?(t(W.id,"jumper_exact_match",!0),A.push(W),!1):(t(W.id,"jumper_exact_match",!1),!1)})),TS.telemeter.measureAndClear("ts-sorter-matching-mark","ts-sorter-matching"),TS.telemeter.mark("ts-sorter-sorting-mark");var C,O,z;C=j.concat(Q,se,Y,B,F,M,P),a.flat||C.sort(_.partial(w,!0)),O=X.concat(J),a.flat||O.sort(_.partial(w,!0)),z=D.concat(ne),a.flat||z.sort(_.partial(w,!0));var K=C.concat(O,z);a.flat&&K.sort(_.partial(w,!0));var V=K;if(a.prefer_exact_match&&A.length>0&&(A.sort(_.partial(x,!0)),V.unshift(...A)),a.frecency&&(a.normalize=!0,TS.telemeter.mark("ts-sorter-frecency-sort-mark"),V=TS.ui.frecency.query(V,y,U,a)),a.limit&&(V=_.take(V,a.limit)),a.frecency&&(V=c(V),TS.telemeter.measureAndClear("ts-sorter-frecency-sort-mark","ts-sorter-frecency-sort")),a.print){var q=`
`;_.forEach(V,function(W){var te=a.frecency?W.model_ob:W;a.frecency&&(q+=`[${W.score}] `),n(te.id,"jumper_score")!=null&&(q+=`[${n(te.id,"jumper_score")}] `),te.is_mpim?q+=TS.mpims.legacyGetDisplayName(te):te.is_channel?q+=`#${te.name}`:te.is_group?q+=te.name:te.team_name?q+=te.team_name:te.is_usergroup?q+=`@${te.name}`:te.presence?q+=`@${te.name}`:q+=W.model_ob?W.model_ob.name:W.name,q+=`
`}),TS.info(q)}return TS.telemeter.measureAndClear("ts-sorter-sorting-mark","ts-sorter-sorting"),V},"_search"),c=d(function(y){var T=[];return TS.boot_data.page_needs_enterprise&&(y=_.uniqBy(y,function(a){return a.id})),_.forEach(y,function(a){var g;if(TS.interop.utility.looksLikeMemberId(a.id)){var A=TS.interop.members.getMemberById(a.id);A&&T.push({model_ob:A,score:a.score});return}var j=a.id.indexOf("BK")===0,Q=a.id.indexOf("V")===0;j?g=TS.model.getBroadcastKeywordById(a.id):Q?g=TS.model.getViewById(a.id):g=v(a.id),g&&T.push({model_ob:g,score:a.score})}),T},"_getFilteredMatchesForFrecency"),v=d(function(y){if(y[0]!=="E")return y[0]==="S"?TS.interop.userGroups.getUserGroupById(y):y[0]==="T"?TS.redux.teams.getTeamById(y):TS.redux.channels.getEntityById(y)},"_getModelObById"),b=d(function(y){var T;return y.is_mpim?T=_.toLower(TS.mpims.legacyGetDisplayName(y)):y.is_usergroup?T=y.handle||y.name:TS.interop.rules.members.isMember(y)?T=TS.interop.rules.members.getPrefCompliantMemberName(y):y._name_lc?T=y._name_lc:y.team_name?T=y.team_name.toLocaleLowerCase():T=y.name,T},"_getNameForComparison"),w=d(function(y,T,a){if(T.is_mpim&&!a.is_mpim)return 1;if(a.is_mpim&&!T.is_mpim)return-1;if(!T.is_mpim&&!a.is_mpim){var g=n(T.id,"jumper_score")-n(a.id,"jumper_score");if(g!==0)return g}if(T.is_mpim&&a.is_mpim){var A=n(T.id,"jumper_score")-n(a.id,"jumper_score");if(A!==0)return A;var j=TS.mpims.getMemberCount(T)-TS.mpims.getMemberCount(a);if(j!==0)return j}return x(y,T,a)},"_sortFuzzy"),x=d(function(y,T,a){var g=b(T),A=b(a);return y?TS.interop.i18n.sorter(g,A):g>A?1:A>g?-1:0},"_sortAlphabetically"),U=d(function(y,T){if(y.is_mpim){if(T.prefer_mpims_with_active_members){var a=TS.mpims.legacyGetMembersInDisplayOrder(y);return _.some(a,A=>A.deleted||A.is_suspended)?TS.ui.frecency.bonus_points.mpim_with_deactivated_member:0}return 0}var g=0;if(n(y.id,"jumper_exact_match")?(g+=TS.ui.frecency.bonus_points.exact_match,n(y.id,"emoji_exact_match")&&(g+=TS.ui.frecency.bonus_points.exact_match)):n(y.id,"emoji_score")?g+=ee(y,"emoji_score",TS.ui.frecency.bonus_points.emoji_match):TS.interop.rules.channels.isArchived(y)||TS.interop.rules.members.isDeleted(y)||TS.interop.rules.members.isSuspended(y)||(g+=ee(y,"jumper_score",TS.ui.frecency.bonus_points.fuzzy_match)),n(y.id,"jumper_previous_name_scores")&&(g+=TS.ui.frecency.bonus_points.matches_previous_name),T.prefer_channel_members&&y.presence&&T.model_ob&&R(y.id,T.model_ob)&&(g+=TS.ui.frecency.bonus_points.member_of_this_channel),y.is_starred&&(g+=TS.ui.frecency.bonus_points.starred_channel),TS.interop.rules.members.isMember(y)){const A=TS.redux.channels.getImByMemberId(y.id);A&&A.is_starred&&(g+=TS.ui.frecency.bonus_points.starred_channel)}return y.is_emoji&&(y.name==="thumbsup"||y.name==="point_up")&&(g+=1),T.self_first&&y.is_self&&(g=1/0),(y.is_channel||y.is_group)&&(TS.interop.rules.channels.isArchived(y)&&(g+=TS.ui.frecency.bonus_points.archived_channel_or_group),y.is_channel&&T.prefer_channels_user_belongs_to&&!TS.interop.rules.channels.isArchived(y)&&!R(TS.model.user.id,v(y.id))&&(g+=TS.ui.frecency.bonus_points.not_in_channel),TS.interop.rules.channels.isFromAnotherTeam(y)&&(g+=TS.ui.frecency.bonus_points.foreign_channel_or_group)),TS.interop.rules.members.isMember(y)&&(TS.interop.rules.members.isDeleted(y)||TS.interop.rules.members.isSuspended(y))&&(g+=TS.ui.frecency.bonus_points.deactivated_member),(y.is_usergroup||y.is_broadcast_keyword)&&(g+=TS.ui.frecency.bonus_points.usergroup_or_keyword),g},"_frecencyBonusPointsNormalized"),ee=d(function(y,T,a){var g=n(y.id,T);if(!_.isFinite(g))return 0;var A=.5**g;return Math.round(a*A)},"_calculateNormalizedFuzzyBonusPoints"),R=d(function(y,T){if(T.is_channel&&y===TS.model.user.id)return T.is_member;var a=TS.interop.membership.getCachedChannelMembershipInfoForUser(T.id,y);return a.is_known&&a.is_member},"_isUserIdKnownToBeMemberOfChannel")})();var o={},t=d(function(s,l,e){!s||!l||(o[s]||(o[s]={}),o[s][l]=e)},"_setMetaFieldForId"),n=d(function(s,l){if(!(!s||!l)&&!(!s||!o[s]))return o[s][l]},"_getMetaFieldForId")},167931:()=>{(function(){const o="STORAGE";TS.registerModule("storage",{version:"0.85",msgs_version:window.boot_data&&boot_data.cache_version||"unknown_version",cache_ts_version:window.boot_data&&boot_data.cache_ts_version||"unknown_version",do_compression:!TS.model.is_our_app&&typeof window.Worker<"u"&&(!window.bowser||!bowser.phantom&&!bowser.msie),test:function(){return{getLocalStorage:se,setLocalStorage:D,getKeys:x,set:X}},onStart:function(){TS.storage.onStart=function(){},TS.storage.do_compression||(TS.interop.console.info(o,"Special case: force-enabling LS compression for this session."),TS.storage.do_compression=!0),TS.storage.version+=TS.storage.do_compression?"-compressed-LZString":"";var M=e||!ne||function(){return!TS.storage.storageAvailable()&&(ee(),!TS.storage.storageAvailable())?(TS.interop.console.info(o,"TS.storage.storageAvailable() = false in onStart after flushing all our keys, so disabling"),!0):!1}();TS.has_pri[F]&&(TS.log(F,`TS.storage.onStart should_disable:${M}`),TS.log(F,`TS.storage.do_compression:${TS.storage.do_compression} (_ls.getItem('is_compressed') === 'yes'):${ne&&ne.getItem("is_compressed")==="yes"}`)),TS.ui.window_unloaded_sig.add(y),TS.ui.window_focus_changed_sig.add(T),TS.storage.setDisabled(M),X("rxn_records",null);var P=TS.storage.fetchExpandableState();TS.redux.dispatch(TS.interop.redux.features.expandables.bulkSetExpanded(P))},setDisabled:function(M){e!=M&&(M||!ne?(e=!0,ne&&ee()):(e=!1,U()),TS.log(F,`_disabled:${e}`))},storageAvailable:function(){if(!ne)return!1;try{var M="test_to_see_if_we_can_write_to_local_storage";return ne.setItem(M,"foo"),ne.removeItem(M),!0}catch{return!1}},storageSize:function(M){var P=0;if(!ne)return P;for(var C=x(),O=0,z,K,V=0;V<C.length;V+=1)O+=1,z=C[V],K=ne.getItem(z),!K&&K!==""?TS.interop.console.info(o,`${z} not measurable value, typeof:${typeof K}`):(P+=K.length,M&&TS.info(`${z}=${(K.length*2/1024).toFixed(2)}KB (total=${(P/1024).toFixed(2)}KB)`));return M&&TS.info(`total for ${O} items is ${(P/1024).toFixed(2)}KB`),P},flush:function(M){TS.has_pri[F]&&TS.log(F,"TS.storage.flush()"),ee(),M&&TS.storage.clearBufferAndCache()},clearBufferAndCache:function(){TS.has_pri[F]&&TS.log(F,"TS.storage.clearBufferAndCache()"),u={},f={},TS.compresion&&TS.compression.terminate()},fetchStorageVersion:function(){return j("storage_version")},storeStorageVersion:function(M){X("storage_version",M,!0)},fetchCacheTSStorageVersion:function(){return j("storage_cache_ts_version")},_makeMsgInputId:function(M){return`msg_input_${M}`},fetchLastMsgInput:function(M){var P=j(TS.storage._makeMsgInputId(M),null);return P==="\u4000"?(TS.interop.utility.getLogger({getState:TS.redux.getState}).error({storage_version:TS.storage.fetchStorageVersion(),ts_storage_version:TS.storage.version,is_our_app:TS.model.is_our_app,typeof_window_worker:typeof window.Worker,has_bowser:!!window.bowser},"decompress_general_compressed_fail"),""):P},fetchOldestTs:function(M){return j(l(M),null)},fetchLastEventTS:function(M){return j("last_event_ts","",M)||""},storeUIState:function(M){X("ui_state",M)},fetchExpandableState:function(){var M=j("expandable_state",{});return M&&typeof M=="object"?M:{}},fetchCustomEmoji:function(){return j("custom_emoji",null)||null},fetchStaticTranslations:function(){return j("static_translations",null)||null},storeStaticTranslations:function(M){X("static_translations",M)},fetchApps:function(){return j("apps",null)||null},fetchCmds:function(){return j("cmds",null)||null},storeFilterState:function(M){X("team_filter_state",M)},fetchFrecency:function(M){return j(`frecency_${M}`)},storeFrecency:function(M,P){X(`frecency_${M}`,P)},clearFrecency:function(M){X(`frecency_${M}`,"")},fetchLastEKMChangeTimestamp:function(){return j("last_ekm_change_ts","0")||"0"},storeLastEKMChangeTimestamp:function(M){X("last_ekm_change_ts",M)}});var t=`${window.boot_data.user_id}_`,n="channel_msgs_",s="oldest_msg_ts_",l=d(function(M){return s+M},"_makeOldestTsId"),e,i=!1,u={},f={},S=1e3,p=!1,h=1e3,c=!1,v=1e3,b=!1,w=!1,x=d(function(){var M=[];if(!ne)return M;var P=ne.length;if(!P)return M;for(var C=0;C<P;C+=1)M.push(ne.key(C));return M},"_getKeys"),U=d(function(){var M;if(!e){var P=TS.storage.fetchStorageVersion()||"",C=P.indexOf("-compressed")!=-1||ne.getItem("is_compressed")==="yes";TS.storage.do_compression&&!C?(TS.interop.console.info(o,"migrating to compressed format"),M=x(),M.forEach(function(K){var V=K.replace(t,""),q=Q(K,ne.getItem(K)),W=`converting: ${K} -> ${V} val.length: ${q==null?-1:String(q).length}`;X(V,null),X(V,q),j(V)==q?TS.has_pri[F]&&TS.log(F,`${W} SUCCESS _get(name) has a value:${!!j(V)}, and it it the same as val`):TS.error(`${W} FAILURE _get(name) !== val`)}),TS.interop.console.info(o,`migration to compressed format complete, ${M.length} migrated`),TS.storage.storeStorageVersion(TS.storage.version)):TS.has_pri[F]&&TS.log(F,"no migration needed"),ne.setItem("is_compressed",TS.storage.do_compression?"yes":"no")}var O=TS.storage.fetchCacheTSStorageVersion();TS.has_pri[F]&&TS.log(F,`storage_cache_ts_version:${O}`);var z=TS.storage.fetchStorageVersion()||"";TS.has_pri[F]&&(TS.log(F,`TS.storage.version:${TS.storage.version}`),TS.log(F,`storage_version:${z}`),TS.log(F,`TS.storage last_unload_flushing: ${j("last_unload_flushing")}`),TS.log(F,`TS.storage.storageAvailable(): ${TS.storage.storageAvailable()}`)),M=x(),TS.has_pri[F]&&TS.dir(F,M,"_getKeys()"),TS.storage.storageAvailable()?z!=TS.storage.version?(TS.log(F,`storage_version:${z} does not match TS.storage.version:${TS.storage.version} so flushing all our keys: ${M.join(", ")}`),ee()):TS.storage.fetchLastEventTS()||(TS.log(F,"TS.storage.fetchLastEventTS() is empty so flushing channel data"),R()):(TS.log(F,"TS.storage.storageAvailable() = false so flushing all our keys"),ee()),TS.storage.storeStorageVersion(TS.storage.version)},"_setUp"),ee=d(function(){x().forEach(function(M){M.indexOf(t)===0&&ne.removeItem(M)})},"_removeAllOurKeys"),R=d(function(){var M=x();TS.has_pri[F]&&TS.log(F,M,"_getKeys()");for(var P,C=0;C<M.length;C+=1)P=M[C],P.indexOf(t)===0&&(P.indexOf(n)==-1&&P.indexOf(s)==-1||(ne.removeItem(P),delete u[P]));for(P in u)P.indexOf(t)===0&&(P.indexOf(n)==-1&&P.indexOf(s)==-1||delete u[P]);f={},M=x(),TS.dir(488,M,"_getKeys()")},"_completelyEmptyAllStorage"),y=d(function(){i=!0,X("last_unload_flushing",new Date().toString(),!0),A(!0,"_windowUnloaded"),TS.compression.terminate()},"_windowUnloaded"),T=d(function(){A(!0,"_windowBlurred")},"_windowBlurred"),a=d(function(M){return typeof M=="string"||typeof M=="number"||!M?M:JSON.stringify(M)},"_prepareValForStorage"),g=d(function(M){return M==="undefined"||M==="null"?null:M},"_correctBadValsFromStorage"),A=d(function(M,P){if(!e){var C=new Date,O=Date.now(),z,K=0,V,q=TS.model&&TS.model.team&&TS.model.team.domain&&TS.boot_data.feature_tinyspeck,W,te,_e,ue,oe;for(V in u)if(!u[V].being_flushed){if(ue=a(u[V].val),ue==null)ne.removeItem(V),delete u[V],delete f[V];else try{Y(V,ue)}catch(le){TS.error(0,le),ee(),delete u[V],delete f[V];continue}if(K+=1,z=Date.now()-O,q&&TS.has_pri[F]&&TS.log(F,`_flushBuffer _ls.setItem ${V}: ${z}ms ${u[V]&&u[V].val&&u[V].val.toString?u[V].val.toString().substr(0,100):"NULL?"}`),!M&&(W=new Date-C,!b&&W>v)){b=!0,_e=new Date;try{te=TS.storage.storageSize()}catch{}_e=new Date-_e,oe=`Took ${W}ms for ${K} item (!all case) (threshold is ${v} ms). Key: ${V}. Buffer length: ${u[V]&&u[V].val&&u[V].val.toString()?u[V].val.toString().length:"unknown (not a string)"}. localStorage size: ${te||"unknown"}. Time to read LS size: ${_e}`,TS.info(`_flushBuffer exceeded slow write threshold: ${oe}`)}if(u[V]&&(u[V].being_flushed=!0),!M){TS.has_pri[F]&&TS.log(F,`_flushBuffer: Wrote one item. why: ${P}`);return}f={}}if(K&&!w&&(W=new Date-C,W>v)){w=!0;try{te=TS.storage.storageSize()}catch{}oe=`Took ${W}ms for ${K} items (threshold is ${v} ms). localStorage size: ${te}. App open for ${((Date.now()-TS.boot_data.start_ms)/1e3/60).toFixed(2)} min. why: ${P}`,TS.info(`_flushBuffer exceeded slow write threshold (all case): ${oe}`)}TS.has_pri[F]&&(K===0?TS.log(F,"_flushBuffer: Nothing to save."):TS.log(F,`_flushBuffer: Saved ${K}${K===1?" item":" items"} why: ${P}`))}},"_flushBuffer"),j=d(function(M,P,C){var O=t+M;if(C&&TS.info(`_get name:${M} k:${O} disabled:${e} _buffer["${O}"].val:${u[O]&&u[O].val}`),e||O in u)return u[O]&&u[O].val||P;if(f.hasOwnProperty(O))return f[O];var z=Q(O,B(O,ne.getItem(O)),P,C);return f[O]=z,z},"_get"),Q=d(function(M,P,C,O){var z=new Date,K=g(P);O&&TS.info(`_get _correctBadValsFromStorage(_ls.getItem(k)) k:${M} typeof result:${typeof K} /^[{[]/.test(result):${/^[{[]/.test(K)}`);var V;if(K&&typeof K=="string"&&/^[{[]/.test(K)&&(K=TS.utility.parseJSONOrElse(K)||K),K=K||(C!==void 0?C:null),z=new Date-z,!p&&z>S){p=!0;try{V=TS.storage.storageSize()}catch{}var q=`_get took longer than threshold: Took ${z}ms to read ${M} (theshold is ${S}ms), length = ${K&&!isNaN(K.length)?K.length:"unknown"}. Storage size: ${V}`;TS.info(q)}return K},"_convertTypeForFetch"),X=d(function(M,P,C,O){var z=!1,K=new Date,V,q=t+M;if(u[q]={val:P,being_flushed:!1},f[q]=u[q].val,O&&TS.info(`_set immediate:${C} name:${M} k:${q} disabled:${e} do_compression:${TS.storage.do_compression} _buffer["${q}"].val:${u[q].val}`),C){if(!e){var W=a(P);if(W==null)ne.removeItem(q),delete u[q];else try{Y(q,W,C)}catch{TS.interop.console.warn(`_set _ls.setItem failed, flushing. TS.storage.storageSize():${TS.storage.storageSize(!1)}`),z=!0}}if(O&&TS.info(`_set failed:${z}`),!z)if(O&&TS.info(`_set _buffer["${q}"]:${u[q]&&JSON.stringify(u[q])}`),K=new Date-K,K>h){if(TS.interop.console.info(o,`_set immediately ${M}: ${K}ms ${P&&P.toString?P.toString().substr(0,100):"NULL?"}`),!c){c=!0;try{V=TS.storage.storageSize()}catch{}var te=`_set exceeded slow set threshold (immediate): Took ${K}ms to write ${q} (theshold is ${h}ms), length = ${P&&!isNaN(P.length)?P.length:"unknown"}. Storage length: ${V}`;TS.info(te)}}else TS.has_pri[F]&&TS.log(F,`_set GOOD immediately: ${C} ${M}: ${K}ms`,P)}},"_set"),ne=window.localStorage,se=d(function(){return ne},"_getLs"),D=d(function(M){ne=M},"_setLs"),Y=d(function(M,P,C){if(P=String(P),TS.storage.do_compression){TS.compression.compress(M,P,C||i,J);return}J({k:M,str:P})},"_compressAndStore"),J=d(function(M){ne.setItem(M.k,M.str);var P=d(function(C){var O=ne.getItem(M.k);if(O===M.str){C>1&&TS.interop.console.info(o,`${M.k} now saved, try #${C}`),delete u[M.k],delete f[M.k];return}if(C>1&&(!u[M.k]||u[M.k].val!=M.str)){TS.error(`buffer changed for ${M.k} so we don't care anymore, a new value is being set for it, try #${C}`);return}TS.error(`WTF not saved, try #${C} ${M.k} ${(M.str||"").length} typeof ob.str:${typeof M.str} from_ls:${typeof O}`),ne.setItem(M.k,M.str),setTimeout(P,1e3,C+1)},"testAndFinishOrTryAgain");P(1)},"_afterCompress"),B=d(function(M,P){if(!TS.storage.do_compression)return P==="\u4000"?(TS.interop.utility.getLogger({getState:TS.redux.getState}).error({storage_version:TS.storage.fetchStorageVersion(),ts_storage_version:TS.storage.version,is_our_app:TS.model.is_our_app,typeof_window_worker:typeof window.Worker,has_bowser:!!window.bowser},"decompress_empty_string_fail"),""):P;var C=Date.now();P&&(P=LZString.decompress(P));var O=Date.now()-C;return P&&TS.has_pri[F]&&TS.log(F,`${M} took ${O}ms to _decompress str.length: ${P.length}`),P==="\u4000"?(TS.interop.utility.getLogger({getState:TS.redux.getState}).error({storage_version:TS.storage.fetchStorageVersion(),ts_storage_version:TS.storage.version,is_our_app:TS.model.is_our_app,typeof_window_worker:typeof window.Worker,has_bowser:!!window.bowser},"decompress_double_compressed_fail"),""):P},"_decompress"),F=488})()},228867:()=>{(function(){TS.registerModule("team",{team_name_changed_sig:new signals.Signal,onStart:function(){TS.team.team_name_changed_sig.add(t)},ensureTeamProfileFields:function(){return o||(o=TS.interop.api.call("team.profile.get").then(function(n){TS.redux.teams.upsertTeam(_.assign({id:TS.boot_data.team_id},{profile:n.data.profile}))}),o)},getTeamProfileFieldById:function(n){TS.model.team.profile.fields.length||TS.warn("Ensure profile fields exist before calling getTeamProfileFieldById");for(var s=0;s<TS.model.team.profile.fields.length;s+=1)if(TS.model.team.profile.fields[s].id===n)return TS.model.team.profile.fields[s];return null},getVisibleTeamProfileFields:function(){return TS.model.team.profile.fields.length||TS.warn("Ensure profile fields exist before calling getVisibleTeamProfileFields"),TS.model.team.profile.fields.filter(function(n){return!n.is_hidden})},getHiddenTeamProfileFields:function(){return TS.model.team.profile.fields.length||TS.warn("Ensure profile fields exist before calling getHiddenTeamProfileFields"),TS.model.team.profile.fields.filter(function(n){return n.is_hidden})},sortTeamProfileFieldsByOrdering:function(n){if(!n||!n.length)TS.warn("Ensure profile fields exist before calling sortTeamProfileFieldsByOrdering");else return _.clone(n).sort(function(s,l){return s.ordering-l.ordering})},getVisibleTeamProfileFieldsForMember:function(n,s){return n&&n.profile?(TS.model.team.profile.fields.length||TS.warn("Ensure profile fields exist before calling getVisibleTeamProfileFieldsForMember"),TS.model.team.profile.fields.filter(function(l){return(s||_.get(n.profile,["fields",l.id,"value"]))&&!l.is_hidden}).map(function(l){var e=_.get(n.profile,["fields",l.id,"value"]),i=_.get(n.profile,["fields",l.id,"alt"]),u=e&&l.type==="date"?TS.interop.datetime.convertISOtoUTCReadableDate(e):i;return $.extend(!0,{value:e,alt:u},l)})):[]}});var o,t=d(function(){$("#team_name").text(TS.model.team.name),document.title=document.title.replace(TS.model.last_team_name,TS.model.team.name),TS.model.last_team_name=TS.model.team.name},"_handleTeamRename")})()},710338:()=>{(function(){TS.registerModule("teams",{rename_sig:new signals.Signal,changed_icon_sig:new signals.Signal,onStart:function(){TS.teams.changed_icon_sig.add(n),TS.teams.rename_sig.add(n)},getTeamById:function(p,h){return _.isString(p)?TS.redux.teams.getTeamById(p,h):null},isPartOfMyOrg:function(p){if(!_.isObject(p))return!1;const h=S();return h&&h===p.enterprise_id},getAllEnterpriseTeams:function(){return _.pickBy(TS.redux.teams.getAllTeams(),TS.teams.isPartOfMyOrg)},getEnterpriseTeams:function(p){p=_.isObject(p)?p:{};var h=TS.teams.getAllEnterpriseTeams();return p.only_member_of&&(h=_.pickBy(h,c=>TS.model.user.enterprise_user.teams.indexOf(c.id)>-1)),p.exclude_current_team&&(h=_.omitBy(h,c=>c.id===TS.model.team.id)),h},ensureTeamsArePresent:function(p){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"TS.teams.ensureTeamsArePresent";if(!_.isArray(p))return Promise.reject(Error("t_ids is not an array"));var c=_.filter(p,function(v){var b=!1,w=TS.teams.getTeamById(v,b);return!w||w._other_account});return c.length?t(c,h):Promise.resolve()},ensureTeamsInDataArePresent:function(p){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"TS.teams.ensureTeamsInDataArePresent";var c=TS.interop.utility.extractAllTeamIds(p);return TS.teams.ensureTeamsArePresent(c,h)},promiseToSearchTeams:function(p){return S()?Promise.resolve(p).then(function(h){return h?(h=e(h),h._is_new||h.num_remaining>0?u(h):Promise.resolve(h)):Promise.reject(new Error("No search parameters provided"))}):Promise.resolve(p)},test:function(){var p={_getSharedTeamIdsForMember:l};return Object.defineProperty(p,"_readyTeamSearcher",{get:function(){return e},set:function(h){e=h}}),Object.defineProperty(p,"_promiseToSearchTeamsWorker",{get:function(){return f},set:function(h){f=h}}),Object.defineProperty(p,"_buildPromiseToSearchTeamsArguments",{get:function(){return i},set:function(h){i=h}}),Object.defineProperty(p,"_getTeamsByIdFromApi",{get:function(){return t},set:function(h){t=h}}),p}});const o=100;var t=d(function(p,h){if(!_.isArray(p))return Promise.reject(Error("t_ids is not an array"));const c=250,v=_.chunk(p,c);return Promise.map(v,b=>TS.interop.api.callExpedited("team.info",{teams:b,_x_reason:h}).then(w=>{var x=[];return w.data.teams.forEach(function(U){U&&U.id&&U.id.charAt(0)==="E"?TS.warn(`EVALUE-1721: team.info response included an Enterprise org of ${U.id}. NOT adding to model. Client requested teams=${b.join(", ")}.`):x.push(TS.redux.teams.upsertTeam(U))}),x}).catch(w=>{TS.error(`_getTeamsByIdFromApi failed with ${w.data&&w.data.error||"unknown error"}, when requesting teams=${b.join(", ")}`)})).then(b=>_.compact(_.flatten(b)))},"_getTeamsByIdFromApi"),n=d(function(p){p.id!==TS.model.team.id&&s(p)},"_handleTeamChange"),s=d(function(p){if(_.isObject(p)){var h=TS.utility.teams.getMembersForTeam(p);h.length&&_.forEach(h,function(c){TS.members.changed_profile_sig.dispatch(c)})}},"_updateTeamMembers"),l=d(function(p){return p?_.get(p,"enterprise_user")?_.intersection(_.get(p,"enterprise_user.teams",[]),_.get(TS.model.user,"enterprise_user.teams",[])):_.get(p,"team_id")===_.get(TS.model.user,"team_id")?[p.team_id]:[]:[]},"_getSharedTeamIdsForMember"),e=d(function(p){return p=p||{},p._is_new=!1,p.hasOwnProperty("query")||(p.query=""),p.hasOwnProperty("additional_args")||(p.additional_args={}),p._last_query!==p.query&&(p.hasOwnProperty("_searcher_p")&&p._searcher_p.cancel(),p._last_query=p.query,p._is_new=!0,p._cursor_mark=null,p.items=[]),_.isEqual(p._last_additional_args,p.additional_args)||(p.hasOwnProperty("_searcher_p")&&p._searcher_p.cancel(),p._last_additional_args=_.assign({},p.additional_args),p._is_new=!0,p._cursor_mark=null,p.items=[]),p},"_readyTeamSearcher"),i=d(function(p){var h=[TS.utility.search.makeClause("is","team")];p.query&&h.push(TS.utility.search.makeClause("fuzzy",p.query)),_.get(p,"included_ids.length")&&(p.included_ids.length===1?h.push(TS.utility.search.makeClause("id",_.head(p.included_ids))):h.push(TS.utility.search.makeConjunction("or",_.map(p.included_ids,v=>TS.utility.search.makeClause("id",v)))));var c={count:p.max_api_results||o,query:h.length>1?JSON.stringify(TS.utility.search.makeConjunction("and",h)):JSON.stringify(_.head(h))};return _.isEmpty(_.get(p,"additional_args"))||(c=_.merge(c,p.additional_args)),p._cursor_mark&&(c.cursor_mark=p._cursor_mark),c},"_buildPromiseToSearchTeamsArguments"),u=d(function(p){var h=d(function(){return f(p)},"promiseToSearch");return p._is_new?p._searcher_p=h():p._searcher_p=p._searcher_p.then(h),p._searcher_p},"_promiseToSearchTeams"),f=d(function(p){var h=_.get(p,"endpoint","search.enterprise"),c=_.get(p,"response_key","items");return TS.interop.api.call(h,i(p)).then(function(v){if(p._cursor_mark||(p.num_remaining=v.data.num_found,p.num_found=v.data.num_found),!v.data[c].length)return Promise.resolve(p);p.num_remaining-=v.data[c].length,p._cursor_mark=v.data.next_cursor_mark;var b=_.keyBy(p.omitted_ids,_.identity),w=_(v.data[c]).filter(x=>!b[x.id]).map(x=>TS.redux.teams.upsertTeam(x)).value();return p.num_found-=v.data[c].length-w.length,p.items=_.concat(p.items,w),Promise.resolve(p)})},"_promiseToSearchTeamsWorker"),S=d(function(){return _.get(TS.model,"team.enterprise_id",TS.boot_data.enterprise_id)},"_getEnterpriseId")})()},974829:()=>{(function(){TS.registerModule("templates.builders",{makeChannelPrefix:function(t){return!t||t.is_mpim||t.is_im?"":t.is_group||t.is_private?'<ts-icon class="ts_icon_lock"></ts-icon>':t.is_channel?"#":""},makeModelObNameForDisplay:function(t,n){if(!t)return"ERROR: MISSING CHANNEL";n=n||{};var s=_.trim(TS.templates.builders.maybeMakeSharedIcon(t,n.show_tooltip,n.tooltip_position,n.inherit_font_size)),l=TS.templates.builders.makeChannelPrefix(t),e;t.is_im?e=TS.interop.rules.members.getPrefCompliantMemberNameById(t.user):t.is_mpim?e=TS.mpims.legacyGetDisplayName(t):e=t.name,e=_.escape(e);var i="";return!n.allow_wrap&&n.overflow_ellipsis?i+='<span class="no_wrap overflow_hidden">':n.allow_wrap?n.allow_wrap&&(i+='<span class="break_word">'):i+='<span class="no_wrap">',n.overflow_ellipsis&&(i+='<span class="overflow_ellipsis">'),i+=n.omit_prefix?"":l,i+=e,n.overflow_ellipsis&&(i+="</span>"),i+=`</span>${s}`,i},makeChannelLink:function(t,n){if(!t)return"ERROR: MISSING CHANNEL";n=n||{};var s=t.id,l=TS.utility.shouldLinksHaveTargets()?`target="/archives/${s}"`:"",e=TS.templates.builders.makeModelObNameForDisplay(t,n);return n.overflow_ellipsis?`<a href="/archives/${s}" ${l} class="channel_link display_flex flex_wrap_none" data-channel-id="${t.id}">${e}</a>`:`<a href="/archives/${s}" ${l} class="channel_link" data-channel-id="${t.id}">${e}</a>`},maybeMakeSharedIcon:function(t,n,s,l){var e="";if(TS.interop.rules.channels.isOrgShared(t)&&!t.is_mpim&&!t.is_im)e=TS.templates.shared_channel_icon();else if(TS.interop.rules.channels.isExternallySharedChannel(t)&&!t.is_mpim&&!t.is_im){let i=TS.interop.rules.channels.getConnectedTeamIds(TS.redux.getState(),t);i.length===0&&(i=void 0),e=TS.templates.shared_channels_icon({model_ob:t,tooltip:_.isUndefined(n)||n,tooltip_position:s,connectedTeamIds:i,inherit:l})}return new Handlebars.SafeString(e)},makeGroupLink:function(t,n){if(!t)return"ERROR: MISSING GROUP";n=n||{};var s=TS.utility.shouldLinksHaveTargets()?`target="/archives/${t.id}"`:"",l=TS.templates.builders.makeModelObNameForDisplay(t,n);return n.overflow_ellipsis?`<a href="/archives/${t.id}" ${s} class="group_link display_flex flex_wrap_none" data-group-id="${t.id}">${l}</a>`:`<a href="/archives/${t.id}" ${s} class="group_link" data-group-id="${t.id}">${l}</a>`},makeMemberPreviewLink:function(t,n){if(!t)return"";n!==!0&&(n=!1);var s=TS.templates.builders.makeMemberColorClass(t),l,e;return t.is_service?(e=TS.utility.shouldLinksHaveTargets()?`target="/services/${t.id}"`:"",s+=" app_preview_link",l=`<a href="/services/${t.id}" ${e} data-bot-id="${t.id}" class="message_sender service_link ${s}">`):(e=TS.utility.shouldLinksHaveTargets()?`target="/team/${t.id}"`:"",s+=t.is_bot?" app_preview_link":" member member_preview_link",s+=` ${TS.templates.builders.makeMemberTypeBadgeClass(t)}`,l=`<a href="/team/${t.id}" ${e} class="message_sender ${s}" data-member-id="${t.id}">`),n&&t.id==TS.model.user.id?l+=TS.interop.i18n.t("You","templates_builders")():l+=TS.interop.rules.members.getPrefCompliantMemberName(t,!0),l+=TS.templates.builders.makeMemberTypeBadgeCompact(t,!1),l+="</a>",(t.is_bot||t.is_service)&&(l+=`<span class="c-app_label">${TS.interop.i18n.t("APP","templates_builders")()}</span>`),t.is_unknown&&(l=TS.templates.unknown_member({id:t.id})),l},legacyShowDraftIcon:function(t){if(!_.isObject(t))return!1;if(TS.interop.utility.looksLikeMemberId(t.id)){var n=TS.redux.channels.getImByMemberId(t.id);if(!n)return!1}var s=n||t,l=s.last_msg_input,e=s.id,i=TS.shared.legacyGetActiveModelOb();if(i){var u=i.id;u&&u==e&&(l=null)}return s.is_channel&&(TS.interop.rules.channels.isArchived(s)||!s.is_member)&&(l=null),s.is_group&&!s.is_mpim&&TS.interop.rules.channels.isArchived(s)&&(l=null),TS.interop.rules.user.canPostInChannel(s)||(l=null),!!_.trim(l)},makeProfileImage:function(t,n){if(_.isString(t)){var s=TS.interop.members.getMemberById(t);s?t=s:t=TS.interop.bots.getBotById(t)}if(!t)return!1;var l=n.hash.is_lazy||!1,e=t.profile||t.icons||{},i=n.hash.title||!1,u;e.emoji?u="64":u="48";var f=n.hash.size||u,S=Object.keys(TS.constants.avatar_size_map).reduce(function(b,w){return w===f&&c(e,w)?w:b},u),p={entity:t,size:f,css_classes:v(t,f),image:h(t,c(e,S)),is_lazy:l,is_targettable:TS.utility.shouldLinksHaveTargets(),title:i};function h(b,w){var x=[];return x.push(`url('${w}')`),x.join(",")}d(h,"_formatImageURI");function c(b,w){var x=`image_${w}`;return b.hasOwnProperty(x)?TS.environment.is_retina&&b[TS.constants.avatar_size_map[w].retina]||b[TS.constants.avatar_size_map[w].standard]:!1}d(c,"_getImage");function v(b,w){var x=[];return x.push(`thumb_${w}`),b.is_bot?(x.push("is_bot"),x.push("app_preview_link")):x.push("member_preview_link"),x.join(" ")}return d(v,"_getClasses"),new Handlebars.SafeString(TS.templates.member_profile_image(p))},makeMemberPreviewLinkImage:function(t,n,s,l,e,i,u){var f;if(typeof t=="object"?f=t:f=TS.redux.members.getPotentiallyUnknownMemberById(t),!f||!f.profile)return"";s=s===!0,l=l===!0||TS.utility.members.isMemberEKMRevoked(f),e=e===!0,i=i===!0,u=typeof u=="string"?u:!1,t==="USLACKBOT"&&u&&(f=TS.utility.slackbot.getWithFeels(u));var S=TS.templates.builders.getImageStyleForMemberPreviewImage(f,n,s),p={omit_link:l,omit_badge:e,lazy:s,member:f,size:n,include_restricted_overlay:!i||!0,bg_img_style:S};return TS.templates.member_preview_link_image(p)},getImageStyleForMemberPreviewImage:function(t,n,s){var l,e,i;switch(e="background-image: ",i=[],n){case 20:TS.environment.is_retina?l=t.profile.image_48:l=t.profile.image_24;break;case 24:TS.environment.is_retina?l=t.profile.image_48:l=t.profile.image_24;break;case 32:TS.environment.is_retina?l=t.profile.image_72:l=t.profile.image_32;break;case 36:TS.environment.is_retina?l=t.profile.image_72:l=t.profile.image_48;break;case 48:TS.environment.is_retina?l=t.profile.image_72:l=t.profile.image_48;break;case 72:TS.environment.is_retina?l=t.profile.image_192:l=t.profile.image_72;break;case 192:TS.environment.is_retina?l=t.profile.image_512||t.profile.image_192:l=t.profile.image_192;break;case 512:TS.environment.is_retina?l=t.profile.image_1024||t.profile.image_512||t.profile.image_192:l=t.profile.image_512||t.profile.image_192;break;default:TS.environment.is_retina?l=t.profile.image_72:l=t.profile.image_48;break}if(i.push(`url('${l}')`),n===512){var u=TS.environment.is_retina?t.profile.image_72:t.profile.image_48;i.push(`url('${u}')`)}return s?e=i.length?i.join(", "):"":e=i.length?e+i.join(", "):"",e},makePendingUserImage:function(t,n){if(!t||!n)return"";var s=48;n===36&&(s=72);var l=`/img/new_channel_modal/airplane_${s.toString()}.png`,e=`url('${vvv(l)}')`,i={restricted:t.invite_prefs&&t.invite_prefs.type==="restricted",img_url:e,size:n};return TS.templates.pending_user_image(i)},newWindowName:function(){return TS.boot_data.app==="web"||TS.boot_data.app==="calls"?"_self":`new_${o.toString()}`},getBotName:function(t){var n=t.username;if(!n){var s=TS.redux.bots.getBotByMsg(t);s&&s.name&&(n=s.name)}return n},strBuilder:function(t,n){return t.replace(/\${([a-z_]+)}/g,function(s,l){return l.indexOf("_html")>-1?n[l]:_.escape(n[l])})},atLabel:function(t){t==="group"&&(t="channel");var n=(_.keyBy(TS.interop.broadcast_keywords.getAllBroadcastKeywords(),"ms_name")[t]||{}).name||"channel";return`@${n}`},makeMemberTypeBadgeClass:function(t){return!TS.boot_data.page_needs_enterprise||!t.is_restricted?"":"has_member_type_badge"},makeMemberColorClass:function(t){var n="color_";return t?n+=`${t.id} color_${t.color}`:n+="unknown",n},makeMemberTypeBadgeCompact:function(t,n){if(!TS.boot_data.page_needs_enterprise)return"";typeof n!="boolean"&&(n=!1);var s={icon_class:"",with_tooltip:n,tooltip:{member_type:"",type_description:""}},l=TS.boot_data.page_needs_enterprise?TS.interop.i18n.t("organization directory","templates_builders")():TS.interop.i18n.t("workspace directory","templates_builders")();return t.isExternal?"":t.is_ultra_restricted?(s.icon_class="ts_icon_single_channel_guest",s.tooltip.member_type=TS.interop.i18n.t("Single-Channel Guests","templates_builders")(),s.tooltip.type_description=TS.interop.i18n.t("see a partial {directory_name} and can only access messages and files from the channel they belong to.","templates_builders")({directory_name:l}),TS.templates.member_type_icon(s)):t.is_restricted?(s.icon_class="ts_icon_restricted_user",s.tooltip.member_type=TS.interop.i18n.t("Multi-Channel Guests","templates_builders")(),s.tooltip.type_description=TS.interop.i18n.t("see only a partial {directory_name} and can only access messages and files from selected channels.","templates_builders")({directory_name:l}),TS.templates.member_type_icon(s)):""},getMemberTypeClass:function(t){return t.is_restricted?" ra":""},loadingHTML:function(){return TS.templates.infinite_spinner({color:"white",size:"medium"})},proxyImgUrlsForEmails:function(t){t.find("img").each(function(){var n=$(this).attr("src"),s=$(this).attr("width"),l=$(this).attr("height"),e;s&&l?e=TS.utility.getImgProxyURL(n,s,l):e=TS.utility.getImgProxyURL(n),$(this).attr("src",e)})},test:function(){var t={};return t}});var o=Date.now()})()},399544:()=>{(function(){TS.registerModule("templates.helpers",{onStart:function(){TS.templates.helpers.register()},register:function(){Handlebars.registerHelper("debugger",function(){debugger}),Handlebars.registerHelper("i18n_ns",function(e){if(!_.isObject(this)){TS.warn(`Cannot set i18n namespace "${e}". Chances are you\u2019ve inadvertently changed the context in a Handlebars partial to something that\u2019s not an object.`);return}this._i18n_ns&&(this._i18n_ns_history?this._i18n_ns_history.push(this._i18n_ns):this._i18n_ns_history=[this._i18n_ns]),this._i18n_ns=e}),Handlebars.registerHelper("_i18n_ns_end",function(){this._i18n_ns_history&&this._i18n_ns_history.length&&(this._i18n_ns=this._i18n_ns_history.pop())}),Handlebars.registerHelper("i18n_img",function(e){var i=e.fn(this),u=e&&e.hash&&e.hash.locales?e.hash.locales:null;return u&&(u=u.replace(/\s/g,""),u.split(",").indexOf(TS.interop.i18n.locale)>-1&&(i=i.replace(/(\..+$)/,`.${TS.interop.i18n.locale}$1`))),i}),Handlebars.registerHelper("t",function(e){var i;typeof e=="string"?(i=e,e=arguments[1]):i=e.fn();var u;e.hash.ns!==void 0?u=e.hash.ns:this._i18n_ns!==void 0?u=this._i18n_ns:u=e.data.root&&e.data.root._i18n_ns?e.data.root._i18n_ns:"";var f=this;_.isObject(f)||(f={this:f});var S={},p;_.forOwn(e.hash,function(x,U){S[U]=f[U],f[U]=Handlebars.Utils.escapeExpression(x)});var h=i.match(/{[^\s}]+}/g);if(h&&h.length){var c=d(function(x){var U=x.split(".");if(U.length>1){var ee=0,R=U.length,y=f;for(ee;ee<R;ee+=1)if(y=y[U[ee]],y===void 0)return;return y}return f[x]},"getValue"),v,b=0,w=h.length;for(b;b<w;b+=1)p=h[b].slice(1,-1),e.hash[p]===void 0&&(v=c(p),v!==void 0&&(S[p]=f[p],f[p]=Handlebars.Utils.escapeExpression(v)))}return e.hash.debug&&(TS.info("debug handlerbars t helper"),TS.info(this)),f.__handlebars=!0,i=TS.interop.i18n.t(i,u)(f),_.forOwn(S,function(x,U){f[U]=x}),i}),Handlebars.registerHelper("zdLocale",function(){return TS.interop.i18n.zdLocale()}),Handlebars.registerHelper("exampleEmail",function(e){return TS.utility.exampleEmailAddress(e)}),Handlebars.registerHelper("convertTimestampToMilliseconds",function(e){return e*1e3}),Handlebars.registerHelper("listify",function(e,i){i.hash.map&&(e=_.map(e,i.hash.map));var u=_.get(i.hash,"conjunction"),f=_.get(i.hash,"strong"),S=_.get(i.hash,"no_escape"),p=TS.interop.i18n.listify(e,{conj:u,strong:f,noEscape:S});return new Handlebars.SafeString(p.join(""))}),Handlebars.registerHelper("isClient",function(e){return TS.boot_data.app==="client"?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isChrome",function(e){return TS.model.is_chrome_desktop||TS.model.is_chrome_mobile?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isWeb",function(e){return TS.boot_data.app==="web"||TS.boot_data.app==="space"||TS.boot_data.app==="calls"?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isMac",function(e){return TS.model.is_mac?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isWin",function(e){return TS.model.is_win?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isLin",function(e){return TS.model.is_lin?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isOurApp",function(e){return TS.model.is_our_app?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("feature",function(e){var i=e.hash.flag;return TS.qs_args[i]==1||TS.boot_data[i]==1?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("pageNeedsEnterprise",function(e){return TS.boot_data.page_needs_enterprise?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isChannelRequired",function(e,i){return TS.interop.rules.channels.isRequired(e)?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("experiment",function(e){var i=e.hash.name,u=e.hash.group||"treatment";return TS.interop.experiments.getGroupForUser(i)===u?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("stripWhitespace",function(e){return e.replace(/\s+/g,"")}),Handlebars.registerHelper("cash",function(e){var i=e.hash.all_digits||!1,u=e.hash.currency_code||"USD",f=parseInt(e.hash.value,10);return TS.interop.currency.formatCurrency(f,u,{displayTrailingZeroes:i})}),Handlebars.registerHelper("possessive",function(e){return TS.interop.i18n.possessive(e)}),Handlebars.registerHelper("fullPossessiveString",function(e){return TS.interop.i18n.fullPossessiveString(e)}),Handlebars.registerHelper("toLowerCase",function(e){return e.toLowerCase()}),Handlebars.registerHelper("initialsSafe",function(e){var i=TS.interop.rules.teams.getTeamInitials(e,{limit:2});return new Handlebars.SafeString(i)}),Handlebars.registerHelper("json",function(e){return typeof e=="object"&&e!==null&&e.name==="json"?JSON.stringify(this):JSON.stringify(e)}),Handlebars.registerHelper("currentTeamName",function(){return _.escape(_.get(TS.model.team,"name",""))}),Handlebars.registerHelper("currentTeamNameSafe",function(){return new Handlebars.SafeString(_.escape(_.get(TS.model.team,"name","")))}),Handlebars.registerHelper("isSlackbot",function(e){return TS.interop.rules.members.isSlackbot(e)}),Handlebars.registerHelper("convertFilesize",function(e){return TS.interop.utility.convertFilesize(e)}),Handlebars.registerHelper("roundToThree",function(e){return TS.utility.roundToThree(e)}),Handlebars.registerHelper("toDate",function(e){return TS.interop.datetime.formatDate(e,"{date_num}",{customFormat:"YYYY-MM-DD, LT"})}),Handlebars.registerHelper("toCalendarDate",function(e){return TS.interop.datetime.toCalendarDate(e)}),Handlebars.registerHelper("toCalendarDateOrNamedDay",function(e){return TS.interop.datetime.toCalendarDateOrNamedDay(e)}),Handlebars.registerHelper("toCalendarDateIfYesterdayOrToday",function(e){return TS.interop.datetime.toCalendarDateIfYesterdayOrToday(e)}),Handlebars.registerHelper("toCalendarDateOrNamedDayShort",function(e){return TS.interop.datetime.toCalendarDateOrNamedDay(e,{shortenMonth:!0})}),Handlebars.registerHelper("toTime",function(e,i,u){return(!e||_.isObject(e))&&(e=window.moment().unix()),TS.interop.datetime.formatDate(e,"{time}",{do24hrTime:TS.utility.date.do24hrTime(),includeMeridiem:i!==!1,includeSeconds:u===!0})}),Handlebars.registerHelper("toTimeAgo",function(e){return TS.interop.datetime.toTimeAgo(e,{alwaysAgo:!0})}),Handlebars.registerHelper("toTimeDuration",function(e){return TS.interop.datetime.toTimeDuration(e)}),Handlebars.registerHelper("toHour",function(e){return TS.interop.datetime.toHour(e)}),Handlebars.registerHelper("shouldShowMemberTimezone",function(e){return e.tz&&!e.is_slackbot&&!e.is_bot}),Handlebars.registerHelper("memberLocalTime",function(e){var i=e&&e.tz?e.tz:"America/Los_Angeles",u=TS&&TS.boot_data&&TS.boot_data.dst_offsets&&TS.boot_data.dst_offsets[e.tz]&&TS.boot_data.dst_offsets[e.tz].tz_offset?TS.boot_data.dst_offsets[e.tz].tz_offset:-25200,f=TS.interop.datetime.memberLocalTime(Date.now(),{timeZone:i,timeZoneOffset:u,do24hrTime:TS.utility.date.do24hrTime()}),S=TS.interop.i18n.t('<span class="timezone_value">{local_time}</span> local time',"date_utilities")({local_time:f});return new Handlebars.SafeString(S)}),Handlebars.registerHelper("isToday",function(e,i){return TS.interop.datetime.isToday(TS.interop.datetime.toDateObject(e))?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("if_equal",function(e,i){return i=o(i),e==i.hash.compare?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("if_not_equal",function(e,i){return i=o(i),e!=i.hash.compare?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("if_gt",function(e,i){return i=o(i),e>i.hash.compare?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("if_lt",function(e,i){return i=o(i),e<i.hash.compare?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("or",function(e,i,u){return u=o(u),e||i?u.fn(this):u.inverse(this)}),Handlebars.registerHelper("and",function(e,i,u){return u=o(u),e&&i?u.fn(this):u.inverse(this)}),Handlebars.registerHelper("foreach",function(e,i){return i.inverse&&!e.length?i.inverse(this):e.map(function(u,f){var S={index:f,value:u,length:e.length};return S.first=f===0,S.last=f===e.length-1,i.fn(S)}).join("")}),Handlebars.registerHelper("repeat",function(e,i){for(var u="",f=0;f<e;f+=1)u+=i.fn(f);return u}),Handlebars.registerHelper("newWindowName",TS.templates.builders.newWindowName),Handlebars.registerHelper("truncate",function(e,i){var u=truncate(e,i);return u.replace(/&#64;/g,"@")}),Handlebars.registerHelper("truncateToNearestWordBoundary",TS.utility.truncateToNearestWordBoundary),Handlebars.registerHelper("proxyImgUrls",function(e){var i=$(`<div>${e}</div>`);return TS.templates.builders.proxyImgUrlsForEmails(i),i.html()}),Handlebars.registerHelper("isArchived",function(e){return TS.interop.rules.channels.isArchived(e)}),Handlebars.registerHelper("isEnterpriseTeam",function(e){return TS.boot_data.page_needs_enterprise?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("memberIsUnavailable",function(e,i){return i=o(i),TS.interop.rules.members.isUnavailable(TS.redux.getState(),e)?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("isModelObExtShared",function(e,i){return TS.interop.utility.isModelObjectExternal(e)?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("shouldUseInitialsIcon",function(e,i,u){return e&&e.icon&&(e.icon.image_default||i)?u.fn(this):u.inverse(this)}),Handlebars.registerHelper("makeTeamNameList",function(e,i){if(i=i||{},i=i.hash||i,!e)return"";var u=_.map(e,S=>TS.teams.getTeamById(S)).map(S=>TS.interop.rules.teams.isUnknown(S)?TS.templates.unknown_team({id:S.id,subtler:i.subtler}):_.escape(TS.interop.rules.teams.getTeamDisplayName(S))),f=TS.interop.i18n.listify(u,{...i,noEscape:!0}).join("");if(f)return new Handlebars.SafeString(f)}),Handlebars.registerHelper("mpimMemberCount",function(e){return TS.mpims.getMemberCount(e)}),Handlebars.registerHelper("mpimDisplayName",function(e,i,u,f,S){i=i===!0,S=S===!0;var p=TS.mpims.legacyGetDisplayName(e,i,u===!0,f,S);return i||S?new Handlebars.SafeString(p):p}),Handlebars.registerHelper("currentUserId",function(){return TS.model.user.id}),Handlebars.registerHelper("makeMemberPresenceIcon",function(e){return TS.warn("Presence icons should not be used outside of the client application, because they rely on a WS connection to keep presence up to date. Rendering anyway, but be careful out there!"),new Handlebars.SafeString(TS.templates.makeMemberPresenceIcon(e))}),Handlebars.registerHelper("showDraftIcon",function(e,i){return TS.templates.builders.legacyShowDraftIcon(e)?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("makeMemberPreviewLink",function(){var e=TS.templates.builders.makeMemberPreviewLink.apply(this,arguments);return new Handlebars.SafeString(e)}),Handlebars.registerHelper("makeMemberPreviewLinkImage",function(){return new Handlebars.SafeString(TS.templates.builders.makeMemberPreviewLinkImage.apply(this,arguments))}),Handlebars.registerHelper("makeProfileImage",TS.templates.builders.makeProfileImage),Handlebars.registerHelper("makePendingUserImage",function(){return new Handlebars.SafeString(TS.templates.builders.makePendingUserImage.apply(this,arguments))}),Handlebars.registerHelper("emojiGraphicReplace",function(e,i){var u={};return i&&typeof i=="string"?u.force_style=i:u.obey_emoji_mode_pref=!0,new Handlebars.SafeString(TS.emoji.graphicReplace(e,u))}),Handlebars.registerHelper("getMemberPreviewLinkImageArgs",function(e,i,u,f,S,p,h){var c;if(typeof e=="object"?c=e:c=TS.interop.members.getMemberById(e),!c||!c.profile)return"";u=u===!0,f=f===!0,S=S===!0,p=p===!0,h=typeof h=="string"?h:!1,e==="USLACKBOT"&&h&&(c=TS.utility.slackbot.getWithFeels(h));var v,b,w;switch(b="background-image: ",w=[],i){case 20:TS.environment.is_retina?v=c.profile.image_48:v=c.profile.image_24;break;case 24:TS.environment.is_retina?v=c.profile.image_48:v=c.profile.image_24;break;case 32:TS.environment.is_retina?v=c.profile.image_72:v=c.profile.image_32;break;case 36:TS.environment.is_retina?v=c.profile.image_72:v=c.profile.image_48;break;case 48:TS.environment.is_retina?v=c.profile.image_72:v=c.profile.image_48;break;case 56:TS.environment.is_retina?v=c.profile.image_192:v=c.profile.image_72;break;case 72:TS.environment.is_retina?v=c.profile.image_192:v=c.profile.image_72;break;case 192:TS.environment.is_retina?v=c.profile.image_512||c.profile.image_192:v=c.profile.image_192;break;case 512:TS.environment.is_retina?v=c.profile.image_1024||c.profile.image_512||c.profile.image_192:v=c.profile.image_512||c.profile.image_192;break;default:TS.environment.is_retina?v=c.profile.image_72:v=c.profile.image_48;break}if(w.push(`url('${v}')`),i===512){var x=TS.environment.is_retina?c.profile.image_72:c.profile.image_48;w.push(`url('${x}')`)}u?b=w.length?w.join(", "):"":b=w.length?b+w.join(", "):"";var U={omit_link:f,omit_badge:S,lazy:u,member:c,size:i,include_restricted_overlay:!p||!0,bg_img_style:b};return U}),Handlebars.registerHelper("getGuestBadgeSize",function(e){var i;switch(e){case 24:i=10;break;case 32:case 36:case 48:i=16;break;case 72:i=24;break;case 192:i=48;break;case 512:i=96;break;default:i=16}return i}),Handlebars.registerHelper("getTeamBadgeSize",n),Handlebars.registerHelper("getMemberNameById",function(e){var i=TS.interop.members.getMemberById(e);return i?i.name:e}),Handlebars.registerHelper("getPrefCompliantMemberNameById",function(e){return TS.interop.rules.members.getPrefCompliantMemberNameById(e)}),Handlebars.registerHelper("getMemberComponentPrimaryName",function(e,i){return i?i==="real_name"?TS.interop.rules.members.getMemberRealName(e):TS.getMemberMentionName(e):TS.interop.rules.members.getPrefCompliantMemberName(e,!1,!1)}),Handlebars.registerHelper("memberIsInvited",function(e,i){return e&&e.is_invited_user?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("memberComponentHasSecondaryName",function(e,i,u){var f=!1;return e&&(i?i==="real_name"?f=!!TS.interop.rules.members.getMemberProfileFieldDisplayName(e):f=!!TS.interop.rules.members.getMemberRealName(e):f=!!TS.interop.rules.members.getMemberSecondaryName(e)),f&&!e.is_invited_user?u.fn(this):u.inverse(this)}),Handlebars.registerHelper("getMemberComponentSecondaryName",function(e,i){if(i){if(i==="real_name")return TS.interop.rules.members.getMemberProfileFieldDisplayName(e);if(i==="display_name")return TS.interop.rules.members.getMemberProfileFieldDisplayName(e)?TS.interop.rules.members.getMemberRealName(e):""}return TS.interop.rules.members.getMemberSecondaryName(e)}),Handlebars.registerHelper("getPrefCompliantMemberName",function(e,i,u){return TS.interop.rules.members.getPrefCompliantMemberName(e,i===!0,u===!0)}),Handlebars.registerHelper("getMemberAsContentsString",function(e){return TS.interop.texty.getMemberAsContentsString(e)}),Handlebars.registerHelper("getTeamById",function(e){return TS.teams.getTeamById(e)}),Handlebars.registerHelper("getTeamDisplayName",function(e){return TS.interop.rules.teams.isUnknown(e)?new Handlebars.SafeString(TS.templates.unknown_team({id:e.id})):TS.interop.rules.teams.getTeamDisplayName(e)}),Handlebars.registerHelper("getMemberPreviewLinkTarget",function(e){return TS.utility.shouldLinksHaveTargets()?new Handlebars.SafeString(`target="/team/${e.id}"`):""}),Handlebars.registerHelper("getMemberProfileFieldDisplayName",function(e){return TS.interop.rules.members.getMemberProfileFieldDisplayName(e)}),Handlebars.registerHelper("getMemberSecondaryName",function(e){return TS.interop.rules.members.getMemberSecondaryName(e)}),Handlebars.registerHelper("getMemberProfileFieldDisplayName",function(e){return TS.interop.rules.members.getMemberProfileFieldDisplayName(e)}),Handlebars.registerHelper("getMemberRealName",function(e){return TS.interop.rules.members.getMemberRealName(e)}),Handlebars.registerHelper("getMemberProfileFieldDisplayNameandRealNameInCorrectOrder",function(e){var i=_.escape(TS.interop.rules.members.getPrefCompliantMemberName(e)),u;e.is_self?u=TS.interop.i18n.t("(you)","templates_helpers")():u=_.escape(TS.interop.rules.members.getMemberSecondaryName(e));var f=`<span class="member_real_name">${i}</span>`,S=`<span class="member_preferred_name">${u}</span>`;return new Handlebars.SafeString(f+S)}),Handlebars.registerHelper("memberHasIm",function(e){var i=e.hash.member,u=!1;return i&&TS.redux.channels.getImByMemberId(i.id)&&(u=!0),u?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("memberHasImUnreadCount",function(e){var i=e.hash.member,u=!1;if(i){var f=TS.redux.channels.getImByMemberId(i.id);f&&f.unread_cnt&&(u=!0)}return u?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("getUnreadCountForIMByMemberId",function(e){var i=TS.redux.channels.getImByMemberId(e);return i?i.unread_cnt:""}),Handlebars.registerHelper("makeMemberLinksWithDisplayNames",function(e){if(!e)return"";var i=e.split(/\s*,\s*/).map(function(u){return TS.templates.builders.makeMemberPreviewLink(TS.interop.members.getMemberById(u))}).join(", ");return new Handlebars.SafeString(i)});function s(e){var i=TS.interop.members.getMemberById(e.user);if(!i)return TS.warn(`Missing member in makeIMLink: ${e.user}`),TS.templates.search_im_link({im_exists:!1,im_member_id:e.user,im_name:e.user,im_id:e.id,member_color:"unknown"});var u={im_exists:!TS.interop.rules.channels.isImWithDeletedMember(e),im_member_id:i.id,im_name:TS.ims.getDisplayNameOfUserForIm(e),im_id:e.id,member_color:`color_${i?`${i.id} color_${i.color}`:"unknown"}`};if(TS.utility.shouldLinksHaveTargets()){var f=`/messages/${e.id}`;TS.interop.rules.channels.isImWithDeletedMember(e)&&(f=TS.templates.builders.newWindowName()),u.target=f}return TS.templates.search_im_link(u)}d(s,"makeIMLink"),Handlebars.registerHelper("makeIMLink",function(e){return new Handlebars.SafeString(s(e))}),Handlebars.registerHelper("getBotName",TS.templates.builders.getBotName);function l(e){var i=TS.interop.members.getMemberById(e);return i?`color_${i.id} color_${i.color}`:"color_unknown"}d(l,"getMemberColorClassById"),Handlebars.registerHelper("getMemberColorClassById",l),Handlebars.registerHelper("memberIsAdmin",function(e){var i=TS.interop.members.getMemberById(e.hash.id);return i?i.is_admin?e.fn(this):e.inverse(this):e.inverse(this)}),Handlebars.registerHelper("currentUserIsAdmin",function(e){return TS.model.user.is_admin?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("currentUserIsOwner",function(e){return TS.model.user.is_owner?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("tinyspeck",function(e){return TS.boot_data.feature_tinyspeck?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("fileIsImage",function(e){var i=TS.files.getFileById(e.hash.id);return i?i.mimetype&&i.mimetype.indexOf("image/")===0?e.fn(this):e.inverse(this):e.inverse(this)}),Handlebars.registerHelper("mimeTypeIsImage",function(e){return e.hash.type&&e.hash.type.indexOf("image/")===0?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("makeFilePrivacyLabel",function(e){var i="",u=e.is_public,f=e.groups.length>0||e.ims.length>0,S=e.mode==="email",p=e.mode==="snippet",h=e.mode!="post"&&e.mode!="space"&&!S&&!p;return e.mode==="post"||e.mode==="space"?u?i=TS.interop.i18n.t("Shared","templates_helpers")():f?i=TS.interop.i18n.t("Private","templates_helpers")():i=TS.interop.i18n.t("Draft","templates_helpers")():u&&S?i=TS.interop.i18n.t("Shared email","templates_helpers")():u&&p?i=TS.interop.i18n.t("Shared snippet","templates_helpers")():u&&h?i=TS.interop.i18n.t("Shared file","templates_helpers")():f&&S?i=TS.interop.i18n.t("Private email","templates_helpers")():f&&p?i=TS.interop.i18n.t("Private snippet","templates_helpers")():f&&h&&(i=TS.interop.i18n.t("Private file","templates_helpers")()),i}),Handlebars.registerHelper("isFileAuthorExternal",function(e){return TS.files.isFileAuthorExternal(e)}),Handlebars.registerHelper("maybeGetIconForTeamProfileField",function(e){var i=["slack","apple","android","twitter","github","google","windows","youtube","skype","facebook","asana","linkedin","tumblr","instagram","soundcloud","flickr","pinterest","tripit","hangouts","viber","line"];if(e=e.toLowerCase(),i.indexOf(e)>-1)return`<i class="ts_icon ts_icon_${e}"></i>`}),Handlebars.registerHelper("isSkypeTeamProfileField",function(e,i){return e.type==="text"&&e.label.toLocaleLowerCase()==="skype"?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("getSafeSkypeURLComponent",function(e){var i=e.match(/^[a-zA-Z][a-zA-Z0-9.,\-_@]{5,31}/);return i?i[0]:""}),Handlebars.registerHelper("math",function(e,i,u){return arguments.length<4&&(u=i,i="+"),e=parseFloat(e),u=parseFloat(u),{"+":e+u,"-":e-u,"*":e*u,"/":e/u,"%":e%u}[i]}),Handlebars.registerHelper("loadingHTML",function(){return new Handlebars.SafeString(TS.templates.builders.loadingHTML())}),Handlebars.registerHelper("versioned_loading_animation",function(){return cdn_url+"/80588/img/loading.gif"}),Handlebars.registerHelper("versioned_loading_hash_animation",function(){return cdn_url+"/80588/img/loading_hash_animation_@2x_vogue.gif"}),Handlebars.registerHelper("versioned_upload_file_icon",function(e){if(e==="1x")return cdn_url+"/80588/img/upload_file_icon.png";if(e==="2x")return cdn_url+"/80588/img/upload_file_icon@2x.png"}),Handlebars.registerHelper("versioned_default_application_icon",function(){return cdn_url+"/80588/img/apps/default_new_app_icon.png"}),Handlebars.registerHelper("versioned_tos_book_illustration",function(e){if(e==="1x")return cdn_url+"/80588/img/signup/book_illustration.png";if(e==="2x")return cdn_url+"/80588/img/signup/book_illustration@2x.png"}),Handlebars.registerHelper("versioned_basic_analytics_upsell_banner_image",function(){return cdn_url+"/80588/img/enterprise/ent_basic_analytics_upsell_banner_image.gif"}),Handlebars.registerHelper("number",function(e){return _.isUndefined(e)?"":TS.interop.i18n.number(e)||""}),Handlebars.registerHelper("atLabel",function(e){return TS.templates.builders.atLabel(e)}),Handlebars.registerHelper("getMemberTypeClass",TS.templates.builders.getMemberTypeClass),Handlebars.registerHelper("dangerouslyRenderHTML",function(e){return new Handlebars.SafeString(e)}),Handlebars.registerHelper("getTeamIconOfSize",function(e,i){return e&&e.icon?e.icon[`image_${i}`]:null}),Handlebars.registerHelper("listItemCount",function(e){return _.isUndefined(e)?(TS.error("The template helper listItemCount failed because it was passed undefined"),0):(e=TS.utility.parseJSONOrElse(e,e),_.isString(e)&&e.length?e.split(",").length:e.length)}),Handlebars.registerHelper("getIconSizeToFit",function(e){return TS.interop.utility.getIconSizeToFit(e,[230,132,102,88,68,44,34])}),Handlebars.registerHelper("teamRetentionDuration",function(e){return e&&TS.interop.rules.channels.isPrivateChannel(e)?TS.prefs.getTeamPref("group_retention_duration"):TS.prefs.getTeamPref("retention_duration")}),Handlebars.registerHelper("teamRetentionType",function(e){return e&&TS.interop.rules.channels.isPrivateChannel(e)?TS.prefs.getTeamPref("group_retention_type"):TS.prefs.getTeamPref("retention_type")}),Handlebars.registerHelper("escape",function(e){return _.escape(e)})},test:function(){return{_optionsFnInverseBooleanHelper:o,_inlineImgSrcForFile:t}}});var o=d(function(s){return typeof s.fn!="function"&&(s.fn=function(){return!0}),typeof s.inverse!="function"&&(s.inverse=function(){return!1}),s},"_optionsFnInverseBooleanHelper"),t=d(function(s,l){return typeof s=="string"&&(s=TS.files.getFileById(s)),!s||!TS.files.fileIsImage(s)?!1:(l||(l=480),TS.files.getThumbSrcForFile(s,{maxSize:l}))},"_inlineImgSrcForFile"),n=d(function(s){var l;switch(s){case 32:case 36:case 48:l=16;break;case 72:l=22;break;case 192:case 512:break;default:l=16}return l},"_getTeamBadgeSize")})()},589465:()=>{(function(){TS.registerModule("templates",{onStart:function(){n(),TS.members&&TS.members.user_color_changed_sig.add(TS.templates.memberUserColorChanged,TS.templates),TS.prefs&&TS.prefs.sidebar_behavior_changed_sig.add(TS.templates.sidebarBehaviorPrefChanged,TS.templates),TS.environment.retina_changed_sig.add(o)},makeMemberPresenceDomClass:function(l){return`member_presence_${l}`},makeMemberPresenceStateClass:function(l){var e=TS.redux.presence.getPresenceByMemberId(l.id);return e},makeMemberPresenceIcon:function(l){if(l.deleted)return"";var e=TS.templates.makeMemberPresenceDomClass(l.id),i="ts_icon_presence",u=TS.redux.presence.getPresenceByMemberId(l.id),f=u==="active"?TS.interop.i18n.t("active","templates_helpers")():TS.interop.i18n.t("away","templates_helpers")();l.is_ultra_restricted?(e+=" ura",i="ts_icon_presence_ura"):l.is_restricted?(e+=" ra",i="ts_icon_presence_ra"):TS.interop.rules.members.isExternal(l)?(e+=" external",i="ts_icon_presence_external"):l.is_slackbot&&(i="ts_icon_heart");var S=`<i aria-hidden="true" class="ts_icon ${i} presence_icon"></i>`,p=TS.templates.makeMemberPresenceStateClass(l),h=`<span data-member-presence="${l.id}" class="presence ${p} ${e}" title="${f}">${S}</span>`;return h},memberUserColorChanged:function(l){var e=`color_${l.id}`;if(l.color==l.member_color){var i=`color_rule_${e}`,u=$(`#${i}`);u.remove();return}TS.templates.makeUserColorRule(l)},makeUserColorRule:function(l){var e=`color_${l.id}`,i=`#${_.escape(l.member_color)}`,u;u=`            .${e}:not(.nuc) {                color:${i};            }        `;var f=`color_rule_${e}`,S=$(`#${f}`);S.length?S.text(u):$(`<style type="text/css" id="${f}">${u}</style>`).appendTo("body")},sidebarBehaviorPrefChanged:function(){TS.templates.makeSidebarBehaviorRule()},makeSidebarBehaviorRule:function(){var l,e="sidebar_behavior",i=$(`#${e}`);TS.prefs.getPref("sidebar_behavior")==="hide_read_channels"?l="				.channels_list_holder ul li:not(.unread):not(.active):not(.show_in_list_even_though_no_unreads) {					display: none;			}":TS.prefs.getPref("sidebar_behavior")==="hide_read_channels_unless_starred"&&(l="				.channels_list_holder div:not(#starred_div)>ul li:not(.unread):not(.active):not(.is_starred):not(.show_in_list_even_though_no_unreads) {					display: none;			}"),l?i.length?i.text(l):$(`<style type="text/css" id="${e}">${l}</style>`).appendTo("head"):$(`#${e}`).remove()}});var o=d(function(){var l,e,i,u;$(".member_image").each(function(){u=$(this),l=u.data("member-id"),e=u.data("thumb-size"),i=!u.is("a"),l&&e&&$(this).replaceWith(TS.templates.builders.makeMemberPreviewLinkImage(l,e,!1,i))}),u=null},"_redrawRetinaAssets"),t=/{{\s*i18n_ns\s*('|")[a-zA-Z0-9]+('|")\s*}}/,n=d(function(){Object.keys(TS.raw_templates).forEach(function(l){TS.templates[l]=s(l,TS.raw_templates[l]),TS.raw_template_paths||(TS.raw_template_paths={},TS.interop.utility.getLogger({getState:TS.redux.getState}).error("MISSING_RAW_TEMPLATE_PATHS")),TS.templates[`${l}_path`]=TS.raw_template_paths[l],Handlebars.registerPartial(l,TS.templates[l])}),delete TS.raw_templates},"_load"),s=d(function(l,e){if(!e)return TS.warn(`${l} was passed no html`),null;t.test(e)&&(e+=" {{_i18n_ns_end}}");var i=Handlebars.compile(e);return function(u){u=u||{};var f=!1,S=!1,p=TS.interop.experiments.getGroupForUser("jira_newxp_2040");if(p==="variant"){var h=Math.floor(Math.random()*1e5);f=h==1,TS.templates_to_audit&&TS.templates_to_audit.includes(l)&&(f=!0,S=!0)}if(f)try{var c={contexts:{ui_context:{action:"impression",ui_properties:{element_name:`${l}.hbs`}}}};!TS.interop.environment.isDev&&!TS.interop.environment.isQa&&TS.interop.clog.track("HANDLEBARS_TEMPLATE_LOGS",c);var v=/\/[A-Z0-9-.]*\//g,b=window.location.pathname.replace(v,"/#####/"),w=new Error;w.fileName=TS.templates[`${l}_path`],w.message=`${b} ${window.location.hash}`,w.stack="";var x="HANDLEBARS_TEMPLATE_LOGS";S&&(x="HANDLEBARS_TEMPLATE_LOGS_AUDIT"),TS.interop.utility.getLogger({getState:TS.redux.getState}).error(w,x,{subtype:l})}catch{}return i(u)}},"_compile")})()},99630:()=>{(function(){TS.registerModule("tips",{onStart:function(){o.delegate(".ts_tip_lazy, .ts_tip_float","mouseenter",u),o.delegate(".ts_tip_float","mouseleave",f),o.on("click",".ts_tip",function(){h($(this))})},hideAll:function(){$(".ts_tip").addClass("ts_tip_hide")},unhideAll:function(){$(".ts_tip").removeClass("ts_tip_hide")},updateTipTitle:function(w,x){var U=c(w);U.length?U.html(x):w.attr("title",x),n&&n[0]==w[0]&&(x?(l.html(x),p()):S())},manuallyToggleTipTitle:function(w){h(w)}});var o=$("BODY"),t=null,n=null,s=null,l=null,e=10,i=0,u=d(function(w){n=$(w.currentTarget);var x=n.hasClass("ts_tip_multiline");if(n.addClass("ts_tip_hidden"),n.children(".ts_tip_tip").length==0&&b(n,x),n.removeAttr("title"),n.removeClass("ts_tip_lazy"),$("#ts_tip_float_floater").remove(),n.hasClass("ts_tip_float")){var U=n.attr("class").split(/\s+/).filter(function(R){return R==="ts_tip_float"||R==="ts_tip_lazy"?!1:R.indexOf("ts_tip")===0}),ee=TS.templates.builders.strBuilder('<div id="ts_tip_float_floater" style="width:${w}px; height:${h}px;" class="${classes}">${tip_html}</div>',{w:n.outerWidth(),h:n.outerHeight(),classes:U.join(" "),tip_html:n.find(".ts_tip_tip").clone()[0].outerHTML});s=$(ee),o.append(s),i=setTimeout(function(){s.removeClass("ts_tip_hidden"),p()},e),t=n.closest(":scrollable(vertical)"),t.on("scroll.ts_tip_removal",S),n.on("destroyed.ts_tip_removal",S),n.hasClass("ts_tip_hide_on_click")&&n.on("click.ts_tip_removal",S),x?l=s.find(".ts_tip_multiline_inner"):(l=s.find(".ts_tip_tip_inner"),l.length||(l=s.find(".ts_tip_tip")))}else setTimeout(function(){n.removeClass("ts_tip_hidden")},e)},"_onMouseEnter"),f=d(function(){S()},"_onMouseLeave"),S=d(function(){clearTimeout(i),s&&s.addClass("ts_tip_hidden"),n&&n.length&&(n.off("click.ts_tip_removal"),n.off("destroyed.ts_tip_removal")),t&&t.off("scroll.ts_tip_removal"),t=null,n=null,s=null,l=null},"_hideFloater"),p=d(function(){var w=n.offset(),x=2,U=window.innerWidth-x,ee=window.innerHeight-x,R=s.hasClass("ts_tip_multiline"),y=d(function(){return R?s.find(".ts_tip_multiline_inner").dimensions_rect():s.find(".ts_tip_tip").dimensions_rect()},"getRect"),T=d(function(g){s.removeClass("			ts_tip_right 			ts_tip_rightish 			ts_tip_left 			ts_tip_leftish 			ts_tip_multiline_top_leftish 			ts_tip_multiline_top_left 			ts_tip_multiline_top_right 			ts_tip_multiline_top_rightish 		").addClass(g)},"setHorizontalPositionClass");s.css("left",w.left).css("top",w.top);var a=y();a.bottom>ee?s.removeClass("ts_tip_bottom").addClass("ts_tip_top"):a.top<x&&s.removeClass("ts_tip_top").addClass("ts_tip_bottom"),R?(a.right>U?T("ts_tip_multiline_top_rightish"):a.left<x&&T("ts_tip_multiline_top_leftish"),a=y(),a.right>U?T("ts_tip_multiline_top_right"):a.left<x&&T("ts_tip_multiline_top_left")):(a.right>U?T("ts_tip_rightish"):a.left<x&&T("ts_tip_leftish"),a=y(),a.right>U?T("ts_tip_right"):a.left<x&&T("ts_tip_left"))},"_positionFloater"),h=d(function(w){var x=c(w),U="tip-toggle-auto",ee;if(w.data(U)?ee=w:x.data(U)&&(ee=x),!!(ee&&ee.length)){var R=x.html(),y=ee.data(U);if(!y)return TS.warn("No toggle state text defined on tipped element. Please add text to data-tip-toggle-text or data-tip-toggle-auto attribute");TS.tips.updateTipTitle(w,y),ee.data(U,R)}},"_toggleTipTitle"),c=d(function(w){var x=w.find(".ts_tip_multiline_inner");return x.length||(x=w.find(".ts_tip_tip_inner")),x.length||(x=w.find(".ts_tip_tip")),x},"_getTipEl"),v=d(function(w){if(!w.text().trim().length&&!w.attr("aria-label"))return _.uniqueId("ts_tip_tip_")},"_possiblyMakeLabelId"),b=d(function(w,x){var U="";if(w.data("tip-member"))U=TS.templates["c-unified_member"]({member:TS.interop.members.getMemberById(w.data("tip-member")),size:"small",avatar:!0,no_tip:!0,dark:!0,omit_status:!0,forced_primary:"real_name"});else{var ee=_.escape(w.prop("title")),R=v(w),y=R?` id="${R}"`:"";U=x?`<span class="ts_tip_multiline_inner">${ee}</span>`:ee}var T=["<span",y,' class="ts_tip_tip"',">",U,"</span>"];w.append(T.join("")),w.attr("aria-labelledby",R)},"_buildDom")})()},879656:()=>{(function(){TS.registerModule("ui.a11y",{unread_message_strings:{},$aria_live_div:null,zoom_level_changed_sig:new signals.Signal,onStart:function(){s(),f(),p(),TS.channels.switched_sig.add(TS.ui.a11y.annouceCurrentChannelOrImOrGroup),TS.ims.switched_sig.add(TS.ui.a11y.annouceCurrentChannelOrImOrGroup),TS.groups.switched_sig.add(TS.ui.a11y.annouceCurrentChannelOrImOrGroup),TS.mpims.switched_sig.add(TS.ui.a11y.annouceCurrentChannelOrImOrGroup),$(document).on("focus","input[placeholder],textarea[placeholder]",function(b){n($(b.target))}),$(document).on("blur","input[placeholder],textarea[placeholder]",function(b){n($(b.target))})},focusAndAddTabindex:function(b){b&&(b.attr("tabindex")&&b.data("previous-tabindex",b.attr("tabindex")),b.attr("tabindex","0"),b.focus())},ariaLiveAnnounce:function(b,w){TS.ui.a11y.$aria_live_div.empty(),TS.ui.a11y.$aria_live_div.attr("aria-live",w?"assertive":"polite"),TS.ui.a11y.$aria_live_div.text(b)},assembleActiveModelName:function(){var b=TS.shared.legacyGetActiveModelOb(),w;if(!b)return"";if(b.is_channel)w=TS.interop.i18n.t("Channel #{model_name}","a11y")({model_name:b.name});else if(b.is_im)w=TS.interop.i18n.t("Direct message with {model_name}","a11y")({model_name:TS.interop.rules.members.getPrefCompliantMemberNameById(b.user)});else if(b.is_mpim)w=TS.interop.i18n.t("Direct message with {model_name}","a11y")({model_name:TS.mpims.legacyGetDisplayName(b)});else if(b.is_group)w=TS.interop.i18n.t("Private Channel {model_name}","a11y")({model_name:b.name});else return"";return w},annouceCurrentChannelOrImOrGroup:function(){var b=TS.ui.a11y.assembleActiveModelName(),w=b,x=TS.shared.legacyGetActiveModelOb();x&&(TS.ui.a11y.unread_message_strings[x.name]&&(w+=`, ${TS.ui.a11y.unread_message_strings[x.name]}`,delete TS.ui.a11y.unread_message_strings[x.name]),TS.ui.a11y.ariaLiveAnnounce(w,!0))},getContrastColor:function(b){var w=!1;if(b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(y,T,a,g){return T+T+a+a+g+g}),b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b),b){var x=parseInt(b[1],16),U=parseInt(b[2],16),ee=parseInt(b[3],16),R=(x*299+U*587+ee*114)/1e3;w=R>=128?"#000000":"#FFFFFF"}return w},test:function(){return{createAriaLiveElement:s,destroyAriaLiveElement:l,getMessageInputElement:e,getMessageDivElement:i}}});var o={70:"-3",80:"-2",90:"-1",normal:"0",110:"1",125:"2",150:"3"},t=Object.keys(o).reduce(function(b,w){return b[o[w]]=w,b},{}),n=d(function(b){var w=b.attr("placeholder"),x=b.attr("aria-label")||"",U=!!x.length,ee=!!b.val().trim().length;if(ee&&!U&&w.length){b.attr("aria-label",w);return}!ee&&U&&x==w&&b.removeAttr("aria-label")},"_labelWithPlaceholder"),s=d(function(){return TS.ui.a11y.$aria_live_div=$('<div id="aria_live_announcer" role="status"></div>'),$("body").append(TS.ui.a11y.$aria_live_div),TS.ui.a11y.$aria_live_div},"_createAriaLiveElement"),l=d(function(){TS.ui.a11y.$aria_live_div.remove(),delete TS.ui.a11y.$aria_live_div},"_destroyAriaLiveElement"),e=d(function(){return $()},"_getMessageInputElement"),i=d(function(){return $()},"_getMessageDivElement"),u,f=d(function(){TS.model.is_electron&&(u=TS.interop.desktop.getZoom(),$(window).on("resize",S))},"_bindResizeListener"),S=d(function(){var b=TS.interop.desktop.getZoom();u!=b&&(u=b,TS.ui.a11y.zoom_level_changed_sig.dispatch({zoom_level:b}))},"_onResize"),p=d(function(){TS.model.is_electron&&($("body").append('<div class="zoom_level_indicator hidden"></div>'),TS.ui.a11y.zoom_level_changed_sig.add(v))},"_createZoomLevelIndicatorUI"),h=d(function(b){var w=t[b]||"100",x=w==="normal"?"100":w,U=TS.interop.i18n.t("zoom: <strong>{zoom_percentage}%</strong>","a11y")({zoom_percentage:x});$(".zoom_level_indicator").html(U)},"_setZoomLevel"),c,v=d(function(b){if(!$("body").hasClass("loading")){var w=$(".prefs_modal.active");if(!(w.length&&w.find(".a11y_pref_zoom").length)){c&&(clearTimeout(c),c=null),h(b.zoom_level);var x=$(".zoom_level_indicator");x.insertAfter(document.body.lastElementChild),x.removeClass("hidden").show(0);var U=x.outerWidth()/2,ee=`calc(50vw - ${U}px)`;x.css("left",ee),c=setTimeout(function(){x.fadeOut(100)},1e3)}}},"_showZoomLevel")})()},397918:()=>{(function(){TS.registerModule("ui.admin_edit_team_profile",{onStart:function(){$("body").on("click",'[data-action="edit_team_profile_modal"]',TS.ui.admin_edit_team_profile.start)},start:function(){ne()&&e()}});var o,t,n,s=[],l=50,e=d(function(){var N={body_template_html:TS.templates.admin_edit_team_profile_modal(),onShow:i,onCancel:u};TS.ui.fs_modal.start(N)},"_start"),i=d(function(){o=$("#edit_team_profile_container"),t=$("body"),o.on("click",'[data-action="edit_team_profile_to_custom"]',a),o.on("click",'[data-action="edit_team_profile_to_add"]',T),o.on("click",'[data-action="edit_team_profile_to_edit"]',g),o.on("click",'[data-action="edit_team_profile_to_hide"]',A),o.on("click",'[data-action="edit_team_profile_to_delete"]',j),o.on("click",'[data-action="edit_team_profile_cancel"]',y),o.on("click",'[data-action="edit_team_profile_confirm_edit"]',w),o.on("click",'[data-action="edit_team_profile_confirm_hide"]',c),o.on("click",'[data-action="edit_team_profile_confirm_delete"]',h),o.on("click",'[data-action="edit_team_profile_remove_option"]',J),o.on("click",'[data-action="edit_team_profile_add_option"]',B),o.on("focusin",'[data-action="edit_team_profile_update_preview_label"], [data-action="edit_team_profile_update_preview_hint"], .option_header_row + .option_row [data-action="edit_team_profile_update_preview_option"]',P),o.on("focusout",'[data-action="edit_team_profile_update_preview_label"], [data-action="edit_team_profile_update_preview_hint"], .option_header_row + .option_row [data-action="edit_team_profile_update_preview_option"]',C),o.on("input",'[data-action="edit_team_profile_update_preview_label"], [data-action="edit_team_profile_update_preview_hint"], .option_header_row + .option_row [data-action="edit_team_profile_update_preview_option"]',M),o.on("click",'[data-action="edit_team_profile_list_menu"]',V),o.on("input","input",me),t.on("keydown.admin_submit",f),S().then(y).catch(TS.error)},"_onShow"),u=d(function(){se(!0),o=null,s=[],n=null,t.off("keydown.admin_submit"),t=null},"_onCancel"),f=d(function(N){if(N.which==TS.utility.keymap.enter)return $(n).find('button[type="submit"]').trigger("click"),!1},"_onKeydown"),S=d(function(){return TS.team.ensureTeamProfileFields()},"_ensureProfile"),p=d(function(N,m){if(N)return TS.interop.api.call(N,m).then(function(E){return N==="team.profile.delete"?TS.interop.members.deleteProfileFields(TS.model.team.id,JSON.parse(m.profile).fields):N==="team.profile.reorder"?TS.interop.teams.reorderTeamProfileFields(TS.model.team.id,_.get(E,"data.profile.fields")):TS.interop.members.updateProfileFields(TS.boot_data.team_id,_.get(E,"data.profile.fields")),Promise.resolve(E)},function(E){return Promise.reject(E)})},"_apiCall"),h=d(function(N){var m=$(N.target),E=m.data("id");if(E||(m=m.closest("[data-id]")),E=m.data("id"),!!E){var I=TS.team.getTeamProfileFieldById(E);I&&x("team.profile.delete",[E]).then(y,_.noop)}},"_deleteField"),c=d(function(N){b(N,!0)},"_hideField"),v=d(function(N){b(N,!1)},"_showField"),b=d(function(N,m){var E=$(N.target),I=E.data("id");if(I||(E=E.closest("[data-id]")),I=E.data("id"),!I)return;var H=TS.team.getTeamProfileFieldById(I);if(!H)return;H=$.extend({},H),H.is_hidden=m,m&&(H.ordering=H.ordering||K());function ie(){y(),le(I)}d(ie,"resolve"),x("team.profile.set",[H]).then(ie,_.noop)},"_hideOrShowField"),w=d(function(N){var m=o.find("#edit_team_profile_edit");if(!TS.ui.validation.validate(m,{quiet:!0,fast:!0})){TS.ui.validation.validate(m),Ladda.stopAll(),$("#edit_team_profile_confirm_edit_btn").addClass("disabled");return}var E=$(N.target),I=E.data("id");I||(E=E.closest("[data-id], [data-type]")),I=E.data("id");var H=o.find('input[name="label"]'),ie=o.find('input[name="hint"]'),re=TS.team.getTeamProfileFieldById(I)||{},de=JSON.stringify(re);re=$.extend({},re),re.type=re.type||E.data("type")||"text",re.label=H.val().trim(),re.hint=ie.val().trim(),re.ordering=re.ordering||K(),re.type==="options_list"&&(re.possible_values=o.find('input[name^="option_"]').map(function(){return $(this).val().trim()}).toArray());function ce(){y(),le(I)}d(ce,"resolve"),JSON.stringify(re)==de?(ce(),Ladda.stopAll()):x("team.profile.set",[re]).then(ce,_.noop)},"_editField"),x=d(function(N,m){m=m&&m.length?m:TS.model.team.profile.fields;var E={profile:JSON.stringify({fields:m})};return p(N,E).catch(function(I){if(I.data.error==="no_perms"||I.data.error==="missing_scope"){var H=TS.boot_data.page_needs_enterprise,ie=H?TS.interop.i18n.t("Sorry! An organization owner or admin is required to update this setting.","team_profile","21d269f8b1a2802d90b32308195ac5b67c9413f6")():TS.interop.i18n.t("Sorry! An owner in your workspace has restricted who can customize your members\u2019 profile.","team_profile")();TS.generic_dialog.start({body:ie,show_cancel_button:!1,esc_for_ok:!0,fullscreen:!1,onEnd:TS.ui.fs_modal.close})}else return I.data.error==="field_bad_order"?(TS.error(`Failed to create profile field: ${I.data.error}`),TS.generic_dialog.alert(TS.interop.i18n.t("Apologies, but the maximum number of profile fields you can add is {max_no_of_fields, number}. Please remove some existing fields if you\u2019d like to add different ones.","team_profile")({max_no_of_fields:l}))):(TS.error(`Failed to customize profile: ${I.data.error}`),TS.generic_dialog.alert(TS.interop.i18n.t("Sorry! Something went wrong. Please try again.","team_profile")()))}).finally(Ladda.stopAll)},"_saveProfile"),U=d(function(){return(TS.model.team.profile.fields||[]).some(N=>N.field_name==="title"&&N.options&&N.options.is_scim)},"_shouldHideDefaultTitle"),ee=d(function(){return TS.interop.experiments.getGroupForUser("rimeto_profile_show_default_phone_webapp")==="on"?!1:(TS.model.team.profile.fields||[]).some(N=>N.field_name==="primaryPhone"&&N.options&&N.options.is_scim)},"_shouldHideDefaultPhone"),R=d(function(){return TS.prefs.getTeamPref("display_pronouns")},"_shouldShowPronounField"),y=d(function(){s.length=0,s.push({back:y});var N={};N.team_profile_fields=te(),N.hidden_team_profile_fields=_e(),N.default_team_profile_fields=oe(),N.hide_default_title=U(),N.hide_default_phone=ee(),N.show_pronoun_field=R();var m=TS.templates.admin_edit_team_profile_list(N);o.find("#edit_team_profile_header").text(TS.interop.i18n.t("Customize profile","team_profile")()).removeClass("hidden center_and_narrow");var E;TS.model.team.profile&&TS.model.team.profile.fields.length>=50?E=`<div class="alert alert_info"><i class="ts_icon ts_icon_info_circle"></i>${TS.interop.i18n.t("You have reached the maximum number of fields that can be added to profiles.","team_profile")()}</div>`:E=TS.interop.i18n.t("Expand your members\u2019 profiles by adding additional fields below","team_profile")(),o.find("#edit_team_profile_value_note").html(E).removeClass("hidden center_and_narrow"),o.find("#edit_team_profile_list").html(m),W("#edit_team_profile_list"),z(),X(),se(!0)},"_switchToList"),T=d(function(){s.push({back:T});var N={};N.default_team_profile_fields=oe();var m=TS.templates.admin_edit_team_profile_add(N);o.find("#edit_team_profile_header").text(TS.interop.i18n.t("Select a field type","team_profile")()).removeClass("center_and_narrow"),o.find("#edit_team_profile_value_note").addClass("hidden"),o.find("#edit_team_profile_add").html(m),W("#edit_team_profile_add"),X(),se()},"_switchToAdd"),a=d(function(){s.push({back:a});var N=TS.templates.admin_edit_team_profile_custom();o.find("#edit_team_profile_header").text(TS.interop.i18n.t("Create a new field","team_profile")()).removeClass("center_and_narrow"),o.find("#edit_team_profile_value_note").text(TS.interop.i18n.t("Which type of field would you like to create?","team_profile")()).removeClass("hidden center_and_narrow"),o.find("#edit_team_profile_custom").html(N),W("#edit_team_profile_custom"),X(),se(),O()},"_switchToCustom"),g=d(function(N){var m=$(N.target);if(m.hasClass("ts_icon_grabby_patty"))return!1;var E=m.data("id");E||(m=m.closest("[data-id], [data-type]")),E=m.data("id");var I={},H;if(!E)I.type=m.data("type"),I.label=m.data("label"),H=TS.interop.i18n.t("Customize profile field","team_profile")();else{if(I=TS.team.getTeamProfileFieldById(E),!I)return;H=TS.interop.i18n.t("Edit profile field","team_profile")()}N.stopPropagation(),s.push({back:g,event:N});var ie=TS.templates.admin_edit_team_profile_edit(I);o.find("#edit_team_profile_header").text(H).removeClass("center_and_narrow"),o.find("#edit_team_profile_value_note").addClass("hidden"),o.find("#edit_team_profile_edit").html(ie),W("#edit_team_profile_edit"),D(),Y(),O(),Ladda.bind("#edit_team_profile_confirm_edit_btn"),X(),se(),me()},"_switchToEdit"),A=d(function(N){var m=$(N.target),E=m.data("id");if(E||(m=m.closest("[data-id]")),E=m.data("id"),!!E){var I=TS.team.getTeamProfileFieldById(E);if(I){N.stopPropagation(),s.push({back:A,event:N});var H=TS.templates.admin_edit_team_profile_hide({id:I.id,can_delete:!_.get(I,"options.is_scim",!1)}),ie=TS.interop.i18n.t('Hide "{field_label}"',"team_profile")({field_label:I.label});o.find("#edit_team_profile_header").text(ie).addClass("center_and_narrow");var re=TS.interop.i18n.t("All data entered for this field will no longer be visible on your members\u2019 profiles. You can un-hide it later.","team_profile")();o.find("#edit_team_profile_value_note").text(re).addClass("center_and_narrow").removeClass("hidden"),o.find("#edit_team_profile_hide").html(H),W("#edit_team_profile_hide"),Ladda.bind("#edit_team_profile_confirm_hide_btn"),Q(),se()}}},"_switchToHide"),j=d(function(N){var m=$(N.target),E=m.data("id");if(E||(m=m.closest("[data-id]")),E=m.data("id"),!!E){var I=TS.team.getTeamProfileFieldById(E);if(I){N.stopPropagation(),s.push({back:j,event:N});var H=TS.templates.admin_edit_team_profile_delete(I),ie=TS.interop.i18n.t('Delete "{field_label}"',"team_profile")({field_label:I.label});o.find("#edit_team_profile_header").text(ie).addClass("center_and_narrow");var re=TS.interop.i18n.t("<strong>Are you sure?</strong> All data associated with this field will be permanently deleted. This <strong>cannot be undone</strong>.","team_profile")();o.find("#edit_team_profile_value_note").html(re).addClass("center_and_narrow").removeClass("hidden"),o.find("#edit_team_profile_delete").html(H),W("#edit_team_profile_delete"),Ladda.bind("#edit_team_profile_confirm_delete_btn"),Q(),se()}}},"_switchToDelete"),Q=d(function(){o.closest(".contents").addClass("display_flex flex_direction_column").css("height","70vh"),o.css({margin:"auto 0",height:"auto","padding-top":0})},"_flexContentsAndCenter"),X=d(function(){o.closest(".contents").removeClass("display_flex flex_direction_column").css("height",""),o.css({margin:"",height:"","padding-top":""})},"_unflexContentsAndCenter"),ne=d(function(){if(!TS.model.team)return!1;var N=TS.model.user;return N?TS.prefs.getTeamPref("who_can_change_team_profile")==="admin"?N.is_admin:TS.prefs.getTeamPref("who_can_change_team_profile")==="owner"?N.is_owner:!0:!1},"_userCanEditTeamProfile"),se=d(function(N){N?(TS.ui.fs_modal.unbindBackButton(),TS.ui.fs_modal.hideBackButton()):(TS.ui.fs_modal.bindBackButton(function(){s.pop();var m=s.pop();m.back(m.event)}),TS.ui.fs_modal.showBackButton())},"_updateBackButton"),D=d(function(){var N=o.find(".option_row");N.length>=3?N.addClass("show_remove_action"):N.removeClass("show_remove_action")},"_maybeShowOptionRemoveAction"),Y=d(function(){M({target:o.find('.option_header_row + .option_row [data-action="edit_team_profile_update_preview_option"]')})},"_maybeUpdateOptionPreviewValue"),J=d(function(N){$(N.target).closest(".row.option_row").remove(),me(),D(),Y(),F()},"_removeOption"),B=d(function(){var N=TS.templates.admin_edit_team_profile_option_row({index:o.find(".row.option_row").length});o.find("#option_rows").append(N).find(".row.option_row").last().find("input").focus(),me(),D(),F()},"_addOption"),F=d(function(){o.find(".row.option_row").length===50?o.find('[data-action="edit_team_profile_add_option"]').addClass("hidden").next().removeClass("hidden"):o.find('[data-action="edit_team_profile_add_option"]').removeClass("hidden").next().addClass("hidden")},"_maybeUpdateAddOptionAction"),M=d(function(N){var m=$(N.target),E=m.val();E&&(E=E.trim()),E!==void 0&&!E.length&&(E=m.data("default")),o.find(`.profile_field_preview [data-id="${m.data("target")}"]`).text(E)},"_updatePreviewValue"),P=d(function(N){var m=o.find(`.profile_field_preview [data-id="${$(N.target).data("target")}"]`),E=m.closest("select");E.length&&(m=E),m.addClass("highlight_yellow_bg")},"_decoratePreview"),C=d(function(N){var m=o.find(`.profile_field_preview [data-id="${$(N.target).data("target")}"]`),E=m.closest("select");E.length&&(m=E),m.removeClass("highlight_yellow_bg")},"_undecoratePreview"),O=d(function(){var N=o.find(".edit_team_profile_lazy_filter_select");if(N.length){var m="USLACKBOT";TS.boot_data.feature_deprecate_get_member_by_name||(m=TS.interop.members.getMemberByName("slackbot").id);var E={append:!0,classes:"disabled",preselected_ids:[m]};TS.ui.people_picker.make(N,E)}},"_makePeoplePicker"),z=d(function(){o.find("#edit_team_profile_list_drag_and_drop_area").sortable({items:".visible_row[data-id]",handle:".ts_icon_grabby_patty",forcePlaceholderSize:!0}).on("sortupdate",function(N){N.stopPropagation();var m=[];$(this).find(".row[data-id]").each(function(I){var H=TS.team.getTeamProfileFieldById($(this).data("id"));H&&H.ordering!=I&&(H.ordering=I,m.push({id:H.id,ordering:I}))});var E=TS.team.sortTeamProfileFieldsByOrdering(TS.model.team.profile.fields);TS.redux.teams.upsertTeam(_.assign({},TS.model.team,{profile:{fields:E}})),x("team.profile.reorder",m)})},"_enableDragAndDrop"),K=d(function(){return TS.model.team.profile.fields.length?_.max(TS.model.team.profile.fields.map(function(N){return N.ordering}))+1:0},"_makeOrdering"),V=d(function(N){N.stopPropagation();var m=$(N.target).closest("[data-id]").get(0),E={};E.is_scim=$(N.target).closest("[data-is-scim]").data("is-scim");var I=jQuery.Event("click",{target:m,currentTarget:m});TS.menu.startWithEditTeamProfileListActions(I,q,E)},"_openListMenu"),q=d(function(N){N.preventDefault();var m=$(N.target).closest("[data-id]");m.is('[data-action="edit_team_profile_to_show"]')?v(N):m.is('[data-action="edit_team_profile_to_hide"]')?A(N):m.is('[data-action="edit_team_profile_to_delete"]')&&j(N),TS.menu.end()},"_onListMenuClick"),W=d(function(N){var m=["#edit_team_profile_loading","#edit_team_profile_list","#edit_team_profile_add","#edit_team_profile_custom","#edit_team_profile_edit","#edit_team_profile_hide","#edit_team_profile_delete"].filter(function(E){return E!==N}).join(", ");o.find(m).addClass("hidden"),o.find(N).removeClass("hidden"),n=N},"_hideAllSectionsBut"),te=d(function(){var N=TS.team.getVisibleTeamProfileFields();return N.length?N:null},"_getVisibleTeamProfileFields"),_e=d(function(){var N=TS.team.getHiddenTeamProfileFields();return N.length?N:null},"_getHiddenTeamProfileFields"),ue=d(function(){return TS.model.team.profile.fields.reduce(function(N,m){return N[m.label.toLowerCase()]=!0,N},{})},"_getLabelsMap"),oe=d(function(){var N=ue(),m=[{type:"text",label:TS.interop.i18n.t("Address","team_profile")()},{type:"date",label:TS.interop.i18n.t("Birthdate","team_profile")()},{type:"user",label:TS.interop.i18n.t("Direct Reports","team_profile")()},{type:"link",label:TS.interop.i18n.t("Facebook","team_profile")()},{type:"link",label:TS.interop.i18n.t("Flickr","team_profile")()},{type:"link",label:TS.interop.i18n.t("GitHub","team_profile")()},{type:"link",label:TS.interop.i18n.t("Instagram","team_profile")()},{type:"link",label:TS.interop.i18n.t("LinkedIn","team_profile")()},{type:"user",label:TS.interop.i18n.t("Manager","team_profile")()},{type:"link",label:TS.interop.i18n.t("Pinterest","team_profile")()},{type:"text",label:TS.interop.i18n.t("Skype","team_profile")()},{type:"link",label:TS.interop.i18n.t("SoundCloud","team_profile")()},{type:"date",label:TS.interop.i18n.t("Start Date","team_profile")()},{type:"link",label:TS.interop.i18n.t("Tumblr","team_profile")()},{type:"link",label:TS.interop.i18n.t("Twitter","team_profile")()},{type:"link",label:TS.interop.i18n.t("YouTube","team_profile")()}].filter(function(E){return!N[E.label.toLowerCase()]});return m.length?m:[]},"_getDefaultTeamProfileFields"),le=d(function(N){var m=N?`[data-id=${N}]`:".visible_row[data-id]",E=o.find("#edit_team_profile_list").find(m).last(),I=E.outerHeight()*-2;E.highlight(1500,"",null,0),E.scrollintoview({duration:200,px_offset:I,direction:"y"})},"_highlightInList"),me=d(function(){$("#edit_team_profile_confirm_edit_btn").toggleClass("disabled",!TS.ui.validation.validate(o.find("#edit_team_profile_edit"),{quiet:!0,fast:!0}))},"_toggleSave")})()},245072:()=>{(function(){TS.registerModule("ui.admin_user_groups",{user_groups_fetched:new signals.Signal,onStart:function(){$("body").on("click",'[data-action="admin_user_groups_modal"]',function(){i()}),$("body").on("click",'[data-action="admin_user_groups_modal_new"]',function(){TS.ui.admin_user_groups.add()})},start:function(){i()},add:function(){i(),l=!0,R()},editInfo:function(P){i(),l=!0,R(P)},editMembers:function(P){i(),l=!0,j(P,!1)},disable:function(P){i(),l=!0,U(P,"disable_user_group")},enable:function(P){i(),l=!0,U(P,"enable_user_group")},interopFunctions:function(P){let{action:C,userGroup:O}=P;switch(C){case"add":R();break;case"enable":U(O,"enable_user_group");break;case"disable":U(O,"disable_user_group");break;case"editInfo":R(O);break;case"editMembers":j(O,!1);break;default:}},test:function(){var P={_isFullLocalMember:Y};return Object.defineProperty(P,"_isFullLocalMember",{get:function(){return Y},set:function(C){Y=C}}),P}});var o,t,n,s=[],l=!1,e=!1,i=d(function(){var P=TS.templates.user_group_modal({show_info_pane:!TS.prefs.getPref("hide_user_group_info_pane"),show_user_groups_add:TS.interop.userGroups.canCreateAndDeleteUserGroups()}),C={body_template_html:P,onShow:u,onCancel:f};C.full_height_contents=!0,C.modal_contents_container_class="overflow_hidden",F="",TS.interop.userGroups.setSearchQuery(F),TS.ui.fs_modal.start(C)},"_start"),u=d(function(){o=$("#all_user_groups"),t=$("#user_groups_form_div"),n=$("#user_groups_toggle_div"),w(),$("#user_groups_create_btn").on("click",()=>{R()})},"_onShow"),f=d(function(){o=null,t=null,n=null,l=!1,M=null,$(window).off("resize",b),TS.ui.admin_user_groups.user_groups_fetched.dispatch(s),J(TS.model.user_groups),B()},"_onCancel"),S=d(function(P){P&&P.preventDefault(),l?TS.ui.fs_modal.close():w(),J(TS.model.user_groups)},"_onReset"),p=d(function(){l?TS.ui.fs_modal.close():w(),TS.ui.admin_user_groups.user_groups_fetched.dispatch(s),J(TS.model.user_groups)},"_onUpdateComplete"),h=d(function(){l||(TS.ui.fs_modal.bindBackButton(w),TS.ui.fs_modal.showBackButton())},"_bindBackButton"),c=d(function(P){if(!s||!P)return!1;for(var C=0,O=s.length;C<O;C+=1)if(s[C].auto_type===P)return s[C];return!1},"_findAutoUserGroup"),v=d(function(P){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!P){var O=$("#user_group_name_input").val()||"",z=$("#user_group_handle_input").val()||"";if(C.group_name=O,C.group_handle=z,C.error&&(C.error==="forbidden_handle"||C.error==="forbidden_name")){var K=O+z;if(K){var V=c("owner"),q=c("admin"),W=!!K.match(/admins/i),te=!!K.match(/owners/i);C.suggest_auto_group=!0,C.can_create_auto_owners=te&&TS.model.user.is_admin&&!V,C.can_enable_auto_owners=te&&V&&V.date_delete,C.can_create_auto_admins=W&&TS.model.user.is_admin&&!q,C.can_enable_auto_admins=W&&q&&q.date_delete}}return $("#user_group_alerts").html(TS.templates.user_group_alerts(C)),!0}return!1},"_alertIfNotOk"),b=d(function(){var P=$("#user_groups_header");if(P.length){var C=$("#user_groups_list_scroller");if(C.length){var O=P[0].offsetHeight,z=$(window).height(),K=250,V=z*.15,q=Math.max(K,z-O-V);C.css("height",q)}}},"_onResizeList"),w=d(function(){var P=$("#user_groups_list_div");P&&!e&&(TS.interop.mountUserGroupsList(TS.boot_data.team_id,P[0],{isLegacy:!0,isUserGroupBrowser:!0,includeDeactivated:!0,onClearSearch:()=>D()}),P.addClass("ug_modern_list"),e=!0),o.removeClass("hidden"),t.addClass("hidden"),n.addClass("hidden"),x(),TS.ui.fs_modal.hideBackButton()},"_switchListView"),x=d(function(){$(window).on("resize",b),b(),$("#user_group_modal_search").on("keydown keyup change",se),M=$("#user_groups_header .user_groups_search .icon_close"),M.off("click").on("click",D),o.off("click");var P=d(function(O,z){if(O){l=!1;let K=null;z.subteam&&z.subteam.id&&(K=z.subteam.id),z.usergroup&&z.usergroup.id&&(K=z.usergroup.id),w(K)}},"autoMethodHandler"),C={owners:{create:function(){TS.interop.api.call("subteams.createAuto",{type:"owner"}).then(function(O){let{data:z,args:K,request_id:V}=O;var q=!0;return P&&P(q,z,K,V),{data:z,args:K,request_id:V}}).catch(function(O){let{data:z,args:K,request_id:V}=O;var q=!1;return P&&P(q,z,K,V),{data:z,args:K,request_id:V}})},enable:function(){var O=c("owner");O&&TS.redux.dispatch(TS.interop.userGroups.enableUserGroup({usergroup:O.id})).then(z=>{P(!0,z)})}},admins:{create:function(){TS.interop.api.call("subteams.createAuto",{type:"admin"}).then(function(O){let{data:z,args:K,request_id:V}=O;var q=!0;return P&&P(q,z,K,V),{data:z,args:K,request_id:V}}).catch(function(O){let{data:z,args:K,request_id:V}=O;var q=!1;return P&&P(q,z,K,V),{data:z,args:K,request_id:V}})},enable:function(){var O=c("admin");O&&TS.redux.dispatch(TS.interop.userGroups.enableUserGroup({usergroup:O.id})).then(z=>{P(!0,z)})}}};t.off("click").on("click","a.user_group_auto_action",function(O){var z=$(O.target),K=z.data("auto-type"),V=z.data("auto-action");if(C[K]&&C[K][V])return C[K][V](),O.preventDefault(),!1})},"_bindListUI"),U=d(function(P,C){if(!P){TS.warn("Cannot switch toggle view to undefined User Group");return}B(),n.html(TS.templates.user_group_toggle({action:C,user_group:P})),n.find('[data-action="cancel"]').on("click",S),n.find(".user_group_toggle_btn").on("click",function(){var O=$(this).data("action");_.includes(["enableUserGroup","disableUserGroup"],O)&&TS.redux.dispatch(TS.interop.userGroups[O]({usergroup:P.id})).then(()=>{O==="enableUserGroup"&&ee(P),p()}).catch(function(z){const{data:K}=z;return v(!1,K)})}),o.addClass("hidden"),n.removeClass("hidden"),h()},"_switchToggleView"),ee=d(function(P){TS.interop.userGroups.upsertUserGroup(P),TS.interop.userGroups.searchLocalUserGroups()},"_upsertUserGroup"),R=d(function(P){B(),t.html(TS.templates.user_group_settings_form(P)),$("#user_group_default_channels").lazyFilterSelect(g(P)),A(P),o.addClass("hidden"),t.removeClass("hidden"),h()},"_switchSettingsFormView"),y=d(function(P,C){if(!P||!C)return!1;const O=P&&P.id,z=C.prefs.channels.concat(C.prefs.groups);return _.includes(z,O)},"isPreselected"),T=d(function(P,C){const O=_.get(C,"prefs.channels",[]);return(O.length?TS.shared.ensureModelObsArePresent(O):Promise.resolve()).then(function(){return TS.interop.searcher.search({query:P,options:{entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeArchived:!1,searchPreviousNames:!1,onlyVisibleMpims:!1,includeRequired:!0}},limit:100,tiered:!0,allowEmptyQuery:!0,sort:{frecency:!0}}})}).then(function(K){return K})},"getLFSChannels"),a=d(function(P){return function(C){return T(C,P).then(function(O){return{replace_all_items:!0,all_items_fetched:!0,items:_.map(O,K=>{const V=K.id,q=y(K,P);return{model_ob:K,lfs_id:V,preselected:q}})}})}},"_getLFSChannelsProvider"),g=d(function(P){return{data_promise:a(P),template:function(C){const O=C.model_ob;let z="";return z+=TS.interop.rules.channels.isPublicChannel(O)?"#":'<ts-icon class="ts_icon_lock ts_icon_inherit"></ts-icon>',z+=_.escape(O.name),TS.interop.rules.channels.isOrgShared(O)?z+=' <ts-icon class="ts_icon_shared_channel ts_icon_inherit"></ts-icon>':TS.interop.utility.isModelObjectExternal(O)&&(z+=TS.templates.shared_channels_icon({model_ob:O,tooltip:!0,connectedTeamIds:TS.interop.rules.channels.getConnectedTeamIds(TS.redux.getState(),O),inherit:!0})),new Handlebars.SafeString(z)},placeholder_text:""}},"_getLFSChannelsOptions"),A=d(function(P){var C,O,z;P?(C=TS.interop.userGroups.updateUserGroup,O=!1,z=P.id):(C=TS.interop.userGroups.createUserGroup,O=!0);var K=$("#user_group_handle_input");K.on("input",function(){$(this).closest(".handle_input").toggleClass("empty",!this.value.length)}),t.find(".user_group_settings_form").on("submit",function(te){te.preventDefault();var _e=$('input[name="name"]').val(),ue=$('input[name="handle"]').val(),oe=$('input[name="description"]').val(),le=$("#user_group_default_channels").lazyFilterSelect("value");le=_.map(le,"model_ob.id");var me={name:_e,handle:ue,description:oe,channels:le};z&&(me.usergroup=z),TS.redux.dispatch(C(me)).then(function(N){const m=N.usergroup;ee(m),O?j(m,O):p(),TS.user_groups.updated_info_sig.dispatch(m.id)}).catch(function(N){const{data:m}=N;return v(!1,m)})}),t.find(".user_group_settings_form").on("reset",S);var V=$("#save_user_group"),q=$("#user_group_name_input");function W(){var te=q.val(),_e=K.val();!_.isEmpty(te)&&!_.isEmpty(_e)?V.removeAttr("disabled"):V.attr("disabled",!0)}d(W,"inputChange"),V.length&&q.length&&K.length&&(q.on("change",W),q.on("keyup",W),K.on("change",W),K.on("keyup",W),W())},"_bindSettingsFormUI"),j=d(function(P,C){var O=!!P.is_external||!!P.auto_type,z=d(function(){t.html(TS.templates.user_group_members_form({is_new:C,is_locked:O,user_group:P}))},"renderForm"),K=d(function(){var q=$("#member_count"),W=P.user_count||0,te=d(function(){var ue=$(C?"#create_group":"#save_group");ue.length&&(W<1?ue.prop("disabled",!0):ue.prop("disabled",!1))},"updateForm"),_e={approx_item_height:36,template:function(ue){var oe=TS.templates.user_group_invite_member_small(ue);return new Handlebars.SafeString(oe)},onItemAdded:function(){W+=1,q.html(W),te()},onItemRemoved:function(){W-=1,q.html(W),te()},filter:function(ue,oe){var le=ue.member;oe.charAt(0)==="@"&&(oe=oe.substr(1));var me=new RegExp(`^${TS.utility.regexpEscape(oe)}`,"i"),N=new RegExp(`(-|_|\\+|\\s|\\.|@)${TS.utility.regexpEscape(oe)}`,"i");return TS.utility.members.checkMemberMatch(le,me)||TS.utility.members.checkMemberMatch(le,N)},disabled:!!P.is_external||!!P.auto_type,data_promise:Q(P)};$("#user_group_members_select").lazyFilterSelect(_e),ne(P),o.addClass("hidden"),t.removeClass("hidden"),B(),te()},"renderUI");if(C)z(),TS.ui.fs_modal.hideBackButton(),K();else{var V=d(function(){z(),h(),K()},"work");if(TS.user_groups.legacyNeedsToFetchMembership(P))TS.interop.userGroups.getUserGroupMembers(P.id,function(q){if(q&&q.users){P=q;const W=_.get(P,"users",[]);return TS.interop.members.ensureMembersArePresent(W).then(V)}});else{const q=_.get(P,"users",[]);return TS.interop.members.ensureMembersArePresent(q).then(V)}}},"_switchMembersFormView"),Q=d(function(P){var C=!0;return function(O,z){O.charAt(0)==="@"&&(O=O.substring(1));var K=!1;if(C&&(C=!1,_.get(P,"users.length")&&(K=!0)),K){var V=P.users.map(_e=>TS.interop.members.getMemberById(_e));V.sort(TS.interop.members.memberSorterByName);var q=V.map(function(_e){return _e?{member:_e,lfs_id:String(_e.id),preselected:!0}:{}});return Promise.resolve(q)}if(z>0)return Promise.resolve([]);var W={query:O,include_org:!1,include_slackbot:!1,include_self:!0,full_profile_filter:!1,include_bots:!0,include_profile_only_users:!0},te=X(W);return te}},"_buildMembersSelectDataPromise"),X=d(function(P){return Promise.resolve().then(function(){return TS.members.promiseToSearchMembers(P).then(function(C){var O=[];return C.query===""?O=TS.utility.teams.getMembersForTeam(TS.model.team):O=C.items,C.items=O.filter(Y).map(function(z){return{member:z,lfs_id:String(z.id)}}),C})})},"_getSearchPromise"),ne=d(function(P){t.find(".user_group_members_form").on("submit",function(C){C.preventDefault();var O=$("#user_group_members_select").lazyFilterSelect("value");O=O.map(function(z){return z.member.id}),TS.redux.dispatch(TS.interop.userGroups.updateMembersOfUserGroup({usergroup:P.id,users:O})).then(z=>{p(),TS.user_groups.updated_info_sig.dispatch(z.usergroup.id)}).catch(z=>{const{data:K}=z;v(!1,K)})}),t.find(".user_group_members_form").on("reset",function(C){C.preventDefault(),S(C)})},"_bindMembersFormUI"),se=d(function(P){var C=$(P.target),O=C.val();O!==F&&(F=O,M.toggleClass("hidden",O===""),TS.interop.userGroups.setSearchQuery(F))},"_updateSearch"),D=d(function(){var P=$("#user_group_modal_search");F="",P.val(""),setTimeout(function(){P.focus()},0),M.addClass("hidden"),TS.interop.userGroups.setSearchQuery(F)},"_clearSearch"),Y=d(function(P){return P?!!((TS.interop.rules.members.isMemberOnTeam(P,TS.model.team.id)||P.is_profile_only_user)&&!P.deleted&&!P.is_ultra_restricted&&!P.is_restricted&&!(P.is_bot||TS.interop.rules.members.isSlackbot(P))):!1},"_isFullLocalMember"),J=d(function(P){var C=$("#user_groups_tab .count");C.html(P.length)},"_updateTabUserGroupsCount"),B=d(function(){e=!1;var P=$("#user_groups_list_div");TS.interop.unmountUserGroupsList(P[0])},"_cleanupListView"),F,M})()},339971:()=>{(function(){TS.registerModule("ui.edit_member_profile",{onStart:function(){TS.members.changed_profile_sig.add(t)}});var o,t=d(function(){o&&$("#edit_member_profile_photo_container .member_image").replaceWith(TS.templates.builders.makeMemberPreviewLinkImage(TS.model.user.id,192,!1,!0))},"_maybeUpdateMemberPhoto")})()},409409:()=>{(function(){TS.registerModule("ui.enterprise_teams_dialog",{show:function(f){e(f)},test:function(){var f={};return Object.defineProperty(f,"_showTeamsDialog",{get:function(){return e},set:function(S){e=S}}),Object.defineProperty(f,"_getTeamsDialogChannelTitle",{get:function(){return i},set:function(S){i=S}}),Object.defineProperty(f,"_getTeamsDialogMemberTitle",{get:function(){return u},set:function(S){u=S}}),f}});var o="p-enterprise_teams_dialog",t="enterprise_team_dialog",n=null;function s(f){$(window.document).bind("keydown",l);var S=$(".p-searchable_enterprise_team_list"),p=new TS.SearchableEnterpriseTeamList({$container:S,id:t,model_ob_id:f.id,triggered_by_user_action:!0});p.showInitial(),S.on("click",".p-enterprise_team_row",TS.generic_dialog.cancel)}d(s,"_initDialogUI");var l=d(function(f){f.which==TS.utility.keymap.esc&&TS.generic_dialog.div.find("input").val()===""&&TS.generic_dialog.cancel()},"_onKeydown"),e=d(function(f){var S=_.get(f,"id");if(n!==S){n=S;var p=TS.templates.enterprise_teams_dialog(),h=TS.interop.utility.looksLikeMemberId(_.get(f,"id")),c;h&&!_.get(f,"enterprise_user.teams.length")||!h&&!f.is_global_shared&&!TS.interop.rules.channels.getInternalTeamIds(TS.redux.getState(),f)||(c=h?u(f):i(f),TS.generic_dialog.start({dialog_class:o,title:c,body:p,cancel_button_text:TS.interop.i18n.t("Close","teams")(),hide_footer:!0,show_cancel_button:!0,show_go_button:!1,backdrop_click_to_dismiss:!0,onShow:function(){s(f)},onEnd:function(){var v=TS.SearchableEnterpriseTeamList.get(t);v&&v.destroy(),TS.generic_dialog.div.remove(),TS.generic_dialog.div=void 0,$(window.document).unbind("keydown",l),n=null}}))}},"_showTeamsDialog"),i=d(function(f){return f.is_global_shared?TS.interop.i18n.t("All workspaces in {channel_name}","teams")({channel_name:TS.interop.rules.channels.getDisplayNameForChannel(f)}):TS.interop.i18n.t("{team_count, number} workspaces in {channel_name}","teams")({team_count:TS.interop.rules.channels.getInternalTeamIds(TS.redux.getState(),f).length,channel_name:TS.interop.rules.channels.getDisplayNameForChannel(f)})},"_getTeamsDialogChannelTitle"),u=d(function(f){return TS.interop.i18n.t("Your {enterprise_name} workspaces","teams")({enterprise_name:_.get(f,"enterprise_user.enterprise_name")})},"_getTeamsDialogMemberTitle")})()},892883:()=>{(function(){TS.registerModule("ui.fs_modal",{is_showing:!1,transition_duration:250,start:function(X){if(TS.ui.fs_modal.is_showing)return a(X);c=_.defaults({},X,v),TS.ui.fs_modal.is_showing=!0,TS.tips.hideAll(),b(),c.modal_class&&o.addClass(c.modal_class),c.modal_bg_class&&t.addClass(c.modal_bg_class),c.modal_contents_container_class&&o.find(".contents_container").addClass(c.modal_contents_container_class),s=o.find(".contents"),l=o.find("#fs_modal_sidebar"),e=o.find("#fs_modal_header"),u=o.find("#fs_modal_footer_content");var ne;if(c.body_template_html?(ne=c.body_template_html,c.body&&TS.warn("Both body and body_template_html were passed in settings to TS.ui.fs_modal.start(). Using body_template.")):ne=TS.templates.fs_modal_generic_contents({settings:c,fs_modal_header:_.includes(c.modal_class,"fs_modal_header"),fs_modal_footer:_.includes(c.modal_class,"fs_modal_footer")}),s.html(ne),c.header_html&&e.replaceWith(c.header_html),c.footer_html&&u.html(c.footer_html),c.sidebar_html&&l.html(c.sidebar_html),X.title&&o.attr("aria-label",X.title),!X.title&&e&&o.attr("aria-labelledby","fs_modal_header"),$("#client-ui").attr("aria-hidden",!0),o.on("click",".dialog_go",w),o.on("click",".dialog_secondary_go",x),o.on("click",".dialog_cancel",R),$(window.document).off(".fs_modal"),$(window.document).on("keydown.fs_modal",U),$(window.document).on("focusin.fs_modal",ee),n.on("click",function(){c.esc_for_ok?w():R()}),$("html").addClass("fs_modal_active"),setTimeout(function(){t&&t.addClass("active"),o&&o.addClass("active")},0),o.find("input").length?o.find("input").first().focus():document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),c.onShow&&c.onShow(),c.onShowComplete||TS.model.is_our_app&&TS.interop.desktop.legacyAreDragRegionsRequired()){var se=!1,D=g();p=setTimeout(function(){se=!0,A(),c.onShowComplete&&c.onShowComplete(),o.off(`${D}.fs_modal_show_complete`)},600),o.one(`${D}.fs_modal_show_complete`,function(){se||(A(),clearTimeout(p),c.onShowComplete&&c.onShowComplete())})}},close:function(X){R(X)},bindBackButton:function(X){$("#fs_modal_back_btn").off("click.fs_modal").on("click.fs_modal",X)},unbindBackButton:function(){$("#fs_modal_back_btn").off("click.fs_modal")},showBackButton:function(){$("#fs_modal_back_btn").removeClass("hidden")},hideBackButton:function(){$("#fs_modal_back_btn").addClass("hidden")},activate:function(){o.addClass("active"),t.addClass("active")},deactivate:function(){o.removeClass("active"),t.removeClass("active")},hideFooter:function(){i.length&&(o.removeClass("fs_modal_footer"),i.addClass("hidden"))},isShowing:function(){return TS.ui.fs_modal.is_showing}});var o,t,n,s,l,e,i,u,f=!1,S,p,h=".modal,[role=dialog]:not(.modal),[role=alertdialog]:not(.modal)",c=null,v={title:"",body:"",body_template_html:null,show_go_button:!0,show_secondary_go_button:!1,show_cancel_button:!0,go_button_text:TS.interop.i18n.t("OK","fs_modal")(),go_button_class:"",secondary_go_button_text:TS.interop.i18n.t("OK 2","fs_modal")(),secondary_go_button_class:"",cancel_button_text:TS.interop.i18n.t("Cancel","fs_modal")(),disable_default_controls:!1,disable_esc:!1,onGo:null,onSecondaryGo:null,onCancel:null,onEnd:null,esc_for_ok:!1,onShow:null,enter_always_gos:!1,fullscreen:!1,modal_class:null,modal_bg_class:null,modal_contents_container_class:null,sidebar_html:null,header_html:null,footer_html:null,full_height_contents:!1},b=d(function(){t=null,o=null,e=null,i=null,u=null,n=null,s=null,l=null;var X={settings:c,fs_modal_header:_.includes(c.modal_class,"fs_modal_header"),fs_modal_footer:_.includes(c.modal_class,"fs_modal_footer"),fs_modal_sidebar:_.includes(c.modal_class,"fs_modal_sidebar"),disable_default_controls:c.disable_default_controls},ne=TS.templates.fs_modal(X);$("body").append(ne),t=$("#fs_modal_bg"),o=$("#fs_modal"),e=$("#fs_modal_header"),i=$("#fs_modal_footer"),n=$("#fs_modal_close_btn")},"_build"),w=d(function(){if(!TS.ui.fs_modal.is_showing){TS.error("not showing?");return}c.onGo?c.onGo()!==!1&&R():R()},"_go"),x=d(function(){if(!TS.ui.fs_modal.is_showing){TS.error("not showing?");return}c.onSecondaryGo?c.onSecondaryGo()!==!1&&R():R()},"_secondaryGo"),U=d(function(X){if(X.which==TS.utility.keymap.enter&&(TS.utility.getActiveElementProp("NODENAME")==="BODY"||c.enter_always_gos))c.show_go_button&&(w(),X.preventDefault());else if(X.which==TS.utility.keymap.esc){if(c.disable_esc)return;c.esc_for_ok?w():(R(),c.clog_name&&TS.interop.clog.track(`${c.clog_name}_ACTION`,{source:c.clog_source,action:"close_modal",trigger:"esc_key"}))}},"_onKeyDown"),ee=d(function(X){var ne=$(h).filter(function(){return $(this).css("display")!=="none"}).toArray(),se=_.sortBy(ne,function(Y){return parseInt($(Y).css("z-index"),10)}).pop();if(o.is(se)){var D=X.target;!o.is(D)&&!o.has(D).length&&o.focus()}},"_onFocus"),R=d(function(X){Q(X)&&(o&&o.removeClass("active"),t&&t.removeClass("active"),setTimeout(function(){$("html").removeClass("fs_modal_active")},TS.ui.fs_modal.transition_duration),c.onCancel&&c.onCancel(),T())},"_cancel"),y=d(function(){o.removeAttr("aria-label"),o.removeAttr("aria-labelledby"),o.remove(),t.remove(),TS.ui.fs_modal.is_showing=!1,j()},"_clean"),T=d(function(){setTimeout(function(){y(),$("#client-ui").removeAttr("aria-hidden")},TS.ui.fs_modal.transition_duration),$(window.document).off("keydown.fs_modal"),$(window.document).off("focusin.fs_modal"),clearTimeout(p),o.off(`${g()}.fs_modal_show_complete`),c.onEnd&&c.onEnd(),TS.tips.unhideAll()},"_end"),a=d(function(X){o.removeClass("active"),c.onCancel&&c.onCancel();var ne=t.attr("id",null).addClass("fs_modal_bg");return new Promise(se=>{setTimeout(function(){o.remove(),TS.ui.fs_modal.is_showing=!1,se(TS.ui.fs_modal.start(X)),setTimeout(ne.remove.bind(ne),TS.ui.fs_modal.transition_duration)},TS.ui.fs_modal.transition_duration)})},"_swap"),g=d(function(){var X={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"};for(var ne in X)if(o[0].style[ne]!==void 0)return X[ne]},"_getTransitionEndEventName"),A=d(function(){if(!(!TS.model.is_our_app||!TS.interop.desktop.legacyAreDragRegionsRequired())){if(_.get(window,"desktop.app.updateDragRegion")){window.desktop.app.updateDragRegion([]);return}TS.interop.desktop.legacyUpdateNoDragRegion([]);var X=$("#fs_modal").find("header").find("button, a").toArray();f||(TSSSB.nodrag.updateElements(X),f=!0),S=_.debounce(()=>{TS.interop.utility.requestIdleCallback(()=>TSSSB.nodrag.updateElements(X),{timeout:200})},400),$(window).off("resize.setupNoDragFSM").on("resize.setupNoDragFSM",S)}},"_setupNoDragRegions"),j=d(function(){!TS.model.is_our_app||!TS.interop.desktop.legacyAreDragRegionsRequired()||(f=!1,$(window).off("resize.setupNoDragFSM"),TS.interop.desktop.legacyUpdateNoDragRegion([]))},"_tearDownNoDragRegions"),Q=d(function(X){return X?!0:!(TS.ui.lazy_filter_select.is_list_open||TS.model.menu_is_showing||TS.model.dialog_is_showing||TS.utility.isTabCompleteShowing())},"_canClose")})()},533810:()=>{(function(){TS.registerModule("ui.lazy_filter_select",{STYLES:{default:"default",filter_in_list:"filter_in_list",normal:"normal",small:"small"},onStart:function(){$("select[data-lazy-filter-select], label[data-lazy-filter-select] select").addClass("hidden").lazyFilterSelect({use_data_attributes:!0})},create:function(r,k){if(k.use_data_attributes){var G=Object.keys(r.data());G.forEach(function(fe){if(fe.indexOf("lazyFilterSelect")>-1&&fe!=="TS-lazyFilterSelect"&&r.data(fe)!==""){var pe=r.data(fe);(pe==="true"||pe==="false")&&(pe=pe==="true"),k[fe.replace("lazyFilterSelect","").toLowerCase()]=pe}})}r.prop("tagName")==="SELECT"&&typeof k.single>"u"&&(k.single=!r.prop("multiple"));var L=$.extend({},o,k);k.approx_divider_height===void 0&&(L.approx_divider_height*=1),k.approx_item_height===void 0&&(L.approx_item_height*=1);var Z=$('<div class="lazy_filter_select">');L.classes&&Z.addClass(L.classes),r.prop("disabled")&&(L.disabled=!0),L.disabled&&Z.addClass("disabled"),L.style=_.get(TS.ui.lazy_filter_select.STYLES,L.style,TS.ui.lazy_filter_select.STYLES.default),I(L)&&!L.single&&(TS.warn("Multi-select lazyFilterSelect instances can't use the 'filter_in_list' style. Using 'default' style instead."),L.style=TS.ui.lazy_filter_select.default);var ae=TS.templates.lazy_filter_select_container({instance:L,aria_labelledby:r.attr("aria-labelledby"),STYLES:TS.ui.lazy_filter_select.STYLES});return Z.html(ae),L.append?Z.appendTo(r):Z.insertAfter(r),Z.addClass(`${L.style}_style`),L.single&&(Z.addClass("single"),Z.attr("tabindex",0)),L.width&&Z.css("width",L.width),L.css&&Z.css(L.css),L.$container=Z,L.$select=r,L.$input_container=Z.find(".lfs_input_container"),L.$lfs_value=Z.find(".lfs_value"),L.$input=Z.find(".lfs_input"),L.$list_container=Z.find(".lfs_list_container"),L.$list=Z.find(".lfs_list"),L.$status=Z.find(".lfs_status"),L.$status_loading_indicator=L.$status.find(".lfs_status_loading_indicator"),L.$status_content=L.$status.find(".lfs_status_content"),I(L)?L.$filter_input=Z.find(".lfs_filter_input"):L.$filter_input=L.$input,L._page_number=1,L._slug_id_counter=1,L.run=Y,L.data_promise?(F(L)&&L._running_promise.cancel("Uhhh..."),L._running_promise=B(L,"").then(function(fe){L.data=fe,L.run(),l(L)},function(fe){l(L),TS.interop.utility.getLogger({getState:TS.redux.getState}).error(fe,"LFS error"),ie(L,fe,"Something failed while trying to return the initial data for lazyFilterSelect.")})):(L.data&&(L.data=L.data.slice()),_.forEach(L.data,function(fe,pe,he){fe&&fe._is_interop_channel_object&&(he[pe]=_.assign({},fe))}),L.run(),l(L)),L.current_items_in_view_signal=new signals.Signal,L},is_list_open:!1});var o={allow_item_unselect:!1,allow_list_position_above:!1,always_visible:!1,append:!1,approx_divider_height:28,approx_item_height:30,data_promise:null,data_qa:"lfs",disabled:!1,filter:function(r,k){var G=r.toString();if(k=k.toLowerCase(),r instanceof jQuery||r instanceof HTMLElement){G=$(r).text();var L=$(r).attr("data-additional-search-field");if(L&&L.toLowerCase().indexOf(k)>-1)return!0}return G.toLowerCase().indexOf(k)>-1},input_debounce_wait_time:void 0,listItemClass:null,max_selected_items:1/0,min_query_length:0,monkey_scroll:!0,no_default_selection:!1,noResultsTemplate:function(r){return H(this)&&r.length<this.min_query_length?TS.interop.i18n.t("{query_length, plural, =0 {Start typing to see results\u2026} other {Keep typing to see results\u2026}}","lazy_filter_select")({query_length:r.length}):TS.interop.i18n.t("No items matched {query}","lazy_filter_select")({query:TS.interop.i18n.safeString(`<strong>${_.escape(r)}</strong>`)})},errorTemplate:function(r){return r||TS.interop.i18n.t("Couldn't load results.","lazy_filter_select")()},onInputBlur:_.noop,onInputFocus:_.noop,onReady:function(){},onItemAdded:function(){},onItemRemoved:function(){},onKeyDown:function(){},onMaxItemsSelected:function(){},onListShown:_.noop,onListHidden:_.noop,adjustAvailableSpaceAbove:_.identity,adjustAvailableSpaceBelow:_.identity,placeholder_text:TS.interop.i18n.t("Choose an option\u2026","lazy_filter_select")(),filter_placeholder_text:TS.interop.i18n.t("Search","lazy_filter_select")(),renderDividerFunc:null,render_item_func:null,restrict_input_container_height:!1,restrict_preselected_item_removal:!1,scroll_threshold:1e3,set_height:!0,single:!1,sluggify:{enabled:!1,delimiter:null,key_name:null,validator:null},style:TS.ui.lazy_filter_select.STYLES.default,template:function(r){var k=r.toString(),G,L;return(r instanceof jQuery||r instanceof HTMLElement)&&(k=$(r).text(),G=N($(r).attr("data-additional-search-field"),this),L=N($(r).attr("data-ts-icon"),this)),k=N(k,this),G&&(k+=` <span class="addl_text">${G}</span>`),L&&(k+=` <ts-icon class="addl_icon ${L}"></ts-icon>`),new Handlebars.SafeString(k)},tokenClass:null,tokenTemplate:null,tokenTemplateSingle:null,use_data_attributes:!1,_$active:null,_all_done_fetching:!1,_list_built:!1,_list_visible:!1,_mouse:{},_page_number:1,_prevent_blur:!1,_previous_val:"",_running_promise:null,_scroll_callback_was_called:!1,_selected:[],_showing_status:!1};$.widget("TS.lazyFilterSelect",{_create:function(){this.instance=TS.ui.lazy_filter_select.create(this.element,this.options)},_destroy:function(){this.instance.$container.remove(),delete this.instance},blur:function(){this.instance.$filter_input.blur()},clearValue:function(){if(this.instance.single){if(this.instance._selected.length){var r=this.instance.$input_container.find(".lfs_item");se(this.instance,r)}}else X(this.instance)},container:function(){return this.instance.$container},disable:function(){h(this.instance)},disabled:function(){return this.instance.disabled},enable:function(){v(this.instance)},focus:function(){this.instance.$filter_input.focus()},getInstance:function(){return this.instance},hideList:function(){ee(this.instance,{force:!0}),ge(this.instance)},recomputeHeight:function(){le(this.instance)},setValue:function(r,k){var G=this.element[0].selectedIndex;this.element.val(r),this.element[0].selectedIndex<0&&(this.element[0].selectedIndex=0);var L=this.element[0].options[this.element[0].selectedIndex];if(this.instance.single){if(this.element[0].selectedIndex==G&&!k)return}else X(this.instance);var Z=x(this.instance,$(L));C(this.instance,Z)},forceSelectItem:function(r){this.instance.$lfs_value.html(e(this.instance,r,{force_selected:!0})),this.instance.$container.addClass("value")},showList:function(){q(this.instance)},update:function(r){oe(this.instance,r)},updatePlaceholder:function(r){this.instance.placeholder_text=r,this.instance.$input.prop("placeholder",r)},updateFilterPlaceholder:function(r){I(this.instance)&&(this.instance.filter_placeholder_text=r,this.instance.$filter_input.prop("placeholder",r))},value:function(){return this.instance._selected}});var t=d(function(r,k){if(R(r)&&k.trim()&&p(r)){var G={};G[r.sluggify.key_name]=k.trim(),G.lfs_id=null,G.lfs_slug_id=r._slug_id_counter,r._slug_id_counter+=1,r._selected.push(G);var L=TS.templates.lazy_filter_select_item({content:r.tokenTemplate(G),applied_classes:"lfs_token",slug_id:G.lfs_slug_id,data_qa:r.data_qa}).replace(/(\r\n|\n|\r)/gm,""),Z=$(L);Z.insertBefore(r.$input),r.sluggify.validator&&r.sluggify.validator(Z),A(r,r.data),q(r),r.$filter_input.val(""),r._previous_val="",n(r),r.onItemAdded(G),p(r)||r.onMaxItemsSelected()}},"_addUserCreatedSlugFromString"),n=d(function(r){r.single||(r.$input.prop("size",r.$filter_input.val().length+1),r.$filter_input.val().length+r._selected.length===0?V(r):(r.$input_container.removeClass("empty"),r.$input_container.removeClass("error"),m(r)))},"_adjustInput"),s=d(function(r){r.data_promise&&r.$list.on("scroll",function(){var k=$(this).scrollTop(),G=r.$list.height(),L=r.$list.find(".list_items").height(),Z=L-k-G;Z<=r.scroll_threshold&&!r._scroll_callback_was_called&&!r._all_done_fetching?(S(r,r._previous_val,r._page_number+1),r._scroll_callback_was_called=!0):Z>r.scroll_threshold&&r._scroll_callback_was_called&&(F(r)&&r._running_promise.cancel("User scrolled back and we do not need to add more data"),r._scroll_callback_was_called=!1)})},"_bindListListeners"),l=d(function(r){r.$container.on("mouseleave",ye.bind(null,r)),r.$container.on("click",Te.bind(null,r)),r.$container.parents("label").on("click",Pe.bind(null,r)),r.$container.on("keydown",Fe.bind(null,r)),r.$input_container.on("focus",He.bind(null,r)),r.$input.on("focus",ke.bind(null,r));var k;_.isUndefined(r.input_debounce_wait_time)?k=Ce:k=_.debounce(Ce,r.input_debounce_wait_time),r.$filter_input.on("input",k.bind(null,r)),r.$filter_input.on("keydown",Me.bind(null,r)),r.$filter_input.on("blur",Be.bind(null,r)),r.$lfs_value.on("click",Oe.bind(null,r)),r.$lfs_value.on("mousedown",je.bind(null,r)),r.$input_container.on("click",".lfs_token",Le.bind(null,r)),r.$input_container.on("mousedown",".lfs_token",ze.bind(null,r)),r.$list_container.on("mousedown",Ae.bind(null,r)),r.$list_container.on("mouseup",We.bind(null,r)),r.$list_container.on("mousemove",".lfs_item",De.bind(null,r)),r.$list_container.on("mouseleave",".lfs_item.active",Ke.bind(null,r)),r.$list_container.on("click",".lfs_item",Re.bind(null,r)),r.onReady()},"_bindUI"),e=d(function(r,k,G){var L=$(k);G=G||{};var Z=G.force_selected||y(r,k),ae=k.disabled||k.lfs_disabled;r.restrict_preselected_item_removal&&k.preselected&&(ae=!0);var fe;G.should_tokenize&&_.isFunction(r.tokenTemplate)?fe=r.tokenTemplate(k):r.single&&_.isFunction(r.tokenTemplateSingle)?fe=r.tokenTemplateSingle(k):fe=r.template(k);var pe=N(L.data("lfs-item-desc"),r),he={active:r._previous_val!==""&&!Z&&!ae,disabled:ae,lfs_token:G.should_tokenize,selected:Z,single:r.single,group_item:L.hasClass("group_item")};return _.isFunction(r.tokenClass)&&(he[r.tokenClass(k)]=!0),TS.templates.lazy_filter_select_item({content:fe,icon:L.data("lfs-item-icon"),desc:new Handlebars.SafeString(pe),applied_classes:TS.utility.getAppliedClasses(he),lfs_id:k.lfs_id,data_qa:r.data_qa}).replace(/(\r\n|\n|\r)/gm,"")},"_buildItem"),i="position_above",u="show_status",f=d(function(r){if(!(!r._list_built&&!r._showing_status)){r.$list_container.removeClass(i);var k=r.$list.css("max-height");r.$list.css({"max-height":0});var G=r.$list[0].scrollHeight,L=parseInt(r.$list_container.css("padding-top"),10)+parseInt(r.$list_container.css("padding-bottom"),10)+parseInt(r.$list_container.css("border-top-width"),10)+parseInt(r.$list_container.css("border-bottom-width"),10)+parseInt(r.$list_container.css("margin-top"),10)+parseInt(r.$list_container.css("margin-bottom"),10);I(r)&&(L+=r.$filter_input.outerHeight()+parseInt(r.$filter_input.css("margin-bottom"),10));var Z=parseInt(r.$list_container.css("max-height"),10),ae=2*r.approx_item_height+L,fe=Math.min(G+L,Z),pe=$(window).height(),he=r.$input_container[0].getBoundingClientRect().bottom+parseInt(r.$input_container.css("margin-bottom"),10),ve=r.adjustAvailableSpaceBelow(pe-he);if(r.allow_list_position_above){var we=r.$input_container[0].getBoundingClientRect().top+parseInt(r.$input_container.css("margin-top"),10),Se=r.adjustAvailableSpaceAbove(we),Ee=Se>=fe,be=ve>=fe&&ve>ae;Ee&&!be&&(ve=Se,r.$list_container.addClass(i))}var $e=Math.floor(Math.min(ve,fe)-L);r.$list.css({"max-height":$e||k})}},"_sizeAndPositionItemsList"),S=d(function(r,k,G){F(r)&&r._running_promise.cancel("Scrolling happened"),!r._all_done_fetching&&(r._running_promise=r.data_promise(k,G).then(function(L){var Z=L;if(Z.items&&(Z=Z.items),Z&&Z.length){r._page_number+=1,r._current_data||(r._current_data=r.data.slice()),typeof L.all_items_fetched<"u"&&(r._all_done_fetching=!!L.all_items_fetched),typeof L.num_remaining<"u"&&L.num_remaining===0&&(r._all_done_fetching=!0);var ae,fe=parseInt(L.num_new,10)||0;ae=Z.slice(-fe),ae.length?(L._replace_all_items||L.replace_all_items?r._current_data=ae:r._current_data=r._current_data.concat(ae),c(r,r._current_data)):r._all_done_fetching=!0}else r._all_done_fetching=!0},function(L){TS.interop.utility.getLogger({getState:TS.redux.getState}).error(L,"LFS error"),ie(r,L,"Something failed while trying to return the next batch of data for lazyFilterSelect.")}))},"_callScrollCallback"),p=d(function(r){return r._selected.length<r.max_selected_items},"_canAddNewItem"),h=d(function(r){r.disabled||(r.disabled=!0,r.$container.addClass("disabled"),r.$input.prop("disabled",!0),r.$filter_input.prop("disabled",!0))},"_disable"),c=d(function(r,k){Q(r,k),A(r,k);var G=r._list_built&&(!r.data||r.data.length===0||r.always_visible);G&&q(r,!0),n(r)},"_doAllTheThingsRequiredWithNewData"),v=d(function(r){r.disabled&&(r.disabled=!1,r.$container.removeClass("disabled"),r.$input.prop("disabled",!1),r.$filter_input.prop("disabled",!1))},"_enable"),b=d(function(r,k){for(var G=r.data,L=[],Z=0;Z<G.length;Z+=1){var ae=G[Z];if(ae.lfs_group||ae.is_divider){for(var fe=[],pe=0;pe<ae.children.length;pe+=1){var he=ae.children[pe];r.filter(he,k)&&fe.push(he)}fe.length>0&&L.push({is_divider:!0,lfs_group:!0,label:ae.label,children:fe})}else r.filter(ae,k)&&L.push(ae)}return L},"_filterGroup"),w=d(function(r){return r.attr("data-lfs-id")||r.prop("lfs_id")||null},"_getLfsId"),x=d(function(r,k,G){var L=w(k),Z;if(G)Z=r._selected;else if(Z=r.data_promise&&r._current_data?r._current_data:r.data,L.indexOf(".")!==-1){var ae=parseInt(L.split(".")[0],10);Z=Z[ae]?Z[ae].children:Z[0].children}var fe=Z.filter(function(pe){return pe.lfs_id===L});return fe.length?fe[0]:null},"_getData"),U=d(function(r,k){var G=parseInt(k.attr("data-lfs-slug-id"),10),L=r._selected,Z=L.filter(function(ae){return ae.lfs_slug_id===G});return Z.length?Z[0]:null},"_getUserCreatedSlugData"),ee=d(function(r,k){k=k||{};var G=!r._list_visible||r.always_visible||r.disabled;G&&!k.force||(r._list_visible=!1,r.$list_container.removeClass("visible"),r.$container.removeClass("list_visible"),r.$input_container.removeClass("active"),r._list_built&&r.$list.longListView("setHidden",!0),r._$active=null,r.onListHidden())},"_hideList"),R=d(function(r){return r.sluggify.enabled?r.sluggify.delimiter?r.sluggify.key_name?r.single?(TS.error("Sluggify only works in multi-select versions of lazyFilterSelect."),!1):!0:(TS.error("You must pass a key name to use sluggify with lazyFilterSelect."),!1):(TS.error("You must pass a delimiter regular expression to use sluggify with lazyFilterSelect."),!1):!1},"_instanceCanSluggify"),y=d(function(r,k){if(!r._selected.length)return!1;var G=r._selected.filter(function(L){return L.lfs_id===k.lfs_id});return!!G.length},"_isAlreadySelected"),T=d(function(r){return r instanceof jQuery?!!r.attr("data-lfs-slug-id"):r.lfs_slug_id!==void 0},"_itemIsUserCreatedSlug"),a=d(function(r,k,G){if(R(r)&&T(k)){var L=$(k),Z=N(L.data("lfs-item-desc"),r);r._slug_id_counter=Math.max(k.lfs_slug_id,r._slug_id_counter)+1,r._selected.push(k);var ae,fe=TS.templates.lazy_filter_select_item({content:r.tokenTemplate(k),icon:L.data("lfs-item-icon"),desc:new Handlebars.SafeString(Z),applied_classes:"lfs_token",slug_id:k.lfs_slug_id,data_qa:r.data_qa}).replace(/(\r\n|\n|\r)/gm,"");return ae=$(fe),ae.insertBefore(r.$input),n(r),r.sluggify.validator&&r.sluggify.validator(ae),r.data=G.filter(function(pe){return pe.lfs_slug_id!==k.lfs_slug_id}),r.data}},"_loadSlugAndRemoveFromData"),g=d(function(r){var k=r.children("option, optgroup"),G=k.length>0?[]:void 0;return k.each(function(){if($(this).prop("tagName")==="OPTGROUP"){var L=$(this).children("option").toArray();$(this).prop("disabled")&&(L=L.map(function(Z){return Z.lfs_disabled=!0,Z})),G.push({is_divider:!0,lfs_group:!0,label:$(this).prop("label"),children:L})}else G.push(this)}),G},"_parseHTMLOptionData"),A=d(function(r,k){if(k||(k=r.data),!k){ie(r);return}if(k.length===0){re(r);return}if(ge(r,{keep_input_active:!0}),!r._list_built)(!r.data||r.data.length===0)&&(r.data=k),W(r);else{var G=j(k);r.$list.longListView("setItems",G,!0),r._current_data=k,le(r)}f(r)},"_populate"),j=d(function(r){var k=[];return r.forEach(function(G){if(k.push(G),G.children&&G.children.length)for(var L=0;L<G.children.length;L+=1)k.push(G.children[L])}),k},"_preLongListViewPrep"),Q=d(function(r,k){if(k||(k=r.data),!!k){for(var G="",L=!r.single,Z=0;Z<k.length;){var ae=k[Z];if(T(ae)){k=a(r,ae,k);continue}if(ae.children&&ae.children.length&&(ae.lfs_group=!0),ae.lfs_group||ae.is_divider){ae.is_divider=!0;for(var fe=Z,pe=0;pe<ae.children.length;pe+=1){var he=ae.children[pe];if(he.lfs_id=he.lfs_id||`${fe}.${pe}`,(he.selected||he.preselected)&&r.no_default_selection===!1){if(r.single&&r._selected.length>0||y(r,he))continue;r._selected.push(he),G+=e(r,he,{should_tokenize:L})}}}else if(ae.lfs_id=ae.lfs_id||String(Z),(ae.selected||ae.preselected)&&r.no_default_selection===!1){if(r.single&&r._selected.length>0||y(r,ae)){Z+=1;continue}r._selected.push(ae),G+=e(r,ae,{should_tokenize:L})}Z+=1}G.length>0&&(r.$container.addClass("value"),r.single?r.$lfs_value.html(G):($(G).insertBefore(r.$input),r.$input_container.removeClass("empty"),r.$input_container.removeClass("error"),m(r)))}},"_prepItems"),X=d(function(r){for(;r.$input_container.find(".lfs_token").length>0;)ne(r)},"_removeAllSelected"),ne=d(function(r){var k=r.$input_container.find(".lfs_token").last();k.length&&se(r,k)},"_removeLastSelected"),se=d(function(r,k){if(!r.disabled){if(T(k)){D(r,k);return}var G=x(r,k,!0);if(!(G.disabled||r.restrict_preselected_item_removal&&G.preselected)){r._selected=r._selected.filter(function(Z){return Z!==G});var L=r.$list.find(`[data-lfs-id="${G.lfs_id}"]`);L.removeClass("selected"),k.remove(),me(r),r.$filter_input.val().length+r._selected.length===0&&V(r),r._selected.length===0&&r.$container.removeClass("value"),r.onItemRemoved(G)}}},"_removeSelected"),D=d(function(r,k){if(R(r)){var G=U(r,k);r._selected=r._selected.filter(function(L){return L!==G}),k.remove(),me(r),r.$filter_input.val().length+r._selected.length===0&&V(r),r.onItemRemoved(G)}},"_removeUserCreatedSlug"),Y=d(function(){this.data&&this.data.length===0&&TS.warn("Data passed to lazyFilterSelect is empty."),oe(this,this.data),this.always_visible&&q(this),this.restrict_input_container_height&&(this.$container.addClass("has_restricted_input_container_height"),TS.environment.supports_custom_scrollbar||this.$input_container.monkeyScroll())},"_run"),J=d(function(r,k,G){if(!r.disabled&&k!==r._previous_val)if(r._all_done_fetching=!1,r._previous_val=k,r._$active=null,n(r),r._page_number=1,r._list_built&&r.$list.longListView("scrollToTop",!0),r.data_promise)F(r)&&r._running_promise.cancel("User entered more text"),r._running_promise=B(r,k).then(function(Z){c(r,Z),q(r,G)},function(Z){TS.interop.utility.getLogger({getState:TS.redux.getState}).error(Z,"LFS error"),ie(r,Z,"Something failed while trying to return the filtered data for lazyFilterSelect.")});else{q(r,G);var L=b(r,k);A(r,L),n(r)}},"_runQuery"),B=d(function(r,k){return new Promise(function(G,L){k.length<r.min_query_length?(r._all_done_fetching=!0,G([])):(_.delay(function(){F(r)&&de(r)},650),r.data_promise(k).then(function(Z){Z=Z||{},_.isUndefined(Z.all_items_fetched)||(r._all_done_fetching=!!Z.all_items_fetched),Z.num_remaining===0&&(r._all_done_fetching=!0);var ae=(Z.items||Z).slice();G(ae),ge(r,{keep_input_active:!0})},function(Z){L(Z),ge(r)}))})},"_runDataPromiseQuery"),F=d(function(r){return r._running_promise&&r._running_promise.isPending()},"_isRunningPromisePending"),M=d(function(r,k){if(!r.disabled){if(!r._list_visible){q(r);return}var G;r._$active?G=r._$active[k](".lfs_item:not(.disabled, .hidden)").first():G=r.$list.find(".lfs_item:not(.disabled, .hidden)").first(),G.length&&(G.scrollintoview({duration:0}),r._$active&&r._$active.removeClass("active"),G.addClass("active"),r._$active=G)}},"_select"),P=d(function(r){return!(r.hasClass("selected")||r.hasClass("disabled"))},"_selectable"),C=d(function(r,k){if(p(r)){if(r.single&&r._selected.length){var G=r.$list.find(`[data-lfs-id="${r._selected[0].lfs_id}"]`);G.removeClass("selected"),r._selected.length=0,r.$lfs_value.empty()}r._selected.push(k),me(r);var L=$(e(r,k,{should_tokenize:!r.single}));_.isFunction(r.tokenClass)&&L.addClass(r.tokenClass(k)),r.single?r.$lfs_value.html(L):(L.addClass("lfs_token"),L.insertBefore(r.$input)),r.single||(r.$input_container.removeClass("empty"),r.$input_container.removeClass("error"),m(r)),r.$container.addClass("value"),r.onItemAdded(k),p(r)||r.onMaxItemsSelected(),r.single||r.$filter_input.focus()}},"_selectDataItem"),O=d(function(r){return M(r,"nextAll")},"_selectDown"),z=d(function(r){if(!r.disabled){var k=r._$active;if(k.length&&P(k)&&p(r)){k.addClass("selected"),k.removeClass("active"),r._$active=null;var G=x(r,k);C(r,G)}}},"_selectListItem"),K=d(function(r){return M(r,"prevAll")},"_selectUp"),V=d(function(r){r.$input_container.addClass("empty"),E(r)},"_showEmptyState"),q=d(function(r,k){r.disabled||(TS.utility.rAF(function(){r.$filter_input.focus()}),!r._list_visible&&(r._showing_status&&r.always_visible||(r._list_built||W(r),(r._list_built||r._showing_status)&&(r._list_visible=!0,r.$list_container.addClass("visible"),r.$container.addClass("list_visible"),I(r)||r.$input_container.addClass("active"),r._list_built&&r.$list.longListView("setHidden",!1)),r.single&&!k&&(r.$filter_input.val(""),r._previous_val="",r.$filter_input.focus(),H(r)&&(r.data=[]),A(r)),r.set_height&&(f(r),r.monkey_scroll&&!TS.environment.supports_custom_scrollbar&&r.$list.monkeyScroll()),r.onListShown())))},"_showList"),W=d(function(r){if(!(!r.data||r.data.length===0)){var k=j(r.data);r._list_built=!0;var G={items:k,approx_item_height:r.approx_item_height,approx_divider_height:r.approx_divider_height,preserve_dom_order:!0,calcDividerHeight:function(L){return L.outerHeight()},makeDivider:function(){return $('<div class="lfs_group"></div>')},makeElement:function(){return $(TS.templates.lazy_filter_select_item().replace(/(\r\n|\n|\r)/gm,""))},renderDivider:function(L,Z,ae){if(r.renderDividerFunc)return r.renderDividerFunc(L,Z,ae);L.html(N(Z.label,r))},renderItem:function(L,Z,ae){if(r.render_item_func)return r.render_item_func(L,Z,ae);var fe=$(Z),pe="active selected disabled single group_item lfs_token",he={disabled:Z.disabled||Z.lfs_disabled,selected:y(r,Z),single:r.single,group_item:fe.hasClass("group_item")};_.isFunction(r.listItemClass)&&(he[r.listItemClass(Z)]=!0);var ve=TS.utility.getAppliedClasses(he),we={"data-qa":`${r.data_qa}-item-${Z.lfs_id}`,"data-lfs-id":Z.lfs_id,title:Z.title};if(L.attr(we).removeClass(pe).addClass(ve).html(r.template(Z).string),fe.data("lfs-item-icon")){var Se=`url(${fe.data("lfs-item-icon")})`,Ee=$('<span class="lfs_item_icon">').css("background-image",Se);L.prepend(Ee)}if(fe.data("lfs-item-desc")){var be=N(fe.data("lfs-item-desc"),r),$e=$('<span class="lfs_item_desc">').html(be);L.append($e)}}};r.$list.longListView(G),s(r),r.$list_items=r.$container.find(".list_items"),TS.utility.rAF(function(){r.monkey_scroll&&!TS.environment.supports_custom_scrollbar&&r.$list.monkeyScroll(),r.$list.longListView("resizeImmediately"),TS.utility.rAF(function(){r.current_items_in_view_signal.dispatch(r.$list.longListView("getCurrentItemsInView")||[])})}),r.$list.longListView("getCurrentItemsInViewSignal")&&r.$list.longListView("getCurrentItemsInViewSignal").add(function(L){r.current_items_in_view_signal.dispatch(L)})}},"_startListView"),te=d(function(r){r.stopPropagation(),r.preventDefault()},"_stopThePresses"),_e=d(function(r,k){if(!(r.single||!r.allow_item_unselect)){var G=x(r,k,!0);k.removeClass("selected"),r._selected=r._selected.filter(function(L){return L!==G}),r.$input_container.find(`.lfs_item[data-lfs-id="${G.lfs_id}"]`).remove(),me(r),r.$filter_input.val().length+r._selected.length===0&&V(r),r._selected.length===0&&r.$container.removeClass("value"),r.onItemRemoved(G)}},"_unselectItem"),ue=d(function(r,k){if(!(!R(r)||!T(k))){var G=k.text().trim();k.length&&D(r,k),r.$filter_input.val(G),n(r),r.$filter_input.select()}},"_unsluggifySlug"),oe=d(function(r,k){if(r.data=k||g(r.$select),r.data&&(r._selected=[],Q(r),r.$filter_input.val().length)){var G=r.$filter_input.val();r._previous_val="",J(r,G)}},"_update"),le=d(function(r){r.restrict_input_container_height&&TS.ui.utility.updateClosestMonkeyScroller(r.$input_container,!0),r.monkey_scroll&&!TS.environment.supports_custom_scrollbar&&(f(r),TS.utility.rAF(function(){TS.ui.utility.updateClosestMonkeyScroller(r.$list,!0)}))},"_updateMonkeyScroll"),me=d(function(r){if(!r.append){var k=r._selected.filter(function(G){return G instanceof HTMLOptionElement}).map(function(G){return $(G).val()});r.$select.val(k).trigger("change")}},"_updateVal"),N=d(function(r){return r=_.escape(r),r},"_formatTextForDisplay"),m=d(function(r){r.$input.attr("placeholder",""),I(r)&&r.$filter_input.attr("placeholder","")},"_clearPlaceholderText"),E=d(function(r){r.$input.attr("placeholder",r.placeholder_text),I(r)&&r.$filter_input.attr("placeholder",r.filter_placeholder_text)},"_resetPlaceholderText"),I=d(function(r){return r.style===TS.ui.lazy_filter_select.STYLES.filter_in_list},"_isFilterInListStyle"),H=d(function(r){return _.isFunction(r.data_promise)&&r.min_query_length},"_usingMinQueryLength"),ie=d(function(r,k,G){ce(r,r.errorTemplate(k),{internal_error_message:G,clear_active_items:!0})},"_showErrorStatus"),re=d(function(r){var k=r.noResultsTemplate(r.$filter_input.val());ce(r,k,{clear_active_items:!0})},"_showNoResultsStatus"),de=d(function(r){var k=TS.interop.i18n.t("Loading results\u2026","lazy_filter_select")();ce(r,k,{show_loading_indicator:!0})},"_showLoadingStatus"),ce=d(function(r,k,G){G=G||{},r._showing_status=!0,G.internal_error_message&&TS.error(G.internal_error_message),I(r)||r.$input_container.addClass("active"),G.show_loading_indicator&&r.$status_loading_indicator.removeClass("hidden"),G.clear_active_items&&(r._$active=null),r.$status_content.html(k),r.$list_container.addClass(u)},"_showStatus"),ge=d(function(r,k){k=k||{},r._showing_status=!1,k.keep_input_active||r.$input_container.removeClass("active"),r.$status_loading_indicator.addClass("hidden"),r.$list_container.removeClass(u)},"_hideStatus"),ye=d(function(r){r._prevent_blur=!1},"_onContainerMouseleave"),Te=d(function(r){r.disabled||q(r)},"_onContainerClick"),Fe=d(function(r,k){r.disabled||k.which!==13||q(r)},"_onContainerKeydownEnter"),Pe=d(function(r,k){r.disabled||(k.preventDefault(),q(r))},"_onContainerParentsLabelClick"),He=d(function(r){r.$input_container.click(),r.$input.focus()},"_onInputContainerFocus"),ke=d(function(r){r._input_is_focused||(r._input_is_focused=!0,r.$input_container.click(),r.onInputFocus()),r.single||r.$input_container.addClass("active")},"_onInputFocus"),Ce=d(function(r){var k=r.$filter_input.val();if(R(r)&&k.match(r.sluggify.delimiter)){var G=k.split(r.sluggify.delimiter);G.forEach(function(L){L.length&&t(r,L)})}else J(r,k,!0)},"_onFilterInputInput"),Me=d(function(r,k){if(!r.disabled){switch(k.keyCode){case TS.utility.keymap.down:te(k),O(r);break;case TS.utility.keymap.up:te(k),K(r);break;case TS.utility.keymap.enter:xe(r,k);break;case TS.utility.keymap.del:Ue(r,k);break;case TS.utility.keymap.tab:Ie(r,k);break;case TS.utility.keymap.esc:Ne(r,k);break;default:break}r.onKeyDown(k,k.isDefaultPrevented())}},"_onFilterInputKeydown"),Be=d(function(r){r._prevent_blur||(ee(r),ge(r)),r._input_is_focused=!1,r.onInputBlur()},"_onFilterInputBlur"),xe=d(function(r,k){if(r._$active&&r._$active.length&&r._list_visible){te(k);var G=r._$active,L=!r.single&&r.allow_item_unselect&&y(r,x(r,G));if(L)_e(r,G);else{if(!p(r))return;z(r);var Z=$(k.currentTarget);Z.val()!==""&&(Z.val(""),r._previous_val="",A(r)),r.single&&(ee(r),ge(r))}}},"_onFilterInputKeydownEnter"),Ue=d(function(r,k){if(r.$filter_input.val()===""){te(k);var G=r.$input_container.find(".lfs_token").last();R(r)&&T(G)?ue(r,G):ne(r)}},"_onFilterInputKeydownDel"),Ie=d(function(r,k){r.$filter_input.val().trim()&&R(r)?(te(k),t(r,r.$filter_input.val())):r.tab_to_nav&&(te(k),k.shiftKey?K(r):O(r))},"_onFilterInputKeydownTab"),Ne=d(function(r,k){te(k),ee(r),ge(r),r.$filter_input.blur()},"_onFilterInputKeydownEsc"),Oe=d(function(r,k){r.disabled||(k.stopPropagation(),q(r),r._prevent_blur=!1)},"_onValueClick"),je=d(function(r,k){k.which===1&&(r._prevent_blur=!0)},"_onValueMousedown"),Le=d(function(r,k){r.disabled||(se(r,$(k.currentTarget)),r._prevent_blur=!1)},"_onTokenClick"),ze=d(function(r,k){k.which===1&&(r._prevent_blur=!0)},"_onTokenMousedown"),Ae=d(function(r,k){k.which===1&&(r._prevent_blur=!0)},"_onListContainerMousedown"),We=d(function(r){r._prevent_blur&&r.$filter_input.focus()},"_onListContainerMouseup"),De=d(function(r,k){if(!r.disabled&&!(k.clientX==r._mouse.lastX&&k.clientY==r._mouse.lastY)){var G=$(k.currentTarget);r._$active&&r._$active.removeClass("active"),!G.hasClass("active")&&P(G)&&(G.addClass("active"),r._$active=G),r._mouse.lastX=k.clientX,r._mouse.lastY=k.clientY}},"_onItemMousemove"),Ke=d(function(r,k){$(k.currentTarget).removeClass("active"),r._$active=null},"_onActiveItemMouseleave"),Re=d(function(r,k){if(!r.disabled){k.preventDefault();var G=$(k.currentTarget);r._$active=G;var L=!r.single&&r.allow_item_unselect&&y(r,x(r,G));if(L)_e(r,G);else{var Z=P(G);if(!Z&&!r.single||!p(r))return;if(!Z&&r.single){ee(r),k.stopPropagation();return}z(r),r.$filter_input.val()!==""&&(r.$filter_input.val(""),r._previous_val="",A(r)),r.single&&(ee(r),k.stopPropagation())}r._prevent_blur=!1}},"_onItemClick")})()},204798:()=>{(function(){TS.registerModule("ui.people_picker",{STYLES:{normal:"normal",small:"small"},onStart:function(){},preload:function(s){return t(s)(""),s},make:function(s,l){l=l||{},l.append||s.addClass("hidden"),l.style=_.get(TS.ui.people_picker.STYLES,l.style,TS.ui.people_picker.STYLES.normal),s.lazyFilterSelect({append:!!l.append,always_visible:!!l.always_visible,approx_item_height:l.approx_item_height||50,data_promise:t(l),placeholder_text:l.placeholder_text||TS.interop.i18n.t("Search by name","people_picker")(),classes:"people_picker",scroll_threshold:2500,single:!!l.single,style:l.style,sluggify:l.sluggify,disabled:l.disabled,template:l.template||function(e){var i=TS.templates.member_small({member:e.member});return new Handlebars.SafeString(i)},tokenTemplate:l.tokenTemplate||function(e){var i=TS.templates.member_token({member:e.member});return new Handlebars.SafeString(i)},tokenClass:function(e){return TS.templates.builders.getMemberTypeClass(e.member)},noResultsTemplate:l.noResultsTemplate||function(e){return e?TS.interop.i18n.t("No one found matching <strong>{query}</strong>","people_picker")({query:TS.interop.i18n.safeString(_.escape(e))}):TS.interop.i18n.t("No one found","people_picker")()},onItemAdded:l.onItemAdded,onItemRemoved:l.onItemRemoved})},value:function(s){return s.lazyFilterSelect("value")},clearValue:function(s){return s.lazyFilterSelect("clearValue")},recomputeHeight:function(s){return s.lazyFilterSelect("recomputeHeight")}});var o=["include_slackbot","include_self","include_bots","only_local_team","only_admins"],t=d(function(s){var l={},e={};s.preselected_ids&&s.preselected_ids.length&&_.forEach(s.preselected_ids,function(f){f&&(e[f]=!0)});var i={};s.omitted_ids&&s.omitted_ids.length&&_.forEach(s.omitted_ids,function(f){f&&(i[f]=!0)});var u=d(function(f,S){if(f.charAt(0)==="@"&&(f=f.substring(1)),f===""&&s.empty_query_result)return S>0?Promise.resolve([]):Promise.resolve(s.empty_query_result.map(function(h){return{member:h,lfs_id:String(h.id),preselected:!!e[h.id]}}));if(f===""&&s.initial_load_promise)return _.isUndefined(S)||(s.initial_load_promise=n(s.initial_load_promise,e,i)),s.initial_load_promise;l.query!==f&&(l.query=f,l.include_org=TS.boot_data.page_needs_enterprise,l.include_slackbot=!!s.include_slackbot,l.include_self=s.include_self,l.full_profile_filter=!1,l.include_bots=!!s.include_bots,l.only_local_team=!!s.only_local_team,l.only_admins=!!s.only_admins);var p=TS.interop.members.ensureMembersArePresent(_.keys(e)).then(function(){return n(l,e,i)});return f===""&&!s.initial_load_promise&&(s.initial_load_promise=p),p},"promiseToFilter");return u},"_createFilterFunction"),n=d(function(s,l,e){return Promise.resolve().then(function(){var i=[],u=_.keys(l);return u.forEach(function(f){var S=TS.interop.members.getMemberById(f);S||i.push(f)}),i.length?TS.interop.members.ensureMembersArePresent(i).catch(_.noop):Promise.resolve()}).then(function(){return TS.members.promiseToSearchMembers(s).then(function(i){var u=[];if(i.query===""){var f=_.pick(s,o);u=TS.members.getMembersWithOptions(f)}else u=i.items;return i.items=u.filter(function(S){return!e[S.id]}).map(function(S){return S.member&&typeof S.preselected<"u"?S:{member:S,lfs_id:String(S.id),preselected:!!l[S.id]}}),i})})},"_getSearchPromise")})()},591861:()=>{(function(){TS.registerModule("ui.validation",{completed_sig:new signals.Signal,onStart:function(){S(),$("body").on("input.validation paste.validation change.validation","[data-validation]",TS.utility.debounce(function(m){$(m.target).is(".ql-editor")||$(m.target).is(".ql-clipboard")?v($(m.target).closest(".ql-container"),{},m):v($(m.target),{},m)},500)),$("body").on("input.channel-name-validation paste.channel-name-validation change.channel-name-validation",'[data-validation*="channel_name"]',function(m){const E=$(m.target);if(!E.is('input[type="text"]'))return;const I={query:me(E),count:1};TS.interop.channels.fetchAndUpsertChannelsWithQuery({query:I})}),$("body").on("submit.validation","form[data-validation-form]",function(m){var E=$(m.target),I=TS.ui.validation.validate(E);I||m.preventDefault(),TS.ui.validation.completed_sig.dispatch(E,{event:m,passed:I})})},validate:function(m,E){E=E||{};var I=document;if(m){if(m.is("[data-validation]"))return m.length===1?v(m,E):m.toArray().every(function(re){return v($(re),E)});I=m.get(0)}var H=Array.prototype.slice.call(I.querySelectorAll("[data-validation]"));if(E&&E.fast)return H.every(function(re){return v($(re),E)});if(E&&E.verbose){var ie={};return H.forEach(function(re){ie[re.name]=v($(re),E)}),ie}return H.reduce(function(re,de){return v($(de),E)&&re},!0)},register:function(m,E){if(c[m]){TS.warn(`${m} cannot be registered because that key is already in use.`);return}if(typeof E!="function"){TS.warn("Only functions can be registered as validators.");return}c[m]=E},showCustomValidation:function(m,E,I,H){K(m,I.error_message||E,I.class,I,H)},getErrorMessage:function(m,E){switch(m){case"invalid_name_required":return l.required;case"invalid_name_punctuation":return l.punctuation;case"invalid_name_maxlength":return l.maxlength;case"invalid_name_specials":return l.specials;case"name_taken":return l.name_taken({name:E.name});case"restricted_action":return f.restricted_action;case"name_invalid_name_required":return u.required;case"invalid_starts_with_at":return u.at_sign;case"name_invalid_name_maxlength":case"too_long":return u.maxlength;case"invalid_reserved_word":return u.reserved;case"name_invalid_name_specials":return u.specials;case"invalid_emoji_not_allowed":return N(E.name||"");case"display_name_not_allowed":return u.sso_display_name;case"invalid_email":return p.invalid;case"url_in_message":return h.url_in_message;case"invalid_target_domain":return e.invalid_target_domain;case"invalid_target_domain_sameorg":return e.invalid_target_domain_sameorg;case"invalid_target_domain_self":return e.invalid_target_domain_self;default:return TS.interop.i18n.t("For some weird reason, that didn\u2019t work. Please try again to continue.","ui_validation")()}},maybeConvertNameErrorCode:function(m){return m==="invalid_name_specials"?"name_invalid_name_specials":m==="invalid_name_maxlength"?"name_invalid_name_maxlength":m==="invalid_name_required"?"name_invalid_name_required":m},showError:function(m,E,I,H){K(m,I.error_message||E,"validation_error",I,H)},showWarning:function(m,E,I,H){K(m,I.warning_message||E,"validation_warning",I,H)},showSuccess:function(m,E,I,H){K(m,I.success_message||E,"validation_success",I,H)},test:function(){return{validations:c}}});var o=80,t=80,n=21,s=TS.interop.i18n.t("Channel names can\u2019t be longer than {maxLength} characters.","ui_validation")({maxLength:t}),l={name_taken:TS.interop.i18n.t("{name} is already taken by a channel, username, or user group.","ui_validation"),lowercase:TS.interop.i18n.t("Channel names must be all lowercase. Try again?","ui_validation")(),maxlength:s,required:TS.interop.i18n.t("Don\u2019t forget to name your channel.","ui_validation")(),specials:TS.interop.i18n.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?","ui_validation")(),punctuation:TS.interop.i18n.t("Names can\u2019t consist solely of punctuation. Please elaborate!","ui_validation")()},e={invalid_target_domain:TS.interop.i18n.t("{targetDomain}.slack.com\xA0doesn\u2019t appear to be in use.","shared"),invalid_target_domain_sameorg:TS.interop.i18n.t("{targetDomain} is a part of your organization.","shared"),invalid_target_domain_self:TS.interop.i18n.t("You\u2019ll need to enter the Slack URL of the other organization.","shared")()},i={firstalphanumeric:TS.interop.i18n.t("Usernames must start with a letter or number. Sorry about that!","ui_validation")(),lowercase:TS.interop.i18n.t("Sorry, usernames must be lowercase!","ui_validation")(),maxlength:TS.interop.i18n.t("Sorry, that\u2019s a bit too long! Usernames must be fewer than {max_length_plus_one} characters.","ui_validation","10f62c929475d76c2b47d666c9703843310ef356")({max_length_plus_one:n+1}),required:TS.interop.i18n.t("Please fill in a username.","ui_validation")(),specials:TS.interop.i18n.t("Usernames can\u2019t contain special characters. Sorry about that!","ui_validation")()},u={required:TS.interop.i18n.t("Unfortunately, you can\u2019t leave this blank.","ui_validation")(),at_sign:TS.interop.i18n.t("Names can\u2019t start with the @ sign \u2014\xA0that\u2019s how your coworkers will mention you in conversation.","ui_validation","dbbcef363a405836bfc582044f84fec0a0a1cc64")(),maxlength:TS.interop.i18n.t("Unfortunately, names can\u2019t be longer than {maxlength} characters.","ui_validation")({maxlength:o}),reserved:TS.interop.i18n.t("That name\u2019s already being used by Slack.","ui_validation")(),specials:TS.interop.i18n.t("Mostly, names can\u2019t contain punctuation. (Apostrophes, spaces, and periods are fine.)","ui_validation")(),emoji:TS.interop.i18n.t("For all manner of complex reasons, names simply cannot contain emoji. Try again?","ui_validation")(),sso_display_name:TS.interop.i18n.t("Display names are automatically set by your organization.","ui_validation")()},f={},S=d(function(){f={restricted_action:TS.interop.i18n.t("Sorry! An admin in your workspace has restricted who can create private channels.","ui_validation")()}},"_initMpimErrorMessages"),p={invalid:TS.interop.i18n.t("This doesn\u2019t seem like an email address. Sorry!","ui_validation")()},h={url_in_message:TS.interop.i18n.t("Unfortunately, custom messages can\u2019t contain URLs.","ui_validation")()},c={dateandformat:X,firstalphanumeric:D,hasnourl:y,isurl:ee,isouathredirecturl:R,lowercase:ne,maxcsv:j,maxlength:a,mincsv:A,minlength:T,nospace:se,required:w,reservedwords:x,keywords:U,username:Y,channel_name:B,team_name:F,is_email:M,membername:J,is_time:C},v=d(function(m,E,I){E=E||{},m.is("[data-validation-for]")&&(E.custom_for=m.attr("data-validation-for")),E.success_message=TS.interop.i18n.t("Nice, thanks!","ui_validation")(),m.is("[data-validation-success]")&&(E.success_message=m.attr("data-validation-success")),m.is("[data-validation-warning]")&&(E.warning_message=m.attr("data-validation-warning")),m.is("[data-validation-error]")&&(E.error_message=m.attr("data-validation-error")),m.is("[data-validation-trim-value]")&&(E.trim_value=!0),ue(m)&&_e(m,E);var H=b(m).every(function(ie){if(ie.indexOf("=")===-1)return c[ie.trim()](m,E);var re=ie.split("=");return c[re[0]](m,E,re[1])});return TS.ui.validation.completed_sig.dispatch(m,{event:I,passed:H}),z(m,H,E)&&TS.ui.validation.showSuccess(m,E.success_message,E,3e3),m.attr("aria-invalid",!H),H},"_validate"),b=d(function(m){return m.is("[data-validation]")?_.compact(m.attr("data-validation").replace(/\s*(,|=)\s*/g,"$1").split(/\s+/)):[]},"_getValidators");function w(m,E){if(m.is('input[type="radio"]')){if($(document.querySelectorAll(`[name="${m.prop("name")}"][data-validation]`)).filter(":checked").length)return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t("Please select an option","ui_validation")(),E)}else if(m.is('input[type="checkbox"]')){if($(document.querySelectorAll(`[name="${m.prop("name")}"][data-validation]`)).filter(":checked").length)return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t("Please select at least one option","ui_validation")(),E)}else if(m.is("select")){var I=_.get(m.data(),"TSLazyFilterSelect",!1);if(I&&!_.isEmpty(I.value())||!I&&!_.isEmpty(m.val()))return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t("Please select an option","ui_validation")(),E)}else if(ue(m)){if(oe(m).trim())return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t("This field can\u2019t be empty","ui_validation")(),E)}else TS.error("Error: cannot validate")}d(w,"_validateRequired");function x(m,E,I){if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(ue(m)){var H=oe(m).trim().toLowerCase(),ie=I.split(",");if(ie.indexOf(H)===-1)return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t('"{word}" is a reserved word. Try something else!',"ui_validation")({word:TS.interop.i18n.safeString(_.escape(H))}),E)}else TS.error("WTF: cannot validate")}d(x,"_validateReservedWords");function U(m,E){return x(m,E,TS.model.RESERVED_KEYWORDS.join(","))}d(U,"_validateKeywords");function ee(m,E,I){var H=oe(m);E&&E.trim_value&&(H=H.trim());var ie=TS.interop.i18n.t("This doesn\u2019t seem like a proper link. Sorry!","ui_validation")(),re,de=!1,ce=!1;if(!H||m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(!ue(m)){TS.error("Error: cannot validate");return}if(I){re=I.split(","),re.indexOf("http")!=-1&&re.indexOf("https")==-1&&re.push("https");for(var ge=0;ge<re.length;ge+=1)H.indexOf(`${re[ge]}://`)===0&&(de=!0);!de&&re.indexOf("https")!=-1&&(ie=TS.interop.i18n.t("Please use https (for security).","ui_validation")())}else de=!0,H.indexOf("://")==-1&&(H=`http://${H}`);if(ce=TS.interop.url.simpleIsUrl(H),ce&&de)return!0;TS.ui.validation.showWarning(m,ie,E)}d(ee,"_validateIsUrl");function R(m,E,I){if(ee(m,E,I)){var H=oe(m);if(H.indexOf("#")==-1)return!0;const ie=TS.interop.i18n.t("Oauth redirect URLs should not contain a fragment component (#)","ui_validation")();TS.ui.validation.showWarning(m,ie,E)}}d(R,"_validateIsOauthRedirectUrl");function y(m,E){if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(ue(m)){var I=oe(m);if(!I||!TS.interop.url.findUrlsInString(I).length)return!0;TS.ui.validation.showWarning(m,h.url_in_message,E)}else TS.error("Error: cannot validate")}d(y,"_validateHasNoUrl");function T(m,E,I,H){return g(m,"minlength",E,I,H)}d(T,"_validateMinLength");function a(m,E,I,H){return g(m,"maxlength",E,I,H)}d(a,"_validateMaxLength");function g(m,E,I,H,ie){if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(ue(m)){var re=oe(m);if(H=+H,re===void 0||isNaN(H)){TS.error("Error: no length to validate");return}if(E==="minlength"){if(TS.interop.utility.getStringLength(re)>=H)return!0;TS.ui.validation.showError(m,TS.interop.i18n.t("This field can\u2019t be less than {minlength, plural, =1{# character}other{# characters}}","ui_validation")({minlength:H}),I)}else if(E==="maxlength"){if(ie||W(m,re.length,H,I),TS.interop.utility.getStringLength(re)<=H)return!0;TS.ui.validation.showError(m,TS.interop.i18n.t("This field can\u2019t be more than {maxlength, plural, =1{# character}other{# characters}}","ui_validation")({maxlength:H}),I)}}else TS.error("Error: cannot validate")}d(g,"_validateLength");function A(m,E,I){return Q(m,"mincsv",E,I)}d(A,"_validateMinCSV");function j(m,E,I){return Q(m,"maxcsv",E,I)}d(j,"_validateMaxCSV");function Q(m,E,I,H){if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(ue(m)){var ie=oe(m).trim();if(H=+H,ie===void 0||isNaN(H)){TS.error("Error: no length to validate");return}if(E==="mincsv"){if(ie.split(/\s*,\s*/).length>=H)return!0;TS.ui.validation.showError(m,TS.interop.i18n.t("This field can\u2019t have less than {minlength, plural, =1{# value}other{# values}}","ui_validation")({minlength:H}),I)}else if(E==="maxcsv"){if(ie.split(/\s*,\s*/).length<=H)return!0;TS.ui.validation.showError(m,TS.interop.i18n.t("This field can\u2019t have more than {maxlength, plural, =1{# value}other{# values}}","ui_validation")({maxlength:H}),I)}}else TS.error("Error: cannot validate")}d(Q,"_validateCSV");function X(m,E,I){if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(ue(m)){var H=oe(m).trim();if(!H)return!0;var ie,re,de,ce;switch(I){case"Y-m-d":ie="YYYY-MM-DD",re=H.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/),de=re&&re.length===1&&re[0]===H,de&&(ce=O(`${H}T00:00:00.000Z`));break;case"m-d":ie="MM-DD",re=H.match(/^[0-9]{2}-[0-9]{2}$/),de=re&&re.length===1&&re[0]===H,de&&(ce=O(`0000-${H}T00:00:00.000Z`));break;default:TS.error("Error: cannot validate");return}if(de&&ce)return!0;de?ce||TS.ui.validation.showWarning(m,TS.interop.i18n.t("{value} doesn\u2019t appear to be a valid date. Sorry!","ui_validation")({value:TS.interop.i18n.safeString(_.escape(H))}),E):TS.ui.validation.showWarning(m,TS.interop.i18n.t("This needs to be in the format {pattern}. Sorry!","ui_validation")({pattern:ie}),E)}else TS.error("Error: cannot validate")}d(X,"_validateDateAndFormat");function ne(m,E){var I=ue(m)?oe(m):m.val(),H=I===I.toLocaleLowerCase();if(H)return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t("This field must be lowercase only","ui_validation")(),E)}d(ne,"_validateLowercase");function se(m,E){var I=ue(m)?oe(m):m.val(),H=/\s/.test(I);if(!H)return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t("This field can\u2019t contain spaces","ui_validation")(),E)}d(se,"_validateNospace");function D(m,E){var I=ue(m)?oe(m):m.val(),H=/^[^\W_]/.test(I);if(H)return!0;TS.ui.validation.showWarning(m,TS.interop.i18n.t("This first character must be a letter or number","ui_validation")(),E)}d(D,"_validateFirstAlphanumeric");function Y(m,E){var I=$.extend({},E,{quiet:!0});if(!w(m,I))TS.ui.validation.showWarning(m,i.required,E);else if(!a(m,I,n,!0))TS.ui.validation.showWarning(m,i.maxlength,E);else if(!se(m,I))TS.ui.validation.showWarning(m,i.specials,E);else if(!P(m,I,/^[\w._-]+$/))TS.ui.validation.showWarning(m,i.specials,E);else if(!D(m,I))TS.ui.validation.showWarning(m,i.firstalphanumeric,E);else if(!ne(m,I))TS.ui.validation.showWarning(m,i.lowercase,E);else return!!x(m,E,TS.interop.constants.RESERVED_USERNAMES.join(","))}d(Y,"_validateUsername");function J(m,E,I){var H=$.extend({},E,{quiet:!0});if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(!ue(m)){TS.error("Error: cannot validate");return}var ie=_.trim(oe(m)),re=TS.interop.i18n.deburr(ie.toLowerCase()),de=le(I);if(_.includes(de,"required")&&!w(m,H))return TS.ui.validation.showWarning(m,u.required,E),!1;if(!a(m,H,o,!0))return TS.ui.validation.showWarning(m,u.maxlength,E),!1;var ce=TS.interop.constants.RESERVED_USERNAMES.concat(TS.model.RESERVED_KEYWORDS).map(function(ge){return TS.interop.i18n.deburr(ge)});return ce.indexOf(re)!==-1?(TS.ui.validation.showWarning(m,u.reserved,E),!1):ie.charAt(0)==="@"?(TS.ui.validation.showWarning(m,u.at_sign,E),!1):P(m,H,/^[-_.'\u2018\u2019",(){}[\]/;]+$/)?(TS.ui.validation.showWarning(m,l.punctuation,E),!1):P(m,H,/[`~!@#$%^&*+=\\:"<>?|]/)?(TS.ui.validation.showWarning(m,u.specials,E),!1):TS.emoji.hasUnifiedEmoji(ie)?(TS.ui.validation.showWarning(m,N(ie),E),!1):!0}d(J,"_validateRealOrDisplayName");function B(m,E,I){if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(!ue(m)){TS.error("Error: cannot validate");return}var H=oe(m),ie=le(I),re=_.includes(ie,"fix");re&&(H=me(m));var de=TS.validation.channel_name_with_errors(H);return de!==!0?(E.should_truncate=!1,TS.ui.validation.showWarning(m,de.error_message,E),!1):!0}d(B,"_validateChannelName");function F(m,E){E=E||{};var I=oe(m).trim(),H=TS.validation.team_name(I);return H!==!0?(E.should_truncate=!1,H.error_key==="empty"?TS.ui.validation.showCustomValidation(m,H.error_message,E):TS.ui.validation.showError(m,H.error_message,E),!1):!0}d(F,"_validateTeamName");function M(m,E){if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(ue(m)){var I=oe(m);if(!I)return!0;var H=I.match(TS.utility.email_regex);if(H&&H.length===1&&H[0]===I)return!0;TS.ui.validation.showWarning(m,p.invalid,E)}else TS.error("Error: cannot validate")}d(M,"_validateIsEmail");function P(m,E,I){var H=ue(m)?oe(m):m.val();if(!I.test(H))TS.ui.validation.showWarning(m,TS.interop.i18n.t("This field contains invalid characters","ui_validation")(),E);else return!0}d(P,"_validatePattern");function C(m){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m.is('input[type="radio"]')||m.is('input[type="checkbox"]')||m.is("select"))return!0;if(ue(m)){var I=oe(m);if(!I||/((1[0-2]|0?[1-9]):([0-5][0-9]) ?([ap][m]))/i.test(I))return!0;TS.ui.validation.showWarning(m,"Try the format 10:30am",E)}}d(C,"_validateTime");var O=d(function(m){if(!isNaN(Date.parse(m))){var E=new Date(m);return!E.toISOString().indexOf(m)}},"_isValidISODate"),z=d(function(m,E,I){var H=$(document.querySelector(`label[for="${I.custom_for||m.attr("name")}"]`));if(H.length)return!(I&&I.quiet)&&E&&H.data("validation-ephemeral")===!1},"_shouldShowSuccess"),K=d(function(m,E,I,H,ie){if(H=H||{},_.isUndefined(H.should_truncate)&&(H.should_truncate=!0),!(H&&H.quiet)){var re=$(document.querySelector(`label[for="${H.custom_for||m.attr("name")}"]`));if(re.length){var de=re.data("validation-timeout");clearTimeout(de);var ce=re.find(".validation_message");if(ce.length||(ce=$("<span />").addClass("validation_message").toggleClass("overflow_ellipsis",H.should_truncate),m.is("select")&&re.find("select").length?ce.insertBefore(re.find("select")):ce.appendTo(re)),q(m,re,I),!E){ce.remove();return}ce.get(0).title=E,ce.fadeIn(100),re.data("validation-ephemeral",!!ie),ie&&re.data("validation-timeout",setTimeout(function(){re.removeData("validation-ephemeral").removeData("validation-timeout"),ce.fadeOut(100,function(){q(m,re),ce.remove()})},ie))}}},"_showMessage"),V=["validation_error","validation_warning","validation_success"],q=d(function(m,E,I){E.hasClass(I)||(m.removeClass(V.join(" ")),m.addClass(I),E.removeClass(V.join(" ")),E.addClass(I))},"_toggleValidationLevel"),W=d(function(m,E,I,H){I-E<=6?te(m,E,I,H):_e(m,H)},"_countdown"),te=d(function(m,E,I,H){var ie=document.querySelector(`label[for="${H.custom_for||m.attr("name")}"]`);if(ie){var re=[E,I].join("/");$(ie).attr("data-countdown",re).addClass("countdown");var de=window.getComputedStyle(ie,":after"),ce=parseFloat(de.width)||9*re.length;m.hasClass("no_validation_padding")||(m.data("countdown-padding-right")||m.data("countdown-padding-right",parseFloat(m.css("padding-right"))),m.css("padding-right",ce+parseFloat(de.right)+m.data("countdown-padding-right")))}},"_setCountdown"),_e=d(function(m,E){var I=document.querySelector(`label[for="${E.custom_for||m.attr("name")}"]`);I&&($(I).removeClass("countdown"),m.removeData("countdown-padding-right"),m.css("padding-right",""))},"_clearCountdown"),ue=d(function(m){return TS.interop&&TS.interop.utility?m.is("input")||m.is("textarea")||TS.interop.utility.isContentEditableElement(m):m.is("input")||m.is("textarea")},"_isElementTextInput"),oe=d(function(m){return TS.utility&&TS.utility.contenteditable?TS.utility.contenteditable.value(m):m.val()},"_getTextInputValue"),le=d(function(m){return _.isString(m)?_(m).split(",").map(_.trim).compact().value():[]},"_parseParams"),me=d(function(m){var E=oe(m),I=E.toLowerCase().replace(/^#+/,"");if(I=I.replace(/^\s+/,""),I=I.replace(/\s+$/,""),I=I.replace(/\s/g,"-"),I&&E!==I){var H=TS.utility.contenteditable.cursorPosition(m).start;I.length<E.length&&(H-=E.length-I.length),m.val(I),TS.utility.contenteditable.cursorPosition(m,H)}return I},"_fixChannelName"),N=d(function(m){var E=/💩/u,I=[TS.interop.i18n.t("For all manner of complex reasons, names simply cannot contain emoji. Try again?","ui_validation")(),TS.interop.i18n.t("Using emoji for names makes some sense, but sadly, not enough. Try again?","ui_validation","29a0641ffb224418f796bb16c7f79013ec377a4c")(),TS.interop.i18n.t("For technical reasons, emoji are not allowed in names. Try again?","ui_validation")(),TS.interop.i18n.t("Of course you want a name with an emoji. Sadly, it is not to be. Try letters?","ui_validation")()];return m.match(E)?TS.interop.i18n.t("For reasons of party-pooping, names cannot contain emoji. Try again?","ui_validation")():_.sample(I)},"_getInvalidNameEmojiErrorMessage")})()},590588:()=>{(function(){TS.registerModule("user_groups",{updated_sig:new signals.Signal,updated_info_sig:new signals.Signal,changed_is_unknown_sig:new signals.Signal,unknown_resolution_rebuild_sig:new signals.Signal,legacyNeedsToFetchMembership(o){return o.users===void 0||_.size(o.users)!==o.user_count}})})()},199649:()=>{(function(){TS.registerModule("utility.contenteditable",{unload:function(e){if(e=o(e),!!e&&n(e)){var i=s(e);i&&(i.unload(),l(e))}},isActiveElement:function(e){if(e=o(e),!e)return!1;if(t(e))return document.activeElement===e;if(n(e)){var i=s(e);return i.hasFocus()?!0:document.activeElement&&document.activeElement.className.indexOf("ql-clipboard")!=-1&&document.activeElement.parentNode===e}return!1},focus:function(e){if(e=o(e),!!e){if(t(e))e.focus();else if(n(e)){var i=s(e);i.focus()}}},hasFocus:function(e){if(e=o(e),!!e){if(t(e))return $(e).is(":focus");if(n(e)){var i=s(e);return i.hasFocus()}}},value:function(e,i){if(e=o(e),!e)return"";if(t(e))return _.isString(i)&&(e.value=i),e.value;if(n(e)){var u=s(e);if(_.isString(i)){var f=TS.interop.texty.convertContentsStringToContents(i,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),locale:TS.interop.i18n.locale});u.setContents(f)}else _.isObject(i)&&u.setContents(i);return TS.interop.texty.convertContentsToString(u.getContents())}return""},getDisplayTextForRange:function(e,i,u){if(e=o(e),!e)return"";if(t(e)){var f=TS.utility.contenteditable.value(e);return f.substr(i,u)}if(n(e)){var S=s(e);return TS.interop.texty.convertContentsToStringForDisplay({contents:S.getContentsForRange(i,u).ops})}return""},cursorPosition:function(e,i,u){_.isString(e)&&(e=$(e));var f,S={start:0,end:0,length:0};if(e=o(e),!e)return S;if(_.isNumber(i))u||(u=0),S.start=i,S.end=i+u,S.length=u,t(e)?TS.selection.selectCharacters(e,S.start,S.end):n(e)&&(f=s(e),f.setSelection(S.start,S.length));else{if(!TS.utility.contenteditable.isActiveElement(e)){var p=$(e).data("utility-contenteditable-cursor-position");if(_.isObject(p))return p}if(t(e))e.focus(),S.start=e.selectionStart,S.end=e.selectionEnd,S.length=Math.abs(e.selectionEnd-e.selectionStart);else if(n(e)){f=s(e);var h=f.getSelection();h&&(S.start=h.index,S.length=h.length,S.end=S.start+S.length)}}return S},test:function(){var e={_normalizeInput:o,_isFormElement:t};return e}});var o=d(function(e){return!e||(e instanceof jQuery&&e[0]&&(e=e[0]),e.nodeType!==Node.ELEMENT_NODE)?!1:e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input"?e:$(e).hasClass("ql-editor")?e.parentNode:e.hasAttribute("contenteditable")||e.tagName==="DIV"?e:!1},"_normalizeInput"),t=d(function(e){return!e||!e.tagName?!1:e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input"},"_isFormElement"),n=d(function(e){if(!e)return!1;var i=s(e);return!!i},"_isTextyElement"),s=d(function(e){return $(e).data("__ts_quill")},"_getTextyInstance"),l=d(function(e){$(e).removeData("__ts_quill")},"_removeTextyInstance")})()},938538:()=>{(function(){TS.registerModule("utility.date",{do24hrTime:function(){return TS.model.user&&TS.prefs.prefs_loaded&&TS.prefs.getPref("time24")}})})()},633755:()=>{(function(){TS.registerModule("utility.enterprise",{splitQueryIntoTerms:function(o,t,n){var s=t,l;return o=o.trim(),o.length>=2&&(s=_.isArray(t)?_.slice(t):[],l=o.split(/\s+/),_.each(l,function(e){s.push({type:n||"fuzzy_with_email",value:e})})),s},getSSOProviderLabel:function(o,t){if(!o)return t;var n=_.get(o,"type",""),s=_.get(o,"name",""),l=n==="",e=n==="saml";return l||e?t:s||t},getProviderLabel:function(o,t){var n=t||"IDP";return o?(t=_.get(o,"saml_provider")||n,t.toLowerCase()==="saml"&&(t=n),TS.utility.enterprise.getSSOProviderLabel(_.get(o,"sso_provider"),t)):n},buildTeamUrl:function(o){return`https://${o||"my"}.${TS.boot_data.abs_root_url.replace(/(http:\/\/|https:\/\/)/,"")}`},buildOrgUrl:function(o){return`https://${o}.enterprise.${TS.boot_data.abs_root_url.replace(/(http:\/\/|https:\/\/)/,"")}`},formatChannelsData:function(o){var t=[];return o.private_channels&&(o.private_channels=_.isArray(o.private_channels)?o.private_channels:[o.private_channels],t=_.map(o.private_channels,function(n){var s=TS.interop.members.getMemberById(n.creator)||{};const l=n.members,e=Array.isArray(l)?l.length:n.members,i={creator_display:s.real_name?s.real_name:s.name,creator_id:n.creator,creator_username:s.name,date_created:n.created,member_count:n.member_count||e,purpose:n.purpose.value,topic:n.topic.value,private:!0};return _({}).assign(n,i).omit("members").value()})),o.channels&&(t=t.concat(_.map(o.channels,function(n){var s=TS.interop.members.getMemberById(n.creator)||{};const l=n.members,e=Array.isArray(l)?l.length:n.members,i={creator_display:s.real_name?s.real_name:s.name,creator_id:n.creator,creator_username:s.name,date_created:n.created,member_count:e||0,purpose:_.get(n,"purpose.value",""),topic:_.get(n,"topic.value",""),private:!1};return _({}).assign(n,i).omit("members").value()}))),t},buildAnalyticsApiOptionsFor:function(o){var t=d(function(n){return _.reduce(n,function(s,l,e){var i=TS.enterprise.model.get(["analytics",l]);return i&&(s[e]=i),s},{})},"build");switch(o){case"teams":return t({query:"teams_search_term",sort_prefix:"teams_sort_prefix",sort_dir:"teams_sort_dir",cursor_mark:"teams_api_cursor",date_range:"current_date_range",start_date:"start_date",end_date:"end_date"});case"team_overview":return t({date_range:"current_date_range",start_date:"start_date",end_date:"end_date",team_id:"team_overview_id"});case"members":return t({query:"members_search_term",sort_prefix:"members_sort_prefix",sort_dir:"members_sort_dir",cursor_mark:"members_api_cursor",date_range:"current_date_range",start_date:"start_date",end_date:"end_date"});case"channels":return t({query:"channels_search_term",sort_prefix:"channels_sort_prefix",sort_dir:"channels_sort_dir",cursor_mark:"channels_api_cursor",date_range:"current_date_range",start_date:"start_date",end_date:"end_date"});default:return t({date_range:"current_date_range",start_date:"start_date",end_date:"end_date"})}},maybeGetUpdatedAtTime:function(o){return o?TS.interop.datetime.toTimeAgo(o):null},buildApiOptionsForAnalyticsCSVExport:function(o){var t={};if(o.type&&(t.type=o.type),o.date_range&&(t.date_range=o.date_range),_.get(o.selected_columns,"length")&&(t.cols=o.selected_columns.join(",")),o.team_id&&(t.team_id=o.team_id),o.sort_prefix&&(t.sort_prefix=o.sort_prefix,o.sort_dir&&(t.sort_dir=o.sort_dir)),o.search_term){var n=TS.utility.enterprise.splitQueryIntoTerms(o.search_term,[],"fuzzy_with_email");if(n.length){var s=n.length===1?_.head(n):{type:"and",clauses:n};t.query=JSON.stringify(s)}}return t},recordAnalyticsPricingEvents:function(o,t,n){n=n||{};const s={};switch(t){case"overview_impression":s.action="impression",s.step="team_stats_overview";break;case"coachmark_impression":s.action="impression",s.step=`team_stats_overview_${_.get(n,"callout_module")}_coachmark`;break;case"coachmark_resolve":s.action="click",s.step=`team_stats_overview_${_.get(n,"callout_module")}_coachmark`,s.ui_element="learn_more_btn";break;case"coachmark_reject":s.action="dismiss",s.step=`team_stats_overview_${_.get(n,"callout_module")}_coachmark`,s.ui_element="skip_this";break;case"msg_files_pricing_btn_click":s.action="click",s.step="team_stats_overview",s.ui_element="msg_files_chart_link_btn";break;case"single_callout_upgrade_link_impression":s.action="impression",s.step="team_stats_overview",s.ui_element=`${_.get(n,"callout_module")}_upgrade_link`;break;case"multi_callout_upgrade_link_impression":s.action="impression",s.step="team_stats_overview",s.ui_element="multi_lim_upgrade_link";break;case"data_table_upsell_banner_impression":s.action="impression",s.step=`team_stats_${_.get(n,"report_name")}`;break;case"data_table_upsell_banner_click":s.action="click",s.step=`team_stats_${_.get(n,"report_name")}`,s.ui_element="see_pricing_plans_btn";break;default:}TS.interop.clog.track(o,{contexts:{ui_context:s}})},recordAnalyticsImpression:function(o,t,n,s,l){const e="ENTERPRISE_ANALYTICS",i={},u={};i.action="impression",i.ui_element=t,u.entity_key=n,u.tracking_code=s,u.anchor_page=o,l?u.target_team_id=l:u.target_team_id=TS.enterprise.model.get("org.enterprise.id")||_.get(TS.boot_data,"team_id"),TS.interop.clog.track(e,_.assign({},u,{contexts:{ui_context:i}}))},recordAnalyticsTooltipHover:function(o){const t="ENTERPRISE_ANALYTICS",n={},s={};n.action="hover",n.ui_element="NOTING_BADGE",s.entity_key=o;const l=TS.enterprise.model.get("org.enterprise.id"),e=TS.enterprise.model.get("analytics.overview_open");l&&!e?(s.anchor_page="organization_overview",s.target_team_id=l):e?(s.anchor_page="workspace_overview",s.target_team_id=TS.enterprise.model.get("analytics.team_overview_id")):(s.anchor_page="workspace_overview",s.target_team_id=_.get(TS.boot_data,"team_id")),TS.interop.clog.track(t,_.assign({},s,{contexts:{ui_context:n}}))},recordAnalyticsSearchEvent:function(o,t,n){const s="ENTERPRISE_ANALYTICS",l={},e={};l.action="impression",l.action_status=n?2:1,l.ui_element="SEARCH_BAR",e.entity_key=t,e.anchor_page=o,e.target_team_id=TS.enterprise.model.get("org.enterprise.id")||_.get(TS.boot_data,"team_id"),TS.interop.clog.track(s,_.assign({},e,{contexts:{ui_context:l}}))},convertDateRangeToThriftID:function(o){switch(o){case"28d":return"FILTER_LAST_28DAYS";case"30d":return"FILTER_LAST_30DAYS";case"all":return"FILTER_ALL_TIME";default:}},convertTimeseriesTabToClogKey:function(o){switch(o){case"active-users_weekly_active_users":return"wau_ts";case"active-users_daily_active_users":return"dau_ts";case"messages-and-files_messages_sent":return"messages_sent_ts";case"messages-and-files_files_uploaded":return"files_uploaded_ts";case"transparency_where_messages_sent":return"transparency_sent_ts";case"transparency_where_messages_read":return"transparency_read_ts";default:}},getNumberAnnotation:function(o){let t="";if(TS.interop.i18n.locale==="ja-JP")switch(o){case"channels":case"messages":t="\u4EF6";break;case"users":t="\u4EBA";break;case"files":case"apps":t="\u500B";break;default:}return t}})})()},219351:()=>{(function(){TS.registerModule("utility.members",{checkMemberMatch:function(o,t,n){return!n&&o.profile&&o.profile.email&&o.profile.email.match(t)||o.profile&&o.profile.real_name_normalized&&o.profile.real_name_normalized.match(t)||o.profile&&o.profile.real_name&&o.profile.real_name.match(t)||o.profile&&o.profile.display_name_normalized&&o.profile.display_name_normalized.match(t)||o.profile&&o.profile.display_name&&o.profile.display_name.match(t)},isMemberRelevantToModel:function(o,t){return _.isObject(o)||(o=TS.interop.members.getMemberById(o)),o?TS.interop.rules.members.isSlackbot(o)?!0:o.deleted?!1:(_.isObject(t)||(t=TS.redux.channels.getEntityById(t)||TS.shared.legacyGetActiveModelOb()),!0):!1},isMemberEKMRevoked:function(o){return o&&o.id==="UREVOKEDU"}})})()},366332:()=>{(function(){TS.registerModule("utility.msgs",{setMsgs:function(o,t){for(var n=0;n<t.length;n+=1)t[n]=TS.utility.msgs.makeSureMsgObIsValid(t[n]);return TS.utility.msgs.sortMsgs(t),o.msgs=t,o.msgs},sortMsgs:function(o){function t(n,s){return n.ts<s.ts?1:n.ts>s.ts?-1:0}d(t,"compare"),o.sort(t)},legacyMsgDeletedWorker:function(o,t){TS.pins&&TS.pins.legacyRemoveMsg(t.deleted_ts,o)},makeSureMsgObIsValid:function(o){return o},_handleLegacyAttachment:function(o,t){if(!o){TS.warn("attachment is null!");return}return delete o.mrkdwn_in,o._index=t,"id"in o&&(o.id=o.id.toString()),o},updateCommentReferences:function(o){if(o){var t=TS.interop.channels.getAllChannels();_.forEach(t,function(n){_.forEach(n.msgs,function(s){if(!(!s.file||s.file.id!==o.id)&&s.comment){var l=_.find(o.comments,{id:s.comment.id});l&&(s.comment=l)}})})}},ingestMessagesFromBootData:function(o){if(TS.boot_data.msgs){var t=TS.boot_data.msgs[o.id]||[],n=TS.interop.messages.preprocessImsgs(t.filter(s=>!!s.ts),o.id);TS.utility.msgs.setMsgs(o,n)}}})})()},364686:()=>{(function(){TS.registerModule("utility.search",{test:function(){return{_fetchMembersFromFlannel:s}},makeClause:function(e,i,u){if(!o(e,i,u)){var f={type:e.toLowerCase(),value:i};return u&&(f.field_id=u),f}},makeConjunction:function(e,i){if(!t(e,i))return{type:e.toLowerCase(),clauses:i}},promiseToSearch:function(e){if(!e)return Promise.reject(new Error("Cannot search without arguments."));if(e.all_of_org&&!TS.boot_data.page_needs_enterprise)return Promise.reject(new Error("cannot search an org when not an enterprise team"));if(!e.solr){if(!e.hasOwnProperty("raw_query"))return Promise.reject(new Error("Flannel searches require a `raw_query` to be provided"));var i=e.raw_query,u=e.count||1/0,f;if(_.isEmpty(e.raw_query)&&!e.only_admins)f=Promise.resolve([]);else{var S={};e.only_admins?S.filter="admins":e.only_local_team&&(S.filter="team"),f=s(e.raw_query,u,e.determine_membership_for_channel,S)}return f.then(function(c){var v=c.objects;if(!e.include_bots){var b=_.remove(v,{is_bot:!0});b.length&&TS.has_pri[l]&&TS.log(l,"Flannel: removed these bots from results:",b)}if(e.exclude_slackbot&&e.include_bots){var w=_.remove(v,{is_slackbot:!0});w.length&&TS.has_pri[l]&&TS.log(l,"Flannel: removed slackbot from results:",w)}if(TS.boot_data.page_needs_enterprise&&!e.all_of_org){var x=_.remove(v,function(R){var y=_.get(R,"enterprise_user.teams",[]),T=_.includes(y,TS.model.team.id),a=e.include_profile_only_users&&R.is_profile_only_user;return!T&&!a});x.length&&TS.has_pri[l]&&TS.log(l,"Flannel: removed these org members from results:",x)}if(!e.include_deleted){var U=_.remove(v,{deleted:!0});U.length&&TS.has_pri[l]&&TS.log(l,"Flannel: removed these deleted members from results:",U)}if(!e.include_profile_only_users){var ee=_.remove(v,{is_profile_only_user:!0});ee.length&&TS.has_pri[l]&&TS.log(l,"Flannel: removed these profile-only users from results:",ee)}return v=_.intersectionBy(TS.members.getMembersForUser(),v,"id"),{ok:!0,data:{items:v.slice(0,u),next_cursor_mark:null,num_found:v.length,teams:[TS.model.team]},args:{query:i}}})}if(!e.query)return Promise.reject(new Error("Cannot search without a query."));var p={query:JSON.stringify(e.query)};["sort","sort_direction","count","cursor_mark","include_bots","include_deleted","exclude_slackbot","ignore_guest_accounts"].forEach(function(c){e.hasOwnProperty(c)&&(p[c]=e[c])});var h=e.endpoint;return h||(h=e.all_of_org?"search.enterprise":"search.team"),TS.interop.api.call(h,p).catch(n)}});var o=d(function(e,i,u){if(!e){TS.error("cannot make a clause without a type");return}if(!i){TS.error("cannot make a clause without a value");return}e==="custom"&&!u&&TS.error("cannot make a custom type clause without a field id")},"_validateClauseParameters"),t=d(function(e,i){if(!e){TS.error("cannot make a conjunction without an 'and' or 'or' type");return}(!i||i.length<2)&&TS.error("cannot make a conjunction without at least two clauses")},"_validateConjunctionParameters"),n=d(function(e){throw TS.error(`${e.data.error} error occured while searching`),TS.generic_dialog.alert(TS.interop.i18n.t("Sorry! Something went wrong. Please try again.","utility_search")()),e},"_handleError"),s=d(function(e,i,u,f){f=f||{};var S={query:e,count:i};f.filter&&(S.filter=f.filter);var p=TS.members.fetchAndUpsertMembersWithQuery(S);if(!u)return p;var h=_.assign({channels:[u]},S),c=TS.members.fetchAndUpsertMembersWithQuery(h);return Promise.join(p,c).then(function(v){var b=v[0],w=v[1],x=_.map(b.objects,"id"),U=_.map(w.objects,"id"),ee={};return U.forEach(function(R){ee[R]=!0}),_.difference(x,U).forEach(function(R){ee[R]=!1}),TS.redux.dispatch(TS.interop.redux.models.membership.setChannelMembershipInfoForUsers({channelId:u,membershipInfo:ee})),b})},"_fetchMembersFromFlannel"),l=1989})()},994808:()=>{(function(){TS.registerModule("utility",{onStart:function(){TS.utility.makeRefererSafeLink=_.memoize(TS.utility.makeRefererSafeLink),TS.prefs&&TS.prefs.team_hide_referers_changed_sig&&TS.prefs.team_hide_referers_changed_sig.add(TS.utility.resetRefererSafeLinkCache),t=TS.interop.i18n.t("me","utility")(),n=TS.interop.i18n.t("you","utility")(),S=TS.utility.normalizeDevHost(`https://${document.location.hostname}/files`),p=TS.utility.normalizeDevHost(`https://${document.location.hostname}/team`)},keymap:{alt:18,ctrl:17,cmd_ff:224,cmd_other:91,cmd_right:93,esc:27,shift:16,tab:9,del:8,delete:46,enter:13,left:37,up:38,right:39,down:40,pageup:33,pagedown:34,end:35,home:36,space:32,semicolon:59,equals_sign:187,minus_sign:189,comma:188,period:190,left_square_bracket:219,right_square_bracket:221,V:86,a:65,e:69,b:66,k:75,i:73,z:90,y:89,insert:45,slash:191,f6:117,num_lock:144,insert_extended:96,caps_lock:20},email_regex:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,regexpEscape:function(h,c){return c=Math.min(c||5e5,5e5),h.length>c&&(h=h.slice(0,c)),_.escapeRegExp(h)},makeComparableVersion:function(h){var c=h.split("-")[0];return _.reduce(c.split("."),function(v,b){return v*1e3+parseInt(b,10)},0)},compareSemanticVersions:function(h,c){var v=TS.utility.makeComparableVersion(h),b=TS.utility.makeComparableVersion(c);return v===b?0:v>b?1:-1},doesRectContainRect:function(h,c,v,b){return v=v||0,c.top<h.top-v||c.bottom>h.bottom+v?!1:b?!0:!(c.left<h.left-v||c.right>h.right+v)},shouldLinksHaveTargets:function(){return!1},parseJSONOrElse:function(h,c){if(h==="")return c;try{return JSON.parse(h)}catch{return c}},removeUrlParam:function(h,c){var v=c.split("?")[0],b=c.indexOf("?")!==-1?c.split("?")[1]:"",w=[],x;if(b!==""){w=b.split("&");for(var U=w.length-1;U>=0;U-=1)x=w[U].split("=")[0],x===h&&w.splice(U,1);v=w.length?`${v}?${w.join("&")}`:v}return v},getPathFromSlackUrl:function(h){var c=h.match(u),v=c&&c[2];if(v){var b=h.split(v),w=b[1].split("?")[0];return(v+w).split("/")}},makeSafeForDomId:function(h){return String(h).replace(/\./g,"_")},getAppliedClasses:function(h){return _.reduce(h,function(c,v,b){return v&&c.push(b),c},[]).join(" ")},numberWithK:function(h){return h>999?(h=Math.round(h/1e3*10)/10,`${TS.interop.i18n.number(h)||""}K`):TS.interop.i18n.number(h)||""},openInNewTab:function(h,c){let{dontEncodeHash:v=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(h.indexOf("/")===0&&TS.boot_data.team_url){var b=TS.boot_data.team_url;b=b.substr(0,b.length-1),h=b+h}var w=h,x="",U=w.indexOf("?"),ee=TS.interop.utility.urlNeedsRefererHiding(h);if(U!==-1){ee&&(h=_.escape(h.substring(0,U)));var R=w.substring(U+1,w.length);if(w=w.substring(0,U),R.length){var y=TS.interop.url.queryStringParse(R),T=TS.interop.url.parseUrl(h),a=!1;T&&T.hostname=="accounts.google.com"&&T.pathname=="/o/oauth2/auth"&&(a=!0),_.forEach(y,function(g,A){ee?(h=TS.interop.url.setUrlQueryStringValue(h,A,g||"",a),v&&(h=h.replace("%23","#"))):x+=`<input type="hidden" name="${_.escape(A)}" value="${_.escape(g||"")}">`})}}ee&&(x=`<input type="hidden" name="url" value="${_.escape(h)}">`,w=`https://${TS.boot_data.redir_domain}/link`),$(`<form>${x}</form>`).attr({method:"GET",action:w,target:c}).appendTo("body").submit().remove()},isScalar:function(h){return/boolean|number|string/.test(typeof h)},sanitizeHTML:function(h,c,v,b){var w=d(function(R){var y=R.tagName.toLowerCase();return c.indexOf(y)<0?null:(Array.prototype.slice.apply(R.attributes).forEach(function(T){v.indexOf(T.name)<0&&R.attributes.removeNamedItem(T.name)}),Array.prototype.slice.apply(R.children).forEach(function(T){var a=w(T);a||R.removeChild(T)}),R)},"_sanitizeNode");o=o||new DOMParser;var x=o.parseFromString(h,"text/html")||o.parseFromString(h,"text/xml"),U=x.body;if(U.children.length!=1)return"";var ee=w(U.children[0]);return U=null,x=null,ee?b?ee:ee.outerHTML:""},getChildTextNodes:function(h){var c=[];if(!h)return c;if(h instanceof Text)return c.push(h),c;for(var v=document.createTreeWalker(h,NodeFilter.SHOW_TEXT,null,!1),b=v.nextNode();b;)c.push(b),b=v.nextNode();return c},linkify:function(h,c,v,b){return h&&(h=h.replace(TS.interop.url.URL_REGEXP,function(w){var x;if(w.toLowerCase().indexOf("www.")===0){if(!v)return w;x=`http://${w}`}else x=w;return b?`<${x}|${w}>`:`<a ${TS.utility.makeRefererSafeLink(x)} target="${c||""}">${w}</a>`}),h)},getActiveElementProp:function(h){return document.activeElement?h==="NODENAME"?document.activeElement.nodeName?document.activeElement.nodeName.toUpperCase():"":document.activeElement[h]:""},isTabCompleteShowing:function(){return!!$("#chat_input_tab_ui").length},referer_safe_url_map:{},makeRefererSafeLink:function(h){if(typeof h!="string"){TS.error(`Expected url to be a string, got: ${typeof h}`);return}h=h.replace(/\ue000/g,"").replace(/\ue001/g,""),i(h);var c=h.replace(/&amp;/g,"&");c.match(/javascript(:|&colon;)/gi)&&(c="#");var v=!0,b=TS.utility.sanitizeHTML(`<a href="${c}"></a>`,["a"],["href"],v)||null;b&&(c=b.href),c=_.escape(c).replace(/&amp;/g,"&").replace(/(%27|&#39;)/g,"'"),h&&h.lastIndexOf("/")!==h.length-1&&c&&c.lastIndexOf("/")===c.length-1&&(c=c.slice(0,-1)),c=c||"#";var w=`href="${c}"`,x="onclick",U=TS.interop.utility.getRefererPolicy();if((!TS.model||!TS.model.is_our_app)&&U&&U.rewrite_on_right_click&&(x="onmousedown"),!TS.interop.utility.urlNeedsRefererHiding(h))return w;if(TS.utility.externalURLsNeedRedirecting()){var ee=encodeURIComponent(c),R=`https://${TS.boot_data.redir_domain}/link?url=${ee}${U&&U.redirect_type?`&v=${U.redirect_type}`:""}`,y=`url-${Math.random()}-${performance.now()}`;TS.utility.referer_safe_url_map[y]=c,w+=` data-referer-safe="1" ${x}="this.href=&quot;${R}&quot;" onmouseover="this.href=TS.utility.referer_safe_url_map[&quot;${y}&quot;]" data-referer-original-href="${c}" rel="noreferrer"`}else w+=' rel="noreferrer"';return w},resetRefererSafeLinkCache:function(){TS.utility.makeRefererSafeLink&&TS.utility.makeRefererSafeLink.cache&&TS.utility.makeRefererSafeLink.cache.clear()},makeSureAllExternalLinksAreRefererSafe:function(h){var c=Date.now(),v=[];TS.utility.externalURLsNeedRedirecting()?(h.find("a[href]:not([data-referer-safe])").each(function(){var b=$(this),w=b.attr("href");if(TS.interop.utility.urlNeedsRefererHiding(w)){v.push(this.outerHTML),b.removeAttr("href");var x=this.outerHTML.replace("<a",function(){return`<a ${TS.utility.makeRefererSafeLink(w)} `});b.replaceWith(x),v[v.length-1]+=`
->
${x}`}}),TS.model&&TS.model.team&&TS.has_pri[f]&&TS.boot_data.feature_tinyspeck&&(v.length?(TS.log(f,`#${h.attr("id")} had ${v.length} LINKS WITH EXT HREFS BUT NOT data-referer-safe! to fix it took ${Date.now()-c}ms`),TS.dir(f,v)):TS.log(f,`#${h.attr("id")} had ${v.length} LINKS WITH EXT HREFS BUT NOT data-referer-safe! to check it took ${Date.now()-c}ms`))):(h.find("a[href]:not([rel])").each(function(){var b=$(this),w=b.attr("href");w.indexOf("mailto")===0||w.indexOf("skype")===0||(w&&w!=="#"?TS.interop.utility.urlNeedsRefererHiding(w)&&(v.push(this.outerHTML),b.attr("rel","noreferrer"),v[v.length-1]+=`
->
${this.outerHTML}`):b.removeAttr("href"))}),TS.model&&TS.model.team&&TS.has_pri[f]&&TS.boot_data.feature_tinyspeck&&(v.length?(TS.log(f,`#${h.attr("id")} had ${v.length} LINKS WITH EXT HREFS BUT WITHOUT rel="noreferrer"! to add rel it took ${Date.now()-c}ms`),TS.dir(f,v)):TS.log(f,`#${h.attr("id")} had ${v.length} LINKS WITH EXT HREFS BUT WITHOUT rel="noreferrer"! to check it took ${Date.now()-c}ms`)))},makeSureAllLinksHaveTargets:function(h){var c=Date.now(),v=[];h.find("a[href]:not([target])").each(function(){var b=$(this),w=b.attr("href");w.indexOf("mailto")===0||w.indexOf("skype")===0||(w&&w!=="#"?(v.push(this.outerHTML),b.attr("target",w),v[v.length-1]+=`
->
${this.outerHTML}`):b.removeAttr("href"))}),TS.model&&TS.model.team&&TS.has_pri[f]&&TS.boot_data.feature_tinyspeck&&(v.length?(TS.log(f,`#${h.attr("id")} had ${v.length} LINKS WITH HREFS BUT WITHOUT TARGETS! to add targets it took ${Date.now()-c}ms`),TS.dir(f,v)):TS.log(f,`#${h.attr("id")} had ${v.length} LINKS WITH HREFS BUT WITHOUT TARGETS! to check it took ${Date.now()-c}ms`)),TS.utility.makeSureAllExternalLinksAreRefererSafe(h)},sortTable:function(h,c,v,b,w){v=v==="desc"?"desc":"asc",w=w==="desc"?"desc":"asc";function x(y){return function(T,a){var g=U(T,y),A=U(a,y);return $.isNumeric(g)&&$.isNumeric(A)?g==A&&b?(g=U(T,b),A=U(a,b),$.isNumeric(g)&&$.isNumeric(A)?w!=v?A-g:g-A:w!=v?TS.interop.i18n.sorter(A,g):TS.interop.i18n.sorter(g,A)):g-A:TS.interop.i18n.sorter(g,A)}}d(x,"sortFunc");function U(y,T){return $(y).children("td").eq(T).attr("data-sort-val")}d(U,"getCellValue");var ee=h.find("tr:gt(0)").toArray().sort(x(c));v==="desc"&&(ee=ee.reverse());for(var R=0;R<ee.length;R+=1)h.append(ee[R])},getPercSmartly:function(h,c){if(!h||!c)return"0%";var v=h/c*100;return v!=100&&Math.round(v)==100?"99%":v<.7?"<1%":`${Math.round(v)}%`},hex2rgb:function(h){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:void 0},setImmediate:function(h){s(h)},debounce:function(h,c){var v;return function(){var b=this,w=arguments;clearTimeout(v),v=setTimeout(function(){h.apply(b,w)},c)}},debounceWithPromise:function(h,c){var v;return function(){var b=this,w=arguments;return v&&v.cancel(),v=new Promise(function(x){setTimeout(x,c)}).then(function(){return h.apply(b,w)}),v}},throttleFunc:function(h,c,v){var b={},w=d(function x(){var U=Array.prototype.slice.apply(arguments),ee=_.some(U,_.isObject);ee&&TS.error("You're passing non-scalar arguments to a function throttled with TS.utility.throttleFunc; it will likely not work as you want");var R=`f-${U.join("-")}`;if(b[R]&&b[R].context!==this)throw new Error(`Cannot use this function with different \`this\` contexts across different calls ${this} ${b[R].context}`);b[R]=b[R]||{requested:Date.now(),timeout:0,context:this},b[R].timeout||x.always_wait?b[R].requested=Date.now():h.apply(b[R].context,U),!b[R].timeout&&(b[R].timeout=setTimeout(d(function y(){var T=Date.now()-b[R].requested;T>=c?(h.apply(b[R].context,U),delete b[R]):b[R].timeout=setTimeout(y,c-T)},"timerFunc"),c))},"funcReplacement");return w.always_wait=!!v,w},throttle:function(){var h,c;h={delay:200,timer_group:"generic"},c={timers:{},queues:{}};function v(w){var x,U;if(c.timers[w]){if(c.queues[w])for(x=0,U=c.queues[w].length;x<U;x+=1)c.queues[w][x]&&c.queues[w][x]();c.queues[w]=null,c.timers[w]=null}}d(v,"processQueue");function b(w,x,U){if(!w)return!1;x=x||h.timer_group,c.timers[x]||(U=U||h.delay,c.timers[x]=window.setTimeout(function(){v(x)},U)),c.queues[x]||(c.queues[x]=[]),c.queues[x].indexOf?c.queues[x].indexOf(w)===-1&&c.queues[x].push(w):c.queues[x].push(w)}return d(b,"method"),{method:b}}(),getImgProxyURL:function(h,c,v){return TS.utility.getImgProxyURLWithOptions(h,{width:c,height:v})},getImgProxyURLWithOptions:function(h){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return h&&TS.interop.utility.getImgProxyUrl({url:h,height:c.height,width:c.width,rotate:c.rotate,renderSvg:c.render_svg,stopAnimations:c.stop_animations,emoji:c.emoji,convertIco:c.convert_ico})},rAF:function(){var h=["ms","moz","webkit","o"],c=window.requestAnimationFrame,v;for(v=0;v<h.length&&!c;v+=1)c=window[`${h[v]}RequestAnimationFrame`];if(!c){var b=0;return function(w){var x=Date.now(),U=Math.max(0,16-(x-b)),ee=window.setTimeout(function(){w(x+U)},U);return b=x+U,ee}}return function(w){return c.call(window,w)}}(),getLocationHashString:function(h){h=h||document;var c=h.location.hash;return c&&c.length?c.substr(1):c},externalURLsNeedRedirecting:function(){return!!(TS.model.team&&TS.prefs.getTeamPref("hide_referers")&&!TS.model.is_our_app)},isArrowKey:function(h){var c=TS.utility.keymap;return h==c.down||h==c.up||h==c.right||h==c.left},normalizeDevHost:function(h){return h.replace(/\.dev[0-9]*.slack.com/i,".dev.slack.com").replace(/\.staging.slack.com/i,".slack.com").replace(/\.staging-master.slack.com/i,".slack.com").replace(/\.staging-release.slack.com/i,".slack.com")},areSimpleObjectsEqual:d(function h(c,v){if(c===v)return!0;if(c===void 0&&v||v===void 0&&c||typeof c!=typeof v||c===null&&v||v===null&&c||c.length!==v.length)return!1;var b;for(b in v){if(typeof c[b]>"u"&&typeof v[b]<"u")return!1;if(v[b])switch(typeof v[b]){case"object":if(!h(c[b],v[b]))return!1;break;case"function":if(String(v[b])!=String(c[b]))return!1;break;default:if(v[b]!==c[b])return!1}else if(c[b])return!1}for(b in c)if(typeof v[b]>"u"&&typeof c[b]<"u")return!1;return!0},"recurse"),deepDiffObjects:function(h,c){if(_.isEmpty(h))return{};if(_.isEmpty(c))return h;var v={};return _.each(h,function(b,w){var x=c[w];if(x!==b)if(typeof b!=typeof x)v[w]=b;else if(_.isArray(b))v[w]=_.difference(b,x);else if(_.isPlainObject(b)){var U=TS.utility.deepDiffObjects(b,x);_.isEmpty(U)||(v[w]=U)}else v[w]=b}),v},makeWebWorker:function(h,c){var v=URL.createObjectURL(new Blob(["(",h,")()"],{type:"application/javascript"})),b=new Worker(v);return URL.revokeObjectURL(v),b.onmessage=c,b},truncateToNearestWordBoundary:function(h,c){if(h.string&&(h=h.string),h.length<=c)return h;var v="\u2026",b=h.substring(0,c),w=b.lastIndexOf(" ");return w>0&&w>c-15?b.substring(0,w)+v:b.substring(0,b.length-1)+v},getCachedScript:function(h,c){return c=$.extend(c||{},{dataType:"script",cache:!0,url:h}),jQuery.ajax(c)},disableElement:function(h,c){h=$(h),h.attr("disabled",c),h.attr("aria-disabled",c)},enableFeatureForUser:function(h){return h<0||h>100?(TS.warn("TS.utility.enableFeatureForUser() expects a number between 0 and 100"),!1):_.random(0,100)<h},roundToThree:function(h){return+`${Math.round(`${h}e+3`)}e-3`},queryIsMaybeSelf:function(h){return h=_.toLower(h),h==="me"||h==="you"||h===t||h===n},exampleEmailAddress:function(h){return h==="you"?TS.interop.i18n.t("you@{example_com}","utility")({example_com:"example.com"}):TS.interop.i18n.t("name@{example_com}","utility")({example_com:"example.com"})},test:function(){var h={};return Object.defineProperty(h,"_files_url",{get:function(){return S},set:function(c){S=c}}),Object.defineProperty(h,"_team_url",{get:function(){return p},set:function(c){p=c}}),h}});var o,t,n,s=window.setImmediate;if(!s)if(window.MutationObserver){var l=document.createElement("div"),e=[];new MutationObserver(function(){var h=e.slice();e.length=0,h.forEach(function(c){c()})}).observe(l,{attributes:!0}),s=d(function(h){e.length||l.setAttribute("yes","no"),e.push(h)},"_set_immediate_fn")}else s=d(function(h){setTimeout(h,0)},"_set_immediate_fn");var i=d(function(h){var c=TS.utility.getPathFromSlackUrl(h);if(c&&c.length>1){var v={messages:!0,archives:!0}[c[0]],b=decodeURIComponent(c[1]);v&&b&&TS.interop.utility.looksLikeChannelId(b)&&!TS.interop.channels.hasChannelWithId(b)&&TS.redux.channels.getEntityById(b)}},"_fetchUnknownChannelSlackUrl"),u=/([^.:/]+)(?:\.[^.]+)?\.slack\.com\/((?:messages|archives|unreads|threads|team|page)\/)/,f=365,S=null,p=null})()},693328:()=>{(function(){TS.registerModule("utility.teams",{getMembersForTeam:function(o){if(_.isObject(o)&&o.id){var t=_.filter(TS.model.members,{team_id:o.id});return t}}})})()},708558:(o,t,n)=>{"use strict";var s=n(198398),l=n.n(s),e=n(167931),i=n.n(e),u=n(200912),f=n.n(u),S=n(99630),p=n.n(S),h=n(560788),c=n.n(h),v=n(832225),b=n.n(v),w=n(561587),x=n.n(w),U=n(517573),ee=n.n(U),R=n(93962),y=n.n(R),T=n(517424),a=n.n(T),g=n(148985),A=n.n(g),j=n(220706),Q=n.n(j),X=n(299228),ne=n.n(X),se=n(268302),D=n.n(se),Y=n(797048),J=n.n(Y),B=n(39144),F=n.n(B),M=n(472315),P=n.n(M),C=n(296016),O=n.n(C),z=n(933773),K=n.n(z),V=n(501153),q=n.n(V),W=n(164088),te=n.n(W),_e=n(146343),ue=n.n(_e),oe=n(710338),le=n.n(oe),me=n(693328),N=n.n(me),m=n(482561),E=n.n(m),I=n(228867),H=n.n(I),ie=n(118414),re=n.n(ie),de=n(933222),ce=n.n(de),ge=n(82830),ye=n.n(ge),Te=n(589465),Fe=n.n(Te),Pe=n(974829),He=n.n(Pe),ke=n(399544),Ce=n.n(ke),Me=n(938538),Be=n.n(Me),xe=n(366332),Ue=n.n(xe),Ie=n(219351),Ne=n.n(Ie),Oe=n(994808),je=n.n(Oe),Le=n(854501),ze=n.n(Le),Ae=n(101139),We=n.n(Ae),De=n(892883),Ke=n.n(De),Re=n(397918),r=n.n(Re),k=n(339971),G=n.n(k),L=n(591861),Z=n.n(L),ae=n(241875),fe=n.n(ae),pe=n(318433),he=n.n(pe),ve=n(907300),we=n.n(ve),Se=n(658135),Ee=n.n(Se),be=n(533810),$e=n.n(be),Ge=n(204798),lt=n.n(Ge),Ve=n(966888),ot=n.n(Ve),Ye=n(94633),_t=n.n(Ye),Je=n(590588),ut=n.n(Je),Qe=n(245072),dt=n.n(Qe),Ze=n(527845),ft=n.n(Ze),Xe=n(364686),ct=n.n(Xe),qe=n(199649),mt=n.n(qe),et=n(633755),pt=n.n(et),tt=n(879656),ht=n.n(tt),rt=n(788874),gt=n.n(rt),nt=n(409409),vt=n.n(nt),it=n(900265),St=n.n(it),at=n(965872),Tt=n.n(at)}},o=>{var t=d(s=>o(o.s=s),"__webpack_exec__"),n=t(708558)}]);})();
